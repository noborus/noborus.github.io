<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>psql on Noboru Saito's page</title><link>https://noborus.github.io/categories/psql/index.html</link><description>Recent content in psql on Noboru Saito's page</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 11 Jun 2023 07:00:00 +0900</lastBuildDate><atom:link href="https://noborus.github.io/categories/psql/index.xml" rel="self" type="application/rss+xml"/><item><title>psqlのPAGERを設定する</title><link>https://noborus.github.io/blog/psql-pager/index.html</link><pubDate>Sun, 11 Jun 2023 07:00:00 +0900</pubDate><guid>https://noborus.github.io/blog/psql-pager/index.html</guid><description>psqlのPAGERを設定する PAGERをoff/onにする psqlでは pset値により、PAGERをon/off/alwaysにすることができる。alwaysにすると、psql起動時に出力が画面に収まっても常にPAGERが起動する。
オプションで一時的にPAGERをoffにする（以降offの部分はonやalwaysが指定できる）。
psql -P pager=off .psqlrcで以後ずっとPAGERをoffにする。
\pset pager off 起動後にPAGERをoffにする（psqlで接続後に実行する）。
# \pset pager off \pset pagerを引数なしで実行するとトグルになり、実行するとon/offが切り替わる。
# \pset pager Pager usage is off. # \pset pager Pager is used for long output. PostgreSQL 15.0からは、pager_min_linesが追加され、画面に収まらない場合の行数に何行以上だったらPAGERを起動するか行数を指定できる （画面に収まる行数を指定しても無効になる）。 pager_min_linesよりもpset pager=alwaysの方が優先される。 ターミナルのスクロール等でさかのぼれない場合のみPAGERを起動したい場合に便利。
psql -P pager_min_lines=10000 pset値なので、.psqlrcや起動後に実行することもできる。
\pset pager_min_lines 10000 # \pset pager_min_lines 10000 psetの値は、\psetを実行すると表示される。pagerの値はoff=0, on=1, always=2になる。
# \pset border 1 columns 0 csv_fieldsep &amp;#39;,&amp;#39; expanded off fieldsep &amp;#39;|&amp;#39; fieldsep_zero off footer on format aligned linestyle ascii null &amp;#39;&amp;#39; numericlocale off pager 1 pager_min_lines 10000 recordsep &amp;#39;\n&amp;#39; recordsep_zero off tableattr title tuples_only off unicode_border_linestyle single unicode_column_linestyle single unicode_header_linestyle single PAGERを変更する psqlでは、PSQL_PAGER又はPAGER環境変数により、PAGERを変更することができる。PAGERは汎用的な環境変数なので、psql以外のコマンドでも使用される。psqlのみに適用したい場合は、PSQL_PAGERを使用する。 PSQL_PAGERとPAGER環境変数がセットされていない場合は、more又はlessがデフォルトのPAGERになる。lessがある場合は、lessが優先される。</description></item></channel></rss>