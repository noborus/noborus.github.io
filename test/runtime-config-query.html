<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.7. 問い合わせ計画</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="runtime-config-replication.html" title="20.6. レプリケーション" /><link rel="next" href="runtime-config-logging.html" title="20.8. エラー報告とログ取得" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="runtime-config.html" title="第20章 サーバの設定">第20章 サーバの設定</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 15.0 : runtime-config-query.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-replication.html" title="20.6. レプリケーション">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="第20章 サーバの設定">上へ</a></td><td width="60%" align="center">20.7. 問い合わせ計画</td><td width="20%" align="right"> <a accesskey="n" href="runtime-config-logging.html" title="20.8. エラー報告とログ取得">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RUNTIME-CONFIG-QUERY"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.7. 問い合わせ計画</h2></div></div></div><span class="original">
    &lt;title&gt;Query Planning&lt;/title&gt;
</span><div class="sect2" id="RUNTIME-CONFIG-QUERY-ENABLE"><div class="titlepage"><div><div><h3 class="title">20.7.1. プランナメソッド設定</h3></div></div></div><span class="original">
     &lt;title&gt;Planner Method Configuration&lt;/title&gt;
</span><p>
<span class="original">
       These configuration parameters provide a crude method of
       influencing the query plans chosen by the query optimizer. If
       the default plan chosen by the optimizer for a particular query
       is not optimal, a &lt;emphasis&gt;temporary&lt;/emphasis&gt; solution is to use one
       of these configuration parameters to force the optimizer to
       choose a different plan.
       Better ways to improve the quality of the
       plans chosen by the optimizer include adjusting the planner cost
       constants (see &lt;xref linkend="runtime-config-query-constants"/&gt;),
       running &lt;link linkend="sql-analyze"&gt;&lt;command&gt;ANALYZE&lt;/command&gt;&lt;/link&gt; manually, increasing
       the value of the &lt;xref
       linkend="guc-default-statistics-target"/&gt; configuration parameter,
       and increasing the amount of statistics collected for
       specific columns using &lt;command&gt;ALTER TABLE SET
       STATISTICS&lt;/command&gt;.
</span>
以下の設定パラメータは、問い合わせオプティマイザが選択する問い合わせ計画に影響する大雑把な手法を提供します。
ある問い合わせに対してオプティマイザが選択したデフォルト計画が最適でない場合、<span class="emphasis"><em>暫定的な</em></span>解決策は、これらの設定パラメータの1つを使用し、オプティマイザに異なる計画を選択するように仕向けることです。
オプティマイザが選択する計画の品質を改善するためのより良い方法には、プランナコスト定数を調節する（<a class="xref" href="runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS" title="20.7.2. プランナコスト定数">20.7.2</a>を参照）、<a class="link" href="sql-analyze.html" title="ANALYZE"><code class="command">ANALYZE</code></a>を手作業で実行する、<a class="xref" href="runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET">default_statistics_target</a>設定パラメータの値を大きくする、<code class="command">ALTER TABLE SET STATISTICS</code>を使用して、特定の列に対して収集される統計情報を増やす、などがあります。
      </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-ENABLE-ASYNC-APPEND"><span class="term"><code class="varname">enable_async_append</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.1.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of async-aware
        append plan types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナが非同期を意識したアペンド計画型を使うのを可能あるいは不可能にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-BITMAPSCAN"><span class="term"><code class="varname">enable_bitmapscan</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.2.1.4" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.2.1.5" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.2.1.6" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of bitmap-scan plan
        types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがビットマップスキャン計画型を選択することを有効もしくは無効にします。デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-GATHERMERGE"><span class="term"><code class="varname">enable_gathermerge</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.3.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of gather
        merge plan types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがギャザーマージ計画型を選択することを有効もしくは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-HASHAGG"><span class="term"><code class="varname">enable_hashagg</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.4.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of hashed
        aggregation plan types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがハッシュ集約計画型を選択することを有効もしくは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-HASHJOIN"><span class="term"><code class="varname">enable_hashjoin</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.5.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of hash-join plan
        types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがハッシュ結合計画型を選択することを有効もしくは無効にします。デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-INCREMENTAL-SORT"><span class="term"><code class="varname">enable_incremental_sort</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.6.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of incremental sort steps.
        The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナが増分ソートステップを使うのを有効あるいは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-INDEXSCAN"><span class="term"><code class="varname">enable_indexscan</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.7.1.4" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.7.1.5" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.7.1.6" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of index-scan plan
        types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがインデックス走査計画型を選択することを有効もしくは無効にします。デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-INDEXONLYSCAN"><span class="term"><code class="varname">enable_indexonlyscan</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.8.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.8.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of index-only-scan plan
        types (see &lt;xref linkend="indexes-index-only-scans"/&gt;).
        The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがインデックスオンリースキャン計画型を選択することを有効もしくは無効にします。
(<a class="xref" href="indexes-index-only-scans.html" title="11.9. インデックスオンリースキャンとカバリングインデックス">11.9</a>を参照してください)
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-MATERIAL"><span class="term"><code class="varname">enable_material</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.9.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.9.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of materialization.
        It is impossible to suppress materialization entirely,
        but turning this variable off prevents the planner from inserting
        materialize nodes except in cases where it is required for correctness.
        The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナの具体化の使用を有効、または無効にします。
全体にわたって具体化を差し止めることはできませんが、この値をoffにすることにより、正確性が要求される場合を除いて、具体化ノードをプランナが挿入することを防止します。デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-MEMOIZE"><span class="term"><code class="varname">enable_memoize</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.10.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.10.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of memoize plans for
        caching results from parameterized scans inside nested-loop joins.
        This plan type allows scans to the underlying plans to be skipped when
        the results for the current parameters are already in the cache.  Less
        commonly looked up results may be evicted from the cache when more
        space is required for new entries. The default is
        &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナが、ネステッドループ結合の中のパラメータ付き走査の結果をキャッシュするメモ化計画を使用するのを有効あるいは無効にします。
この計画型は、キャッシュ中に現在のパラメータに対応する結果があれば、配下の計画をスキップすることを可能にします。
新しい項目のためにより多くのスペースが必要な場合は、あまり参照されていない結果は削除されるかもしれません。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-MERGEJOIN"><span class="term"><code class="varname">enable_mergejoin</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.11.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.11.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of merge-join plan
        types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがマージ結合計画型を選択することを有効もしくは無効にします。デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-NESTLOOP"><span class="term"><code class="varname">enable_nestloop</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.12.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.12.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of nested-loop join
        plans. It is impossible to suppress nested-loop joins entirely,
        but turning this variable off discourages the planner from using
        one if there are other methods available. The default is
        &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがネステッドループ結合計画を選択することを有効もしくは無効にします。
ネステッドループ結合を完全に禁止することは不可能ですが、この変数をオフにすると、もし他の方法が利用できるのであれば、プランナはその使用を行わないようになります。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-PARALLEL-APPEND"><span class="term"><code class="varname">enable_parallel_append</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.13.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.13.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of parallel-aware
        append plan types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナによるパラレル認識なアペンド計画型の利用を有効あるいは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-PARALLEL-HASH"><span class="term"><code class="varname">enable_parallel_hash</code> (<code class="type">boolean</code>)
       <a id="id-1.6.7.11.2.3.14.1.3" class="indexterm"></a>
       <a id="id-1.6.7.11.2.3.14.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of hash-join plan
        types with parallel hash. Has no effect if hash-join plans are not
        also enabled. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナによる、パラレルハッシュを使ったハッシュジョイン計画型の利用を有効あるいは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-PARTITION-PRUNING"><span class="term"><code class="varname">enable_partition_pruning</code> (<code class="type">boolean</code>)
       <a id="id-1.6.7.11.2.3.15.1.3" class="indexterm"></a>
       <a id="id-1.6.7.11.2.3.15.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's ability to eliminate a
        partitioned table's partitions from query plans.  This also controls
        the planner's ability to generate query plans which allow the query
        executor to remove (ignore) partitions during query execution.  The
        default is &lt;literal&gt;on&lt;/literal&gt;.
        See &lt;xref linkend="ddl-partition-pruning"/&gt; for details.
</span>
問い合わせプランナが、クエリプランからパーティション化テーブルのパーティションを除く機能を有効あるいは無効にします。
これはまた、クエリエグゼキュータがクエリ実行中にパーティションを削除（無視）することができるプランを生成するプランナの機能を制御します。
デフォルトは<code class="literal">on</code>です。
詳細は<a class="xref" href="ddl-partitioning.html#DDL-PARTITION-PRUNING" title="5.11.4. パーティション除去">5.11.4</a>をご覧ください。
       </p></dd><dt id="GUC-ENABLE-PARTITIONWISE-JOIN"><span class="term"><code class="varname">enable_partitionwise_join</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.16.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.16.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of partitionwise join,
        which allows a join between partitioned tables to be performed by
        joining the matching partitions.  Partitionwise join currently applies
        only when the join conditions include all the partition keys, which
        must be of the same data type and have one-to-one matching sets of
        child partitions.  Because partitionwise join planning can use
        significantly more CPU time and memory during planning, the default is
        &lt;literal&gt;off&lt;/literal&gt;.
</span>
パーティション同士の結合(partitionwise join)を問い合わせプランナが使用するのを有効あるいは無効にします。
パーティション同士の結合は、適合するパーティションを結合することによって実行される、パーティション化テーブルにまたがる結合を可能にします。
今の所、パーティション同士の結合は、すべてのパーティションキーを含んでいて、かつパーティションキーの型が同じで、一対一で一致する子パーティションの集合を持つ結合条件のときだけに適用されます。
パーティション同士の結合のプランニングには大量のCPU時間とメモリが使用されることがあるので、デフォルトは<code class="literal">off</code>です。
       </p></dd><dt id="GUC-ENABLE-PARTITIONWISE-AGGREGATE"><span class="term"><code class="varname">enable_partitionwise_aggregate</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.17.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.17.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of partitionwise grouping
        or aggregation, which allows grouping or aggregation on a partitioned
        tables performed separately for each partition.  If the &lt;literal&gt;GROUP
        BY&lt;/literal&gt; clause does not include the partition keys, only partial
        aggregation can be performed on a per-partition basis, and
        finalization must be performed later.  Because partitionwise grouping
        or aggregation can use significantly more CPU time and memory during
        planning, the default is &lt;literal&gt;off&lt;/literal&gt;.
</span>
パーティション同士（partitionwise）のグループ化、あるいは集約を、問い合わせプランナが使用するのを有効あるいは無効にします。
パーティション同士のグループ化、あるいは集約は、個々のパーティション毎にパーティション化されたテーブルに対して、グループ化あるいは集約を実行するのを可能にします。
<code class="literal">GROUP BY</code>句がパーティションキーを含まない場合は、パーティション単位で部分集約だけが実行でき、最終結果の算出は後で行われます。
パーティション同士のグループ化あるいは集約には大量のCPU時間とメモリが使用されることがあるので、デフォルトは<code class="literal">off</code>です。
       </p></dd><dt id="GUC-ENABLE-SEQSCAN"><span class="term"><code class="varname">enable_seqscan</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.18.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.18.1.4" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.18.1.5" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.18.1.6" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of sequential scan
        plan types. It is impossible to suppress sequential scans
        entirely, but turning this variable off discourages the planner
        from using one if there are other methods available. The
        default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナがシーケンシャル走査計画型を選択することを有効もしくは無効にします。
シーケンシャル走査を完全に禁止することは不可能ですが、この変数をオフにすると、もし他の方法が利用できるのであれば、プランナはその使用を行わないようになります。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-SORT"><span class="term"><code class="varname">enable_sort</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.19.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.19.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of explicit sort
        steps. It is impossible to suppress explicit sorts entirely,
        but turning this variable off discourages the planner from
        using one if there are other methods available. The default
        is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナが明示的並び替え手順を選択することを有効もしくは無効にします。
明示的並び替えを完全に禁止することは不可能ですが、この変数をオフにすると、もし他の方法が利用できるのであれば、プランナはその使用を行わないようになります。
デフォルトは<code class="literal">on</code>です。
       </p></dd><dt id="GUC-ENABLE-TIDSCAN"><span class="term"><code class="varname">enable_tidscan</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.2.3.20.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.2.3.20.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables the query planner's use of &lt;acronym&gt;TID&lt;/acronym&gt;
        scan plan types. The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
問い合わせプランナが<acronym class="acronym">TID</acronym>走査計画型を選択することを有効もしくは無効にします。
デフォルトは<code class="literal">on</code>です。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-QUERY-CONSTANTS"><div class="titlepage"><div><div><h3 class="title">20.7.2. プランナコスト定数</h3></div></div></div><span class="original">
     &lt;title&gt;Planner Cost Constants&lt;/title&gt;
</span><p>
<span class="original">
     The &lt;firstterm&gt;cost&lt;/firstterm&gt; variables described in this section are measured
     on an arbitrary scale.  Only their relative values matter, hence
     scaling them all up or down by the same factor will result in no change
     in the planner's choices.  By default, these cost variables are based on
     the cost of sequential page fetches; that is,
     &lt;varname&gt;seq_page_cost&lt;/varname&gt; is conventionally set to &lt;literal&gt;1.0&lt;/literal&gt;
     and the other cost variables are set with reference to that.  But
     you can use a different scale if you prefer, such as actual execution
     times in milliseconds on a particular machine.
</span>
本節で扱う<em class="firstterm">コスト</em>変数は、任意の尺度で測られます。
これらは相対的な値のみが意味を持つため、それらの値をすべて同じ係数で大きく、あるいは小さくしても、プランナの選択は結果として変わりません。
デフォルトではこれらのコスト変数はシーケンシャルなページ取り込みに基づいています。
つまり、<code class="varname">seq_page_cost</code>を慣習的に<code class="literal">1.0</code>とし、他のコスト変数はそれを参考にして設定されています。
しかし望むなら、特定のマシンにおけるミリ秒単位の実行時間など、異なる尺度を使用することができます。
    </p><div class="note"><h3 class="title">注記</h3><p>
<span class="original">
     Unfortunately, there is no well-defined method for determining ideal
     values for the cost variables.  They are best treated as averages over
     the entire mix of queries that a particular installation will receive.  This
     means that changing them on the basis of just a few experiments is very
     risky.
</span>
残念ながら、コスト変数に対する理想的な値を決定する、上手く定義された方法がありません。
特定のインストレーションが受け取る問い合わせ全体を混在させたものの平均として扱うのが最善でしょう。
数回の実験のみを根拠にこの値を変更することは危険であるといえます。
    </p></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-SEQ-PAGE-COST"><span class="term"><code class="varname">seq_page_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.1.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of a disk page fetch
        that is part of a series of sequential fetches.  The default is 1.0.
        This value can be overridden for tables and indexes in a particular
        tablespace by setting the tablespace parameter of the same name
        (see &lt;xref linkend="sql-altertablespace"/&gt;).
</span>
シーケンシャルな一連の取り出しの一部となる、ディスクページ取り出しに関する、プランナの推定コストを設定します。
デフォルトは1.0です。
この値は同じ名前のテーブル空間パラメータを設定することで、特定のテーブル空間の中にあるテーブルとインデックスに対して上書きできます（<a class="xref" href="sql-altertablespace.html" title="ALTER TABLESPACE"><span class="refentrytitle">ALTER TABLESPACE</span></a>を参照してください）。
       </p></dd><dt id="GUC-RANDOM-PAGE-COST"><span class="term"><code class="varname">random_page_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.2.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of a
        non-sequentially-fetched disk page.  The default is 4.0.
        This value can be overridden for tables and indexes in a particular
        tablespace by setting the tablespace parameter of the same name
        (see &lt;xref linkend="sql-altertablespace"/&gt;).
</span>
非シーケンシャル的に取り出されるディスクページのコストに対するプランナの推測を設定します。
デフォルトは4です。
この値は同じ名前のテーブル空間パラメータを設定することで、特定のテーブル空間の中にあるテーブルとインデックスに対して上書きできます（<a class="xref" href="sql-altertablespace.html" title="ALTER TABLESPACE"><span class="refentrytitle">ALTER TABLESPACE</span></a>を参照してください）。
       </p><p>
<span class="original">
        Reducing this value relative to &lt;varname&gt;seq_page_cost&lt;/varname&gt;
        will cause the system to prefer index scans; raising it will
        make index scans look relatively more expensive.  You can raise
        or lower both values together to change the importance of disk I/O
        costs relative to CPU costs, which are described by the following
        parameters.
</span>
この値を<code class="varname">seq_page_cost</code>と比較して小さくすると、システムはなるべくインデックススキャンを使用するようになります。
大きくすると、インデックススキャンが相対的に高価になります。
両方の値を増減させることで、CPUコストに対するディスクI/Oコストの重要性を変更させることができます。
これについては、後述のパラメータで説明します。
       </p><p>
<span class="original">
        Random access to mechanical disk storage is normally much more expensive
        than four times sequential access.  However, a lower default is used
        (4.0) because the majority of random accesses to disk, such as indexed
        reads, are assumed to be in cache.  The default value can be thought of
        as modeling random access as 40 times slower than sequential, while
        expecting 90% of random reads to be cached.
</span>
機械的ディスク記憶装置に対するランダムアクセスは通常はシーケンシャルアクセスの4倍よりもかなり高価です。
しかし、より低いデフォルト（4.0）が使用されます。というのはインデックスのついた読み取りのようなディスクに対するランダムアクセスのほとんどはキャッシュにあると想定されるからです。
このデフォルト値は、ランダムアクセスがシーケンシャルアクセスより40倍遅い一方で、ランダム読み込みの90%はキャッシュされていることが期待されるというモデルとして考えることができます。
       </p><p>
<span class="original">
        If you believe a 90% cache rate is an incorrect assumption
        for your workload, you can increase random_page_cost to better
        reflect the true cost of random storage reads. Correspondingly,
        if your data is likely to be completely in cache, such as when
        the database is smaller than the total server memory, decreasing
        random_page_cost can be appropriate.  Storage that has a low random
        read cost relative to sequential, e.g., solid-state drives, might
        also be better modeled with a lower value for random_page_cost,
        e.g., &lt;literal&gt;1.1&lt;/literal&gt;.
</span>
自環境の作業負荷において、90％のキャッシュ率は誤った仮定と考えられるのであれば、ランダム記憶装置読み込みのコストをより良く反映するため random_page_cost を大きくすることができます。
反対に、データが完全にキャッシュされていると思われるのであれば、random_page_cost を小さくすることが適切です。例えば、データベースの容量がサーバのメモリより小さい場合などです。
例えばSSDのような、シーケンシャルアクセスに比べてランダム読み込みコストがあまり大きくない記憶装置の場合も、random_page_cost に対し<code class="literal">1.1</code>のようにより低い値のモデル化の方が良いでしょう。
       </p><div class="tip"><h3 class="title">ヒント</h3><p>
<span class="original">
         Although the system will let you set &lt;varname&gt;random_page_cost&lt;/varname&gt; to
         less than &lt;varname&gt;seq_page_cost&lt;/varname&gt;, it is not physically sensible
         to do so.  However, setting them equal makes sense if the database
         is entirely cached in RAM, since in that case there is no penalty
         for touching pages out of sequence.  Also, in a heavily-cached
         database you should lower both values relative to the CPU parameters,
         since the cost of fetching a page already in RAM is much smaller
         than it would normally be.
</span>
システムは<code class="varname">random_page_cost</code>を<code class="varname">seq_page_cost</code>よりも小さな値に設定することを許しますが、そのようにすることは物理的にはおかしなことです。
しかし、データベースが完全にRAMにキャッシュされる場合、同じ値に設定することは意味を持ちます。
この場合、順序通りではないページアクセスに対するペナルティが存在しないからです。
また、多くがキャッシュされるデータベースでは、CPUパラメータに対して両値を小さく設定すべきです。
RAM内に存在するページの取り出しコストは通常よりもかなり小さくなるためです。
        </p></div></dd><dt id="GUC-CPU-TUPLE-COST"><span class="term"><code class="varname">cpu_tuple_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.3.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of processing
        each row during a query.
        The default is 0.01.
</span>
問い合わせ時のそれぞれの行の処理コストに対するプランナの推測を設定します。
デフォルトは0.01です。
       </p></dd><dt id="GUC-CPU-INDEX-TUPLE-COST"><span class="term"><code class="varname">cpu_index_tuple_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.4.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of processing
        each index entry during an index scan.
        The default is 0.005.
</span>
インデックス走査時のそれぞれのインデックス行の処理コストに対するプランナの推測を設定します。
デフォルトは0.005です。
       </p></dd><dt id="GUC-CPU-OPERATOR-COST"><span class="term"><code class="varname">cpu_operator_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.5.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of processing each
        operator or function executed during a query.
        The default is 0.0025.
</span>
問い合わせ時に実行される各演算子や関数の処理コストに対するプランナの推測を設定します。デフォルトは0.0025です。
       </p></dd><dt id="GUC-PARALLEL-SETUP-COST"><span class="term"><code class="varname">parallel_setup_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.6.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of launching parallel worker
        processes.
        The default is 1000.
</span>
パラレルワーカープロセスを起動するためのコストに対するプランナの推測値を設定します。
デフォルトは1000です。
       </p></dd><dt id="GUC-PARALLEL-TUPLE-COST"><span class="term"><code class="varname">parallel_tuple_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.7.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the cost of transferring one tuple
        from a parallel worker process to another process.
        The default is 0.1.
</span>
あるパラレルワーカープロセスから、1行を他のプロセスに転送するためのコストに対するプランナの推測値を設定します。
デフォルトは0.1です。
       </p></dd><dt id="GUC-MIN-PARALLEL-TABLE-SCAN-SIZE"><span class="term"><code class="varname">min_parallel_table_scan_size</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.3.4.8.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.8.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the minimum amount of table data that must be scanned in order
        for a parallel scan to be considered.  For a parallel sequential scan,
        the amount of table data scanned is always equal to the size of the
        table, but when indexes are used the amount of table data
        scanned will normally be less.
        If this value is specified without units, it is taken as blocks,
        that is &lt;symbol&gt;BLCKSZ&lt;/symbol&gt; bytes, typically 8kB.
        The default is 8 megabytes (&lt;literal&gt;8MB&lt;/literal&gt;).
</span>
パラレルスキャンを考慮する最小のテーブルデータのサイズを指定します。
パラレル順スキャンでは、スキャンされるテーブルのデータ量は、常にテーブルのサイズと同じです。
しかし、インデックスが使われる場合は、スキャンされるテーブルの量は通常少なくなるでしょう。
この値が単位なしで指定された場合は、ブロック単位であるとみなします。すなわち、<code class="symbol">BLCKSZ</code>バイト、一般的には8kBです。
デフォルトは8メガバイト（ <code class="literal">8MB</code>）です。
       </p></dd><dt id="GUC-MIN-PARALLEL-INDEX-SCAN-SIZE"><span class="term"><code class="varname">min_parallel_index_scan_size</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.3.4.9.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.9.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the minimum amount of index data that must be scanned in order
        for a parallel scan to be considered.  Note that a parallel index scan
        typically won't touch the entire index; it is the number of pages
        which the planner believes will actually be touched by the scan which
        is relevant.  This parameter is also used to decide whether a
        particular index can participate in a parallel vacuum.  See
        &lt;xref linkend="sql-vacuum"/&gt;.
        If this value is specified without units, it is taken as blocks,
        that is &lt;symbol&gt;BLCKSZ&lt;/symbol&gt; bytes, typically 8kB.
        The default is 512 kilobytes (&lt;literal&gt;512kB&lt;/literal&gt;).
</span>
パラレルスキャンが考慮されるために、スキャンされなければならないインデックスデータの最小量を設定します。
通常パラレルインデックススキャンは、典型的にはインデックス全体をアクセスしないことに注意してください。
これは、関連するスキャンにより、プランナが実際にアクセスされると信じるページ数です。
またこのパラメータは、あるインデックスがパラレルVACUUMで利用できるかどうかを決定するのにも使われます。
<a class="xref" href="sql-vacuum.html" title="VACUUM"><span class="refentrytitle">VACUUM</span></a>をご覧ください。
この値が単位なしで指定された場合は、ブロック単位であるとみなします。すなわち、<code class="symbol">BLCKSZ</code>バイト、一般的には8kBです。
デフォルトは512キロバイト（<code class="literal">512kB</code>）です。
       </p></dd><dt id="GUC-EFFECTIVE-CACHE-SIZE"><span class="term"><code class="varname">effective_cache_size</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.3.4.10.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.10.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's assumption about the effective size of the
        disk cache that is available to a single query.  This is
        factored into estimates of the cost of using an index; a
        higher value makes it more likely index scans will be used, a
        lower value makes it more likely sequential scans will be
        used. When setting this parameter you should consider both
        &lt;productname&gt;PostgreSQL&lt;/productname&gt;'s shared buffers and the
        portion of the kernel's disk cache that will be used for
        &lt;productname&gt;PostgreSQL&lt;/productname&gt; data files, though some
        data might exist in both places. Also, take
        into account the expected number of concurrent queries on different
        tables, since they will have to share the available
        space.  This parameter has no effect on the size of shared
        memory allocated by &lt;productname&gt;PostgreSQL&lt;/productname&gt;, nor
        does it reserve kernel disk cache; it is used only for estimation
        purposes.  The system also does not assume data remains in
        the disk cache between queries.
        If this value is specified without units, it is taken as blocks,
        that is &lt;symbol&gt;BLCKSZ&lt;/symbol&gt; bytes, typically 8kB.
        The default is 4 gigabytes (&lt;literal&gt;4GB&lt;/literal&gt;).
        (If &lt;symbol&gt;BLCKSZ&lt;/symbol&gt; is not 8kB, the default value scales
        proportionally to it.)
</span>
単一の問い合わせで利用できるディスクキャッシュの実効容量に関するプランナの条件を設定します。
これは、インデックスを使用するコスト推定値の要素となります。
より高い値にすれば、よりインデックススキャンが使用されるようになり、より小さく設定すれば、シーケンシャルスキャンがより使用されるようになります。
このパラメータを設定する時には、<span class="productname">PostgreSQL</span>の共有バッファと<span class="productname">PostgreSQL</span>データファイルに使用されるカーネルのディスクキャッシュの量の両方を考慮しなければなりませんが、データは両方に存在することもあります。
また、利用可能な領域を共有しますので、異なるテーブルに対して同時に実行される問い合わせの想定数も考慮してください。
このパラメータは、<span class="productname">PostgreSQL</span>で割り当てられる共有メモリの大きさには影響を与えません。また、カーネルのディスクキャッシュを予約したりもしません。
これは推定目的のみで使用されます。
同時に、システムは問い合わせの間のディスクキャッシュ内のデータの残滓を想定していません。
この値が単位なしで指定された場合は、ブロック単位であるとみなします。すなわち、<code class="symbol">BLCKSZ</code>バイト、一般的には8kBです。
デフォルトは4ギガバイト（<code class="literal">4GB</code>）です。
(<code class="symbol">BLCKSZ</code>が8kbでなければ、この設定のデフォルト値と最大値が<code class="symbol">BLCKSZ</code>に比例して変更されます。)
       </p></dd><dt id="GUC-JIT-ABOVE-COST"><span class="term"><code class="varname">jit_above_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.11.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.11.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the query cost above which JIT compilation is activated, if
        enabled (see &lt;xref linkend="jit"/&gt;).
        Performing &lt;acronym&gt;JIT&lt;/acronym&gt; costs planning time but can
        accelerate query execution.
        Setting this to &lt;literal&gt;-1&lt;/literal&gt; disables JIT compilation.
        The default is &lt;literal&gt;100000&lt;/literal&gt;.
</span>
JITが有効な場合（<a class="xref" href="jit.html" title="第32章 実行時コンパイル(JIT)">第32章</a>参照）、それ以上ならJITコンパイルが起動する問い合わせコストを設定します。
<acronym class="acronym">JIT</acronym>を実行するとプラン時間がかかりますが、問い合わせの実行を高速化することができます。
これを<code class="literal">-1</code>にすると、JITコンパイルは無効になります。
デフォルトは<code class="literal">100000</code>です。
       </p></dd><dt id="GUC-JIT-INLINE-ABOVE-COST"><span class="term"><code class="varname">jit_inline_above_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.12.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.12.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the query cost above which JIT compilation attempts to inline
        functions and operators.  Inlining adds planning time, but can
        improve execution speed.  It is not meaningful to set this to less
        than &lt;varname&gt;jit_above_cost&lt;/varname&gt;.
        Setting this to &lt;literal&gt;-1&lt;/literal&gt; disables inlining.
        The default is &lt;literal&gt;500000&lt;/literal&gt;.
</span>
それ以上ならJITコンパイルが関数と演算子のインライン化を試みる問い合わせコストを設定します。
インライン化するとプラン時間がかかりますが、問い合わせの実行速度を改善できます。
これを<code class="varname">jit_above_cost</code>よりも小さくするのは意味がありません。
これを<code class="literal">-1</code>にすると、インライン化は無効になります。
デフォルトは<code class="literal">500000</code>です。
       </p></dd><dt id="GUC-JIT-OPTIMIZE-ABOVE-COST"><span class="term"><code class="varname">jit_optimize_above_cost</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.3.4.13.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.3.4.13.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the query cost above which JIT compilation applies expensive
        optimizations.  Such optimization adds planning time, but can improve
        execution speed.  It is not meaningful to set this to less
        than &lt;varname&gt;jit_above_cost&lt;/varname&gt;, and it is unlikely to be
        beneficial to set it to more
        than &lt;varname&gt;jit_inline_above_cost&lt;/varname&gt;.
        Setting this to &lt;literal&gt;-1&lt;/literal&gt; disables expensive optimizations.
        The default is &lt;literal&gt;500000&lt;/literal&gt;.
</span>
それ以上ならJITコンパイルが高価な最適化を実行する問い合わせコストを設定します。
そうした最適化にはプラン時間がかかりますが、問い合わせの実行速度を改善できます。
これを<code class="varname">jit_above_cost</code>よりも小さくするのは意味がなく、また<code class="varname">jit_inline_above_cost</code>よりも大きくしても利益はないでしょう。
これを<code class="literal">-1</code>にすると、高価な最適化は無効になります
デフォルトは<code class="literal">500000</code>です。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-QUERY-GEQO"><div class="titlepage"><div><div><h3 class="title">20.7.3. 遺伝的問い合わせオプティマイザ</h3></div></div></div><span class="original">
     &lt;title&gt;Genetic Query Optimizer&lt;/title&gt;
</span><p>
<span class="original">
      The genetic query optimizer (GEQO) is an algorithm that does query
      planning using heuristic searching.  This reduces planning time for
      complex queries (those joining many relations), at the cost of producing
      plans that are sometimes inferior to those found by the normal
      exhaustive-search algorithm.
      For more information see &lt;xref linkend="geqo"/&gt;.
</span>
遺伝的問い合わせオプティマイザ（GEQO）はヒューリスティック（発見的）検索法を用いた問い合わせ計画を行なう演算手法です。
通常のしらみつぶしの検索演算手法で見いだされる計画よりも時として劣った計画を作成するという代償を払いますが、この手法は（多くのリレーションを結合するような）複雑な問い合わせに対し計画時間を軽減します。
より詳細は<a class="xref" href="geqo.html" title="第62章 遺伝的問い合わせ最適化">第62章</a>を参照してください。
     </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-GEQO"><span class="term"><code class="varname">geqo</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.4.3.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.1.1.4" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.1.1.5" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.1.1.6" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.1.1.7" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.1.1.8" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Enables or disables genetic query optimization.
        This is on by default.  It is usually best not to turn it off in
        production; the &lt;varname&gt;geqo_threshold&lt;/varname&gt; variable provides
        more granular control of GEQO.
</span>
遺伝的問い合わせ最適化を有効もしくは無効にします。デフォルトは有効です。
運用時には無効にしないことが通常最善です。<code class="varname">geqo_threshold</code>変数は、GEQOを制御するためよりきめ細かな方法を提供します。
       </p></dd><dt id="GUC-GEQO-THRESHOLD"><span class="term"><code class="varname">geqo_threshold</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.4.3.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.2.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Use genetic query optimization to plan queries with at least
        this many &lt;literal&gt;FROM&lt;/literal&gt; items involved. (Note that a
        &lt;literal&gt;FULL OUTER JOIN&lt;/literal&gt; construct counts as only one &lt;literal&gt;FROM&lt;/literal&gt;
        item.) The default is 12. For simpler queries it is usually best
        to use the regular, exhaustive-search planner, but for queries with
        many tables the exhaustive search takes too long, often
        longer than the penalty of executing a suboptimal plan.  Thus,
        a threshold on the size of the query is a convenient way to manage
        use of GEQO.
</span>
少なくともこれだけの数の<code class="literal">FROM</code>項目数があるときに、問い合わせを計画するのに遺伝的問い合わせ最適化を使用します。
（<code class="literal">FULL OUTER JOIN</code>の生成子は、<code class="literal">FROM</code>項目が１つだけとして計算することに注意してください。）
デフォルトは12です。
もっと単純な問い合わせでは、通常の、そしてしらみつぶしの検索プランナを使用するのが最善ですが、多くのテーブルを持つ問い合わせでは、しらみつぶしの検索は非常に時間がかかり、しばしば次善の計画を実行する代償より長くなります。
従って、問い合わせの大きさに対する閾値はGEQOの使用を管理するのに便利な方法です。
       </p></dd><dt id="GUC-GEQO-EFFORT"><span class="term"><code class="varname">geqo_effort</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.4.3.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.3.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the trade-off between planning time and query plan
        quality in GEQO. This variable must be an integer in the
        range from 1 to 10. The default value is five. Larger values
        increase the time spent doing query planning, but also
        increase the likelihood that an efficient query plan will be
        chosen.
</span>
GEQOにおける計画時間と問い合わせ計画の品質間のトレードオフを制御します。この変数は1から10までの範囲の整数でなければなりません。
デフォルトの値は5です。値を大きくすると、問い合わせ計画作成により多くの時間を費すことになりますが、より効率的な問い合わせ計画が選択される可能性が増加します。
       </p><p>
<span class="original">
        &lt;varname&gt;geqo_effort&lt;/varname&gt; doesn't actually do anything
        directly; it is only used to compute the default values for
        the other variables that influence GEQO behavior (described
        below). If you prefer, you can set the other parameters by
        hand instead.
</span>
実際<code class="varname">geqo_effort</code>は直接何も行いません。それはGEQOの動作に影響を与える他の変数に対し、デフォルトの値を計算するためにのみ使用されます（以下で説明します）。もしよければ、代わりに手作業で他のパラメータを設定できます。
       </p></dd><dt id="GUC-GEQO-POOL-SIZE"><span class="term"><code class="varname">geqo_pool_size</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.4.3.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.4.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the pool size used by GEQO, that is the
        number of individuals in the genetic population.  It must be
        at least two, and useful values are typically 100 to 1000.  If
        it is set to zero (the default setting) then a suitable
        value is chosen based on &lt;varname&gt;geqo_effort&lt;/varname&gt; and
        the number of tables in the query.
</span>
GEQOで使用されるプール容量を管理します。それは遺伝的個体群内の個体数です。最低でも2つはなければならず、よく100から1000までの値が使用されます。
もし（デフォルトの設定である）零に設定されると、<code class="varname">geqo_effort</code>および問い合わせの中のテーブル数に基づいて、適切な値が選択されます。
       </p></dd><dt id="GUC-GEQO-GENERATIONS"><span class="term"><code class="varname">geqo_generations</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.4.3.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.5.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the number of generations used by GEQO, that is
        the number of iterations of the algorithm.  It must
        be at least one, and useful values are in the same range as
        the pool size.  If it is set to zero (the default setting)
        then a suitable value is chosen based on
        &lt;varname&gt;geqo_pool_size&lt;/varname&gt;.
</span>
GEQOで使用される世代の数を管理します。それはアルゴリズムの反復数です。最低でも1はなければならず、よくプールサイズと同じ範囲の値が使用されます。
これを0に設定（デフォルトの設定）すると、適切な値が<code class="varname">geqo_pool_size</code>に基づいて選択されます。
       </p></dd><dt id="GUC-GEQO-SELECTION-BIAS"><span class="term"><code class="varname">geqo_selection_bias</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.4.3.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.6.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the selection bias used by GEQO. The selection bias
        is the selective pressure within the population. Values can be
        from 1.50 to 2.00; the latter is the default.
</span>
GEQOで使用される淘汰の偏りを管理します。
淘汰の偏りは個体群内の（遺伝的な）自然淘汰です。値は1.50から2.00で、2.00がデフォルトです。
       </p></dd><dt id="GUC-GEQO-SEED"><span class="term"><code class="varname">geqo_seed</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.4.3.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.4.3.7.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the initial value of the random number generator used
        by GEQO to select random paths through the join order search space.
        The value can range from zero (the default) to one.  Varying the
        value changes the set of join paths explored, and may result in a
        better or worse best path being found.
</span>
結合順序検索空間にわたって、GEQOが無作為のパスを選択するために使用される乱数発生器の初期値を制御します。
値は0（デフォルト）から1までの範囲です。
値を変動させると探査される結合パスの集合が変化するため、見つかる最善のパスが良くなる場合も悪くなる場合もあります。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-QUERY-OTHER"><div class="titlepage"><div><div><h3 class="title">20.7.4. その他のプランナオプション</h3></div></div></div><span class="original">
     &lt;title&gt;Other Planner Options&lt;/title&gt;
</span><div class="variablelist"><dl class="variablelist"><dt id="GUC-DEFAULT-STATISTICS-TARGET"><span class="term"><code class="varname">default_statistics_target</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.5.2.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.1.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the default statistics target for table columns without
        a column-specific target set via &lt;command&gt;ALTER TABLE
        SET STATISTICS&lt;/command&gt;.  Larger values increase the time needed to
        do &lt;command&gt;ANALYZE&lt;/command&gt;, but might improve the quality of the
        planner's estimates. The default is 100. For more information
        on the use of statistics by the &lt;productname&gt;PostgreSQL&lt;/productname&gt;
        query planner, refer to &lt;xref linkend="planner-stats"/&gt;.
</span>
<code class="command">ALTER TABLE SET STATISTICS</code>で列特定の目的セットの無いテーブル列に対し、デフォルトの統計対象を設定します。
より大きい値は<code class="command">ANALYZE</code>に必要な時間を増加させますが、プランナの予測の品質を向上させます。
デフォルトは100です。
<span class="productname">PostgreSQL</span>の問い合わせプランナによる統計情報の使用方法に関するより詳細な情報は、<a class="xref" href="planner-stats.html" title="14.2. プランナで使用される統計情報">14.2</a>を参照してください。
       </p></dd><dt id="GUC-CONSTRAINT-EXCLUSION"><span class="term"><code class="varname">constraint_exclusion</code> (<code class="type">enum</code>)
      <a id="id-1.6.7.11.5.2.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.2.1.4" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.2.1.5" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.2.1.6" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Controls the query planner's use of table constraints to
        optimize queries.
        The allowed values of &lt;varname&gt;constraint_exclusion&lt;/varname&gt; are
        &lt;literal&gt;on&lt;/literal&gt; (examine constraints for all tables),
        &lt;literal&gt;off&lt;/literal&gt; (never examine constraints), and
        &lt;literal&gt;partition&lt;/literal&gt; (examine constraints only for inheritance
        child tables and &lt;literal&gt;UNION ALL&lt;/literal&gt; subqueries).
        &lt;literal&gt;partition&lt;/literal&gt; is the default setting.
        It is often used with traditional inheritance trees to improve
        performance.
</span>
問い合わせプランナが問い合わせを最適化する際のテーブル制約の使用を制御します。
<code class="varname">constraint_exclusion</code>に許容される値は、<code class="literal">on</code>（全てのテーブルに対し制約を検査する）、<code class="literal">off</code>（決して制約を検査しない）、および<code class="literal">partition</code>（継承された子テーブルおよび<code class="literal">UNION ALL</code>副問い合わせのみ制約を検査する）です。
<code class="literal">partition</code>がデフォルトの設定です。
伝統的な継承ツリーでしばしば性能向上のために使用されます。
      </p><p>
<span class="original">
        When this parameter allows it for a particular table, the planner
        compares query conditions with the table's &lt;literal&gt;CHECK&lt;/literal&gt;
        constraints, and omits scanning tables for which the conditions
        contradict the constraints.  For example:
</span>
このパラメータが特定のテーブルに対して許される時、プランナはそのテーブルの<code class="literal">CHECK</code>制約で問い合わせ条件を比較し、制約と矛盾する条件のテーブルの走査を省きます。
例えば以下のようになります。

</p><pre class="programlisting">
CREATE TABLE parent(key integer, ...);
CREATE TABLE child1000(check (key between 1000 and 1999)) INHERITS(parent);
CREATE TABLE child2000(check (key between 2000 and 2999)) INHERITS(parent);
...
SELECT * FROM parent WHERE key = 2400;
</pre><p>

<span class="original">
        With constraint exclusion enabled, this &lt;command&gt;SELECT&lt;/command&gt;
        will not scan &lt;structname&gt;child1000&lt;/structname&gt; at all, improving performance.
</span>
制約排除が有効であると、この<code class="command">SELECT</code>は全く<code class="structname">child1000</code>を走査せず、性能を向上させます。
       </p><p>
<span class="original">
        Currently, constraint exclusion is enabled by default
        only for cases that are often used to implement table partitioning via
        inheritance trees.  Turning it on for all tables imposes extra
        planning overhead that is quite noticeable on simple queries, and most
        often will yield no benefit for simple queries.  If you have no
        tables that are partitioned using traditional inheritance, you might
        prefer to turn it off entirely.  (Note that the equivalent feature for
        partitioned tables is controlled by a separate parameter,
        &lt;xref linkend="guc-enable-partition-pruning"/&gt;.)
</span>
現在、継承ツリーを使ってテーブルパーティショニングを実装するために使用されるよくある場合のことだけを考慮して、制約排除はデフォルトで有効です。
すべてのテーブルに対して有効にするのは、単純な問い合わせにおいて特にはっきりわかる計画作成の余計なオーバーヘッドをもたらし、単純な問い合わせにはメリットがありません。
伝統的な継承を使うパーティショニングされたテーブルがない場合、完全に無効にする方が良いでしょう。
（パーティショニングされたテーブル用の同等の機能は別のパラメータ<a class="xref" href="runtime-config-query.html#GUC-ENABLE-PARTITION-PRUNING">enable_partition_pruning</a>で制御します。）
       </p><p>
<span class="original">
        Refer to &lt;xref linkend="ddl-partitioning-constraint-exclusion"/&gt; for
        more information on using constraint exclusion to implement
        partitioning.
</span>
パーティショニングを実装するための制約排除の利用についてのより進んだ情報は<a class="xref" href="ddl-partitioning.html#DDL-PARTITIONING-CONSTRAINT-EXCLUSION" title="5.11.5. パーティショニングと制約による除外">5.11.5</a>を参照ください。
       </p></dd><dt id="GUC-CURSOR-TUPLE-FRACTION"><span class="term"><code class="varname">cursor_tuple_fraction</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.5.2.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.3.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the fraction of a cursor's rows that
        will be retrieved.  The default is 0.1.  Smaller values of this
        setting bias the planner towards using &lt;quote&gt;fast start&lt;/quote&gt; plans
        for cursors, which will retrieve the first few rows quickly while
        perhaps taking a long time to fetch all rows.  Larger values
        put more emphasis on the total estimated time.  At the maximum
        setting of 1.0, cursors are planned exactly like regular queries,
        considering only the total estimated time and not how soon the
        first rows might be delivered.
</span>
検索されるカーソル行の割合のプランナの見積もりを設定します。
デフォルトは0.1です。
この設定をより小さくすると、プランナはカーソルに対し<span class="quote">「<span class="quote">起動を高速にする</span>」</span>計画を使用するようになりがちになります。
この場合先頭の数行の取り出しは高速になりますが、行全体を取り出す場合に時間がかかるようになる可能性があります。
この値をより大きくすると、推定時間全体がより強調されるようになります。
最大の設定である1.0の場合、カーソルは通常の問い合わせとまったく同様に計画されます。
つまり、推定時間全体のみが考慮され、先頭の行の取り出しにかかる時間は考慮されなくなります。
       </p></dd><dt id="GUC-FROM-COLLAPSE-LIMIT"><span class="term"><code class="varname">from_collapse_limit</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.5.2.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.4.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        The planner will merge sub-queries into upper queries if the
        resulting &lt;literal&gt;FROM&lt;/literal&gt; list would have no more than
        this many items.  Smaller values reduce planning time but might
        yield inferior query plans.  The default is eight.
        For more information see &lt;xref linkend="explicit-joins"/&gt;.
</span>
プランナは、<code class="literal">FROM</code>リストがこの数の項目より少ない結果の場合、副問い合わせを上位の問い合わせに併合します。
より小さい値は計画時間を縮小させますが、劣った問い合わせ計画をもたらす可能性があります。
デフォルトは8です。
詳細は<a class="xref" href="explicit-joins.html" title="14.3. 明示的なJOIN句でプランナを制御する">14.3</a>を参照してください。
       </p><p>
<span class="original">
        Setting this value to &lt;xref linkend="guc-geqo-threshold"/&gt; or more
        may trigger use of the GEQO planner, resulting in non-optimal
        plans.  See &lt;xref linkend="runtime-config-query-geqo"/&gt;.
</span>
この値を<a class="xref" href="runtime-config-query.html#GUC-GEQO-THRESHOLD">geqo_threshold</a>か、それ以上に設定するとGEQOプランナ使用の誘引となり、最適ではない計画をもたらします。<a class="xref" href="runtime-config-query.html#RUNTIME-CONFIG-QUERY-GEQO" title="20.7.3. 遺伝的問い合わせオプティマイザ">20.7.3</a>を参照してください。
       </p></dd><dt id="GUC-JIT"><span class="term"><code class="varname">jit</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.11.5.2.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.5.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Determines whether &lt;acronym&gt;JIT&lt;/acronym&gt; compilation may be used by
        &lt;productname&gt;PostgreSQL&lt;/productname&gt;, if available (see &lt;xref
        linkend="jit"/&gt;).
        The default is &lt;literal&gt;on&lt;/literal&gt;.
</span>
<span class="productname">PostgreSQL</span>が、可能ならば<acronym class="acronym">JIT</acronym>コンパイルを使うかどうかを決定します（<a class="xref" href="jit.html" title="第32章 実行時コンパイル(JIT)">第32章</a>を参照）。
デフォルトは<code class="literal">on</code>です。
       </p></dd><span class="original"> split-config1-end </span><span class="original"> split-config2-start </span><dt id="GUC-JOIN-COLLAPSE-LIMIT"><span class="term"><code class="varname">join_collapse_limit</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.11.5.2.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.6.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        The planner will rewrite explicit &lt;literal&gt;JOIN&lt;/literal&gt;
        constructs (except &lt;literal&gt;FULL JOIN&lt;/literal&gt;s) into lists of
        &lt;literal&gt;FROM&lt;/literal&gt; items whenever a list of no more than this many items
        would result.  Smaller values reduce planning time but might
        yield inferior query plans.
</span>
最終的にリストがこの項目数以下になる時、プランナは、明示的な<code class="literal">JOIN</code>構文（<code class="literal">FULL JOIN</code>を除く）を<code class="literal">FROM</code>項目のリストに直します。
この値を小さくすれば計画作成時間は減少しますが、劣った問い合わせ計画が作成される可能性があります。
       </p><p>
<span class="original">
        By default, this variable is set the same as
        &lt;varname&gt;from_collapse_limit&lt;/varname&gt;, which is appropriate
        for most uses. Setting it to 1 prevents any reordering of
        explicit &lt;literal&gt;JOIN&lt;/literal&gt;s. Thus, the explicit join order
        specified in the query will be the actual order in which the
        relations are joined. Because the query planner does not always choose
        the optimal join order, advanced users can elect to
        temporarily set this variable to 1, and then specify the join
        order they desire explicitly.
        For more information see &lt;xref linkend="explicit-joins"/&gt;.
</span>
デフォルトでは、この値は<code class="varname">from_collapse_limit</code>と同じ値に設定されており、殆どの場合に適切です。
これを1に設定すると明示的な<code class="literal">JOIN</code>の再順序付けは行われなくなります。
したがって、問い合わせで指定された明示的結合順序は、関係（リレーション）が結合される実際の順序となります。
問い合わせプランナは常に最適な結合順序を選択するとは限らないので、
上級ユーザなら暫定的にこの変数を1に設定し、明示的に希望とする結合順序を指定してもよいでしょう。
詳細は<a class="xref" href="explicit-joins.html" title="14.3. 明示的なJOIN句でプランナを制御する">14.3</a>を参照してください。
       </p><p>
<span class="original">
        Setting this value to &lt;xref linkend="guc-geqo-threshold"/&gt; or more
        may trigger use of the GEQO planner, resulting in non-optimal
        plans.  See &lt;xref linkend="runtime-config-query-geqo"/&gt;.
</span>
この値を<a class="xref" href="runtime-config-query.html#GUC-GEQO-THRESHOLD">geqo_threshold</a>か、それ以上に設定するとGEQOプランナ使用の誘引となり、最適ではない計画をもたらします。<a class="xref" href="runtime-config-query.html#RUNTIME-CONFIG-QUERY-GEQO" title="20.7.3. 遺伝的問い合わせオプティマイザ">20.7.3</a>を参照してください。
       </p></dd><dt id="GUC-PLAN-CACHE_MODE"><span class="term"><code class="varname">plan_cache_mode</code> (<code class="type">enum</code>)
      <a id="id-1.6.7.11.5.2.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.7.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Prepared statements (either explicitly prepared or implicitly
        generated, for example by PL/pgSQL) can be executed using custom or
        generic plans.  Custom plans are made afresh for each execution
        using its specific set of parameter values, while generic plans do
        not rely on the parameter values and can be re-used across
        executions.  Thus, use of a generic plan saves planning time, but if
        the ideal plan depends strongly on the parameter values then a
        generic plan may be inefficient.  The choice between these options
        is normally made automatically, but it can be overridden
        with &lt;varname&gt;plan_cache_mode&lt;/varname&gt;.
        The allowed values are &lt;literal&gt;auto&lt;/literal&gt; (the default),
        &lt;literal&gt;force_custom_plan&lt;/literal&gt; and
        &lt;literal&gt;force_generic_plan&lt;/literal&gt;.
        This setting is considered when a cached plan is to be executed,
        not when it is prepared.
        For more information see &lt;xref linkend="sql-prepare"/&gt;.
</span>
準備された文（明示的に準備されたものあるいはPL/pgSQLのように暗黙的に生成されたもののどちらにおいても）は、カスタムあるいは汎用(generic)プランで実行することができます。
カスタムプランは実行ごとに指定されたパラメータ値の集合で新たに作られます。
一方汎用プランはパラメータ値に依存せず、複数の実行にまたがって再利用できます。
したがって、汎用プランはプランニングに要する時間を節約できますが、理想的なプランがパラメータ値に強く依存している場合は、汎用プランは非効率かも知れません。
通常この両者の選択は自動的に行われますが、<code class="varname">plan_cache_mode</code>で上書きできます。
可能な値は<code class="literal">auto</code>（デフォルト）、<code class="literal">force_custom_plan</code>、<code class="literal">force_generic_plan</code>です。
この設定は、準備するときではなく、キャッシュされたプランを実行する際に考慮されます。
詳細は<a class="xref" href="sql-prepare.html" title="PREPARE"><span class="refentrytitle">PREPARE</span></a>をご覧ください。
       </p></dd><dt id="GUC-RECURSIVE-WORKTABLE-FACTOR"><span class="term"><code class="varname">recursive_worktable_factor</code> (<code class="type">floating point</code>)
      <a id="id-1.6.7.11.5.2.8.1.3" class="indexterm"></a>
      <a id="id-1.6.7.11.5.2.8.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<span class="original">
        Sets the planner's estimate of the average size of the working
        table of a &lt;link linkend="queries-with-recursive"&gt;recursive
        query&lt;/link&gt;, as a multiple of the estimated size of the initial
        non-recursive term of the query.  This helps the planner choose
        the most appropriate method for joining the working table to the
        query's other tables.
        The default value is &lt;literal&gt;10.0&lt;/literal&gt;.  A smaller value
        such as &lt;literal&gt;1.0&lt;/literal&gt; can be helpful when the recursion
        has low &lt;quote&gt;fan-out&lt;/quote&gt; from one step to the next, as for
        example in shortest-path queries.  Graph analytics queries may
        benefit from larger-than-default values.
</span>
<a class="link" href="queries-with.html#QUERIES-WITH-RECURSIVE" title="7.8.2. 再帰的問い合わせ">再帰問合せ</a>のワーキング・テーブルの平均サイズのプランナの推定値を、問合せの最初の非再帰項の推定サイズの倍数として設定します。
これにより、プランナは、ワーキング・テーブルを問合せの他のテーブルに結合するための最も適切な方法を選択できます。
デフォルト値は<code class="literal">10.0</code>です。
<code class="literal">1.0</code>などの小さい値は、最短パス問合せなど、あるステップから次のステップへの再帰が低い<span class="quote">「<span class="quote">広がり方(fanout)</span>」</span>の場合に役立ちます。
グラフ分析の問合せでは、デフォルト値より大きい値が有効な場合があります。
       </p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-replication.html" title="20.6. レプリケーション">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html" title="第20章 サーバの設定">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-logging.html" title="20.8. エラー報告とログ取得">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">20.6. レプリケーション </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 20.8. エラー報告とログ取得</td></tr></table></div></body></html>