<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE MATERIALIZED VIEW</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-createlanguage.html" title="CREATE LANGUAGE" /><link rel="next" href="sql-createoperator.html" title="CREATE OPERATOR" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 16.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="sql-commands.html" title="SQLコマンド">SQLコマンド</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-createlanguage.html" title="CREATE LANGUAGE">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQLコマンド">上へ</a></td><td width="60%" align="center">CREATE MATERIALIZED VIEW</td><td width="20%" align="right"> <a accesskey="n" href="sql-createoperator.html" title="CREATE OPERATOR">次へ</a></td></tr></table><hr /></div><div class="refentry" id="SQL-CREATEMATERIALIZEDVIEW"><div class="titlepage"></div><a id="id-1.9.3.71.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">CREATE MATERIALIZED VIEW</span></h2><p>CREATE MATERIALIZED VIEW<!--
  <refpurpose>define a new materialized view</refpurpose>
--> — 新しいマテリアライズドビューを定義する</p></div><div class="refsynopsisdiv"><h2>概要</h2><pre class="synopsis">
CREATE MATERIALIZED VIEW [ IF NOT EXISTS ] <em class="replaceable"><code>table_name</code></em>
    [ (<em class="replaceable"><code>column_name</code></em> [, ...] ) ]
    [ USING <em class="replaceable"><code>method</code></em> ]
    [ WITH ( <em class="replaceable"><code>storage_parameter</code></em> [= <em class="replaceable"><code>value</code></em>] [, ... ] ) ]
    [ TABLESPACE <em class="replaceable"><code>tablespace_name</code></em> ]
    AS <em class="replaceable"><code>query</code></em>
    [ WITH [ NO ] DATA ]
</pre></div><div class="refsect1" id="id-1.9.3.71.5"><h2>説明</h2><!--
  <title>Description</title>
--><p>
<!--
   <command>CREATE MATERIALIZED VIEW</command> defines a materialized view of
   a query.  The query is executed and used to populate the view at the time
   the command is issued (unless <command>WITH NO DATA</command> is used) and may be
   refreshed later using <command>REFRESH MATERIALIZED VIEW</command>.
-->
<code class="command">CREATE MATERIALIZED VIEW</code>は問い合わせからマテリアライズドビューを定義します。
この問い合わせはコマンド発行時にビューにデータを投入する（<code class="command">WITH NO DATA</code>が使用されていない場合）ために実行され、使用されます。
また将来の<code class="command">REFRESH MATERIALIZED VIEW</code>の使用で更新されるかもしれません。
  </p><p>
<!--
   <command>CREATE MATERIALIZED VIEW</command> is similar to
   <command>CREATE TABLE AS</command>, except that it also remembers the query used
   to initialize the view, so that it can be refreshed later upon demand.
   A materialized view has many of the same properties as a table, but there
   is no support for temporary materialized views.
-->
<code class="command">CREATE MATERIALIZED VIEW</code>は<code class="command">CREATE TABLE AS</code>と似ていますが、必要に応じて後で更新できるように、ビューの初期化時に使用された問い合わせを記憶する点が異なります。
マテリアライズドビューはテーブルと同じ属性を多く持ちますが、一時的なマテリアライズドビューをサポートしていません。
  </p><p>
<!--
   <command>CREATE MATERIALIZED VIEW</command> requires
   <literal>CREATE</literal> privilege on the schema used for the materialized
   view.
-->
<code class="command">CREATE MATERIALIZED VIEW</code>には、マテリアライズドビューのために使われるスキーマでの<code class="literal">CREATE</code>権限が必要です。
  </p></div><div class="refsect1" id="id-1.9.3.71.6"><h2>パラメータ</h2><!--
  <title>Parameters</title>
--><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">IF NOT EXISTS</code></span></dt><dd><p>
<!--
      Do not throw an error if a materialized view with the same name already
      exists. A notice is issued in this case.  Note that there is no guarantee
      that the existing materialized view is anything like the one that would
      have been created.
-->
同じ名前のマテリアライズドビューが既に存在する場合にエラーとしません。
この場合、注意が発行されます。
既存のマテリアライズドビューが作成されようとしていたものと類似のものであることは全く保証されないことに注意してください。
     </p></dd><dt><span class="term"><em class="replaceable"><code>table_name</code></em></span></dt><dd><p>
<!--
      The name (optionally schema-qualified) of the materialized view to be
      created.  The name must be distinct from the name of any other relation
      (table, sequence, index, view, materialized view, or foreign table) in
      the same schema.
-->
作成するマテリアライズドビューの名前です（スキーマ修飾も可）。
この名前は、同じスキーマ内にある他のリレーション（テーブル、シーケンス、インデックス、ビュー、マテリアライズドビュー、外部テーブル）と異なるものでなければなりません。
     </p></dd><dt><span class="term"><em class="replaceable"><code>column_name</code></em></span></dt><dd><p>
<!--
      The name of a column in the new materialized view.  If column names are
      not provided, they are taken from the output column names of the query.
-->
新しいマテリアライズドビューの列の名前です。
列名が提供されていない場合の列名は、問い合わせの出力列名から取られます。
     </p></dd><dt><span class="term"><code class="literal">USING <em class="replaceable"><code>method</code></em></code></span></dt><dd><p>
<!--
      This optional clause specifies the table access method to use to store
      the contents for the new materialized view; the method needs be an
      access method of type <literal>TABLE</literal>. See <xref
      linkend="tableam"/> for more information.  If this option is not
      specified, the default table access method is chosen for the new
      materialized view. See <xref linkend="guc-default-table-access-method"/>
      for more information.
-->
この省略可能な句は、新しいマテリアライズドビューの内容を保存するのに使うテーブルアクセスメソッドを指定します。メソッドは<code class="literal">TABLE</code>型のアクセスメソッドであることが必要です。
より詳しい情報は<a class="xref" href="tableam.html" title="第63章 テーブルアクセスメソッドのインタフェース定義">第63章</a>を参照してください。
このオプションが指定されなければ、新しいマテリアライズドビューに対してはデフォルトのテーブルアクセスメソッドが選ばれます。
より詳しい情報は<a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLE-ACCESS-METHOD">default_table_access_method</a>を参照してください。
     </p></dd><dt><span class="term"><code class="literal">WITH ( <em class="replaceable"><code>storage_parameter</code></em> [= <em class="replaceable"><code>value</code></em>] [, ... ] )</code></span></dt><dd><p>
<!--
      This clause specifies optional storage parameters for the new
      materialized view; see
      <xref linkend="sql-createtable-storage-parameters"/> in the
      <xref linkend="sql-createtable"/> documentation for more
      information.  All parameters supported for <literal>CREATE
      TABLE</literal> are also supported for <literal>CREATE MATERIALIZED
      VIEW</literal>.
      See <xref linkend="sql-createtable"/> for more information.
-->
この句は、新しいマテリアライズドビューの格納パラメータ(省略可能)を指定します。
詳細については<a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>の文書の<a class="xref" href="sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS" title="格納パラメータ">格納パラメータ</a>を参照してください。
<code class="literal">CREATE TABLE</code>でサポートされるすべてのパラメータは<code class="literal">CREATE MATERIALIZED VIEW</code>でもサポートされます。
詳細については<a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>を参照してください。
     </p></dd><dt><span class="term"><code class="literal">TABLESPACE <em class="replaceable"><code>tablespace_name</code></em></code></span></dt><dd><p>
<!--
      The <replaceable class="parameter">tablespace_name</replaceable> is the name
      of the tablespace in which the new materialized view is to be created.
      If not specified, <xref linkend="guc-default-tablespace"/> is consulted.
-->
<em class="replaceable"><code>tablespace_name</code></em>はマテリアライズドビューが作成されるテーブル空間の名前です。
指定されていない場合は<a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLESPACE">default_tablespace</a>を参照します。
     </p></dd><dt><span class="term"><em class="replaceable"><code>query</code></em></span></dt><dd><p>
<!--
      A <link linkend="sql-select"><command>SELECT</command></link>, <link linkend="sql-table"><command>TABLE</command></link>,
      or <link linkend="sql-values"><command>VALUES</command></link> command.  This query will run within a
      security-restricted operation; in particular, calls to functions that
      themselves create temporary tables will fail.
-->
<a class="link" href="sql-select.html" title="SELECT"><code class="command">SELECT</code></a>、<a class="link" href="sql-select.html#SQL-TABLE" title="TABLEコマンド"><code class="command">TABLE</code></a>または<a class="link" href="sql-values.html" title="VALUES"><code class="command">VALUES</code></a>コマンドです。
この問い合わせはセキュリティ限定された操作の中で実行されます。
具体的には一時テーブルを作成する関数の呼び出しは失敗します。
     </p></dd><dt><span class="term"><code class="literal">WITH [ NO ] DATA</code></span></dt><dd><p>
<!--
      This clause specifies whether or not the materialized view should be
      populated at creation time.  If not, the materialized view will be
      flagged as unscannable and cannot be queried until <command>REFRESH
      MATERIALIZED VIEW</command> is used.
-->
この句は作成時にマテリアライズドビューにデータを投入するかどうかを指定します。
投入しない場合、マテリアライズドビューはスキャン不可という印が付き、<code class="command">REFRESH MATERIALIZED VIEW</code>が使用されるまで問い合わせることができません。
     </p></dd></dl></div></div><div class="refsect1" id="id-1.9.3.71.7"><h2>互換性</h2><!--
  <title>Compatibility</title>
--><p>
<!--
   <command>CREATE MATERIALIZED VIEW</command> is a
   <productname>PostgreSQL</productname> extension.
-->
<code class="command">CREATE MATERIALIZED VIEW</code>は<span class="productname">PostgreSQL</span>の拡張です。
  </p></div><div class="refsect1" id="id-1.9.3.71.8"><h2>関連項目</h2><!--
  <title>See Also</title>
--><span class="simplelist"><a class="xref" href="sql-altermaterializedview.html" title="ALTER MATERIALIZED VIEW"><span class="refentrytitle">ALTER MATERIALIZED VIEW</span></a>, <a class="xref" href="sql-createtableas.html" title="CREATE TABLE AS"><span class="refentrytitle">CREATE TABLE AS</span></a>, <a class="xref" href="sql-createview.html" title="CREATE VIEW"><span class="refentrytitle">CREATE VIEW</span></a>, <a class="xref" href="sql-dropmaterializedview.html" title="DROP MATERIALIZED VIEW"><span class="refentrytitle">DROP MATERIALIZED VIEW</span></a>, <a class="xref" href="sql-refreshmaterializedview.html" title="REFRESH MATERIALIZED VIEW"><span class="refentrytitle">REFRESH MATERIALIZED VIEW</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-createlanguage.html" title="CREATE LANGUAGE">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQLコマンド">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-createoperator.html" title="CREATE OPERATOR">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">CREATE LANGUAGE </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 16.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> CREATE OPERATOR</td></tr></table></div></body></html>