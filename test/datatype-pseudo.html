<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.21. 疑似データ型</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="datatype-pg-lsn.html" title="8.20. pg_lsn型" /><link rel="next" href="functions.html" title="第9章 関数と演算子" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="datatype.html" title="第8章 データ型">第8章 データ型</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 15.0 : datatype-pseudo.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="datatype-pg-lsn.html" title="8.20. pg_lsn型">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="datatype.html" title="第8章 データ型">上へ</a></td><td width="60%" align="center">8.21. 疑似データ型</td><td width="20%" align="right"> <a accesskey="n" href="functions.html" title="第9章 関数と演算子">次へ</a></td></tr></table><hr /></div><div class="sect1" id="DATATYPE-PSEUDO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.21. 疑似データ型</h2></div></div></div><span class="original">
   &lt;title&gt;Pseudo-Types&lt;/title&gt;
</span><a id="id-1.5.7.31.2" class="indexterm"></a><a id="id-1.5.7.31.3" class="indexterm"></a><a id="id-1.5.7.31.4" class="indexterm"></a><a id="id-1.5.7.31.5" class="indexterm"></a><a id="id-1.5.7.31.6" class="indexterm"></a><a id="id-1.5.7.31.7" class="indexterm"></a><a id="id-1.5.7.31.8" class="indexterm"></a><a id="id-1.5.7.31.9" class="indexterm"></a><a id="id-1.5.7.31.10" class="indexterm"></a><a id="id-1.5.7.31.11" class="indexterm"></a><a id="id-1.5.7.31.12" class="indexterm"></a><a id="id-1.5.7.31.13" class="indexterm"></a><a id="id-1.5.7.31.14" class="indexterm"></a><a id="id-1.5.7.31.15" class="indexterm"></a><a id="id-1.5.7.31.16" class="indexterm"></a><a id="id-1.5.7.31.17" class="indexterm"></a><a id="id-1.5.7.31.18" class="indexterm"></a><a id="id-1.5.7.31.19" class="indexterm"></a><a id="id-1.5.7.31.20" class="indexterm"></a><a id="id-1.5.7.31.21" class="indexterm"></a><a id="id-1.5.7.31.22" class="indexterm"></a><a id="id-1.5.7.31.23" class="indexterm"></a><a id="id-1.5.7.31.24" class="indexterm"></a><a id="id-1.5.7.31.25" class="indexterm"></a><a id="id-1.5.7.31.26" class="indexterm"></a><p>
<span class="original">
    The &lt;productname&gt;PostgreSQL&lt;/productname&gt; type system contains a
    number of special-purpose entries that are collectively called
    &lt;firstterm&gt;pseudo-types&lt;/firstterm&gt;.  A pseudo-type cannot be used as a
    column data type, but it can be used to declare a function's
    argument or result type.  Each of the available pseudo-types is
    useful in situations where a function's behavior does not
    correspond to simply taking or returning a value of a specific
    &lt;acronym&gt;SQL&lt;/acronym&gt; data type.  &lt;xref
    linkend="datatype-pseudotypes-table"/&gt; lists the existing
    pseudo-types.
</span>
<span class="productname">PostgreSQL</span>型システムには、<em class="firstterm">疑似データ型</em>と総称される特殊用途のエントリが多数含まれます。
疑似データ型は列データ型としては使用できませんが、関数の引数や結果データ型を宣言するために使用できます。
これらの使用可能な疑似データ型は、ある関数の振舞いが、特定の<acronym class="acronym">SQL</acronym>データ型の値を単に取得したり返したりする操作に対応していない場合に便利です。
<a class="xref" href="datatype-pseudo.html#DATATYPE-PSEUDOTYPES-TABLE" title="表8.27 疑似データ型">表 8.27</a>に既存の疑似データ型を列挙します。
   </p><div class="table" id="DATATYPE-PSEUDOTYPES-TABLE"><p class="title"><strong>表8.27 疑似データ型</strong></p><div class="table-contents"><span class="original">
     &lt;title&gt;Pseudo-Types&lt;/title&gt;
</span><table class="table" summary="疑似データ型" border="1"><colgroup><col class="col1" /><col class="col2" /></colgroup><thead><tr><th>型名</th><th>説明</th></tr></thead><tbody><tr><td><code class="type">any</code></td><td>関数がどのような入力データ型でも受け入れることを示します。</td></tr><tr><td><code class="type">anyelement</code></td><td>関数がどのような入力データ型でも受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>を参照)。</td></tr><tr><td><code class="type">anyarray</code></td><td>関数がどのような配列データ型でも受け入れることを示します（<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>を参照してください）。</td></tr><tr><td><code class="type">anynonarray</code></td><td>関数がどのような非配列データ型でも受け入れることを示します（<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>を参照してください）。</td></tr><tr><td><code class="type">anyenum</code></td><td>関数が何らかの列挙データ型を受け入れることを示します（<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>および<a class="xref" href="datatype-enum.html" title="8.7. 列挙型">8.7</a>を参照してください）。</td></tr><tr><td><code class="type">anyrange</code></td><td>関数が範囲データ型を受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a> と <a class="xref" href="rangetypes.html" title="8.17. 範囲型">8.17</a>を参照してください)。</td></tr><tr><td><code class="type">anymultirange</code></td><td>関数が多重範囲型を受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>と<a class="xref" href="rangetypes.html" title="8.17. 範囲型">8.17</a>を参照してください)。</td></tr><tr><td><code class="type">anycompatible</code></td><td>関数が複数の引数を一般的なマルチデータ型に自動的に昇格させるどのようなデータ型でも受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>)を参照してください)。</td></tr><tr><td><code class="type">anycompatiblearray</code></td><td>関数が複数の引数を一般的なデータ型に自動的に昇格させるどのような配列のデータ型でも受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>を参照してください)。</td></tr><tr><td><code class="type">anycompatiblenonarray</code></td><td>関数が複数の引数を一般的なデータ型に自動的に昇格させるどのような非配列のデータ型でも受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>を参照ください)。 </td></tr><tr><td><code class="type">anycompatiblerange</code></td><td>関数が複数の引数を一般的なデータ型に自動的に昇格させるどのような範囲データ型でも受け入れることを示します(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>と<a class="xref" href="rangetypes.html" title="8.17. 範囲型">8.17</a>を参照ください)。  </td></tr><tr><td><code class="type">anycompatiblemultirange</code></td><td>関数が複数の引数を一般的なデータ型に自動的に昇格するすべての多重範囲データ型を受け入れることを示します。(<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>と<a class="xref" href="rangetypes.html" title="8.17. 範囲型">8.17</a>を参照ください)。</td></tr><tr><td><code class="type">cstring</code></td><td>関数がヌル終端のC文字列を受け入れる、もしくは返すことを示します。</td></tr><tr><td><code class="type">internal</code></td><td>関数がサーバ内部用データ型を受け入れる、もしくは返すことを示します。
        </td></tr><tr><td><code class="type">language_handler</code></td><td>
手続き言語呼び出しハンドラは<code class="type">language_handler</code>を返すものとして宣言されます。
        </td></tr><tr><td><code class="type">fdw_handler</code></td><td>
外部データラッパハンドラは<code class="type">fdw_handler</code>を返すものとして宣言されます。
        </td></tr><tr><td><code class="type">table_am_handler</code></td><td>テーブルアクセスメソッドのハンドラは<code class="type">table_am_handler</code>を返すものとして宣言されます。</td></tr><tr><td><code class="type">index_am_handler</code></td><td>インデックスアクセスメソッドのハンドラは <code class="type">index_am_handler</code>を返すものとして宣言されます。</td></tr><tr><td><code class="type">tsm_handler</code></td><td>テーブルサンプリング方式のハンドラは<code class="type">tsm_handler</code>を返すものとして宣言されます。</td></tr><tr><td><code class="type">record</code></td><td>未指定の行型の引数を取る、あるいは返す関数を指定します。</td></tr><tr><td><code class="type">trigger</code></td><td>トリガ関数は<code class="type">trigger</code>を返すものとして宣言されます。
        </td></tr><tr><td><code class="type">event_trigger</code></td><td>イベントトリガ関数は<code class="type">event_trigger</code>を返すものとして宣言されます。</td></tr><tr><td><code class="type">pg_ddl_command</code></td><td>イベントトリガが使用できるDDLコマンドの表現を指定します。</td></tr><tr><td><code class="type">void</code></td><td>関数が値を返さないことを示します。
        </td></tr><tr><td><code class="type">unknown</code></td><td>未解決の型を特定します。例えば、修飾されていない文字列リテラルのような型です。</td></tr></tbody></table></div></div><br class="table-break" /><p>
<span class="original">
    Functions coded in C (whether built-in or dynamically loaded) can be
    declared to accept or return any of these pseudo-types.  It is up to
    the function author to ensure that the function will behave safely
    when a pseudo-type is used as an argument type.
</span>
C言語で作成された関数（それが組み込みか動的にロードされるかに関係なく）は、これらの疑似データ型のどれでも受け入れたり返したりするように宣言することができます。
引数型として疑似データ型が使用されても関数が安全に機能するように、関数の作成時に気を付ける必要があります。
   </p><p>
<span class="original">
    Functions coded in procedural languages can use pseudo-types only as
    allowed by their implementation languages.  At present most procedural
    languages forbid use of a pseudo-type as an argument type, and allow
    only &lt;type&gt;void&lt;/type&gt; and &lt;type&gt;record&lt;/type&gt; as a result type (plus
    &lt;type&gt;trigger&lt;/type&gt; or &lt;type&gt;event_trigger&lt;/type&gt; when the function is used
    as a trigger or event trigger).  Some also support polymorphic functions
    using the polymorphic pseudo-types, which are shown above and discussed
    in detail in &lt;xref linkend="extend-types-polymorphic"/&gt;.
</span>
手続き型言語で作成された関数では、実装する言語によって許可された疑似データ型のみを使用できます。
現在、ほとんどの手続き型言語では疑似データ型を引数型として使用することが原則として禁止されており、結果型としての<code class="type">void</code>と<code class="type">record</code>（および関数がトリガまたはイベントトリガとして使用される場合の<code class="type">trigger</code>または<code class="type">event_trigger</code>）のみが許可されています。
また、一部の関数は、多様な疑似型を使用する多様関数をサポートしています。
これについては、前述の<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多様型">38.2.5</a>で詳細に説明されています。
   </p><p>
<span class="original">
    The &lt;type&gt;internal&lt;/type&gt; pseudo-type is used to declare functions
    that are meant only to be called internally by the database
    system, and not by direct invocation in an &lt;acronym&gt;SQL&lt;/acronym&gt;
    query.  If a function has at least one &lt;type&gt;internal&lt;/type&gt;-type
    argument then it cannot be called from &lt;acronym&gt;SQL&lt;/acronym&gt;.  To
    preserve the type safety of this restriction it is important to
    follow this coding rule: do not create any function that is
    declared to return &lt;type&gt;internal&lt;/type&gt; unless it has at least one
    &lt;type&gt;internal&lt;/type&gt; argument.
</span>
<code class="type">internal</code>疑似データ型は、データベースシステムによって内部的にのみ呼び出される関数を宣言する場合に使用され、<acronym class="acronym">SQL</acronym>問い合わせでの直接呼び出しには使用できません。
関数に少なくとも1つの<code class="type">internal</code>型の引数があると、これを<acronym class="acronym">SQL</acronym>から呼び出すことはできません。
この制限の影響からデータ型の安全性を保持するためには、次のコーディング規則に従うことが重要です。
<code class="type">internal</code>引数が少なくとも1つある場合を除き、<code class="type">internal</code>を返すと宣言される関数を作成すべきではありません。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datatype-pg-lsn.html" title="8.20. pg_lsn型">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="datatype.html" title="第8章 データ型">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="functions.html" title="第9章 関数と演算子">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">8.20. <code class="type">pg_lsn</code>型 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 第9章 関数と演算子</td></tr></table></div></body></html>