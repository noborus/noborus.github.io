<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.5. リリース 14.1</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="release-14-2.html" title="E.4. リリース 14.2" /><link rel="next" href="release-14.html" title="E.6. リリース 14" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 14.5文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="release.html" title="付録E リリースノート">付録E リリースノート</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-14-2.html" title="E.4. リリース 14.2">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="60%" align="center">E.5. リリース 14.1</td><td width="20%" align="right"> <a accesskey="n" href="release-14.html" title="E.6. リリース 14">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RELEASE-14-1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.5. リリース 14.1</h2></div></div></div><!--
  <title>Release 14.1</title>
--><p><!--
  <title>Release date:</title>
--><strong>リリース日: </strong>2021-11-11</p><p>
<!--
   This release contains a variety of fixes from 14.0.
   For information about new features in major release 14, see
   <xref linkend="release-14"/>.
-->
このリリースは14.0に対し、様々な不具合を修正したものです。
14メジャーリリースにおける新機能については、<a class="xref" href="release-14.html" title="E.6. リリース 14">E.6</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.9.4"><div class="titlepage"><div><div><h3 class="title">E.5.1. バージョン14.1への移行</h3></div></div></div><!--
   <title>Migration to Version 14.1</title>
--><p>
<!--
    A dump/restore is not required for those running 14.X.
-->
14.Xからの移行ではダンプ/リストアは不要です。
   </p><p>
<!--
    However, note that installations using physical replication should
    update standby servers before the primary server, as explained in
    the third changelog entry below.
-->
しかしながら、以下の3番目の変更点で説明されているように、物理レプリケーションを使用するインストレーションではプライマリサーバの前にスタンバイサーバを更新する必要があることに注意してください。
   </p><p>
<!--
    Also, several bugs have been found that may have resulted in corrupted
    indexes, as explained in the next several changelog entries.  If any
    of those cases apply to you, it's recommended to reindex
    possibly-affected indexes after updating.
-->
また、次のいくつかの変更点で説明されているように、インデックスが破損する可能性があるいくつかのバグが見つかっています。
これらのケースに該当する場合は、アップデート後に影響を受けている可能性のあるインデックスの再作成をお勧めします。
   </p></div><div class="sect2" id="id-1.11.6.9.5"><div class="titlepage"><div><div><h3 class="title">E.5.2. 変更点</h3></div></div></div><!--
   <title>Changes</title>
--><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [28e241255] 2021-11-08 11:01:43 -0500
Branch: REL_14_STABLE [9d5a76b8d] 2021-11-08 11:01:43 -0500
Branch: REL_13_STABLE [e92ed93e8] 2021-11-08 11:01:43 -0500
Branch: REL_12_STABLE [d1bd26740] 2021-11-08 11:01:43 -0500
Branch: REL_11_STABLE [9394fb828] 2021-11-08 11:01:43 -0500
Branch: REL_10_STABLE [9ae0f1112] 2021-11-08 11:01:43 -0500
Branch: REL9_6_STABLE [046c2c846] 2021-11-08 11:01:43 -0500
--><p>
<!--
      Make the server reject extraneous data after an SSL or GSS
      encryption handshake (Tom Lane)
-->
PostgreSQLサーバがSSL暗号化またはGSS暗号化においてハンドシェイクが完了するまでは外来データを拒絶するようになりました。
(Tom Lane)
     </p><p>
<!--
      A man-in-the-middle with the ability to inject data into the TCP
      connection could stuff some cleartext data into the start of a
      supposedly encryption-protected database session.
      This could be abused to send faked SQL commands to the server,
      although that would only work if the server did not demand any
      authentication data.  (However, a server relying on SSL certificate
      authentication might well not do so.)
-->
これまでTCP接続にデータを挿入できる中間者は、暗号化で保護されているはずのデータベースセッションの冒頭に平文データを投入可能でした。
サーバが認証データを要求してこない場合（例えばSSL証明書認証のみを使っている場合）に限られますが、これを悪用して偽のSQLコマンドをサーバに送ることができました。
     </p><p>
<!--
      The <productname>PostgreSQL</productname> Project thanks
      Jacob Champion for reporting this problem.
      (CVE-2021-23214)
-->
<span class="productname">PostgreSQL</span>プロジェクトは本問題を報告してくれたJacob Championに感謝します。
(CVE-2021-23214)
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [160c02588] 2021-11-08 11:14:56 -0500
Branch: REL_14_STABLE [30547d791] 2021-11-08 11:14:56 -0500
Branch: REL_13_STABLE [844b31692] 2021-11-08 11:14:56 -0500
Branch: REL_12_STABLE [36bb95ef2] 2021-11-08 11:14:56 -0500
Branch: REL_11_STABLE [a021a1d2a] 2021-11-08 11:14:56 -0500
Branch: REL_10_STABLE [e65d9c8cd] 2021-11-08 11:14:56 -0500
Branch: REL9_6_STABLE [d83cdfdca] 2021-11-08 11:14:57 -0500
--><p>
<!--
      Make <application>libpq</application> reject extraneous data after
      an SSL or GSS encryption handshake (Tom Lane)
-->
<span class="application">libpq</span>がSSL暗号化またはGSS暗号化のハンドシェイクが完了する前は、外来データを拒絶するようになりました。
(Tom Lane)
     </p><p>
<!--
      A man-in-the-middle with the ability to inject data into the TCP
      connection could stuff some cleartext data into the start of a
      supposedly encryption-protected database session.
      This could probably be abused to inject faked responses to the
      client's first few queries, although other details of libpq's
      behavior make that harder than it sounds.  A different line of
      attack is to exfiltrate the client's password, or other sensitive
      data that might be sent early in the session.  That has been shown
      to be possible with a server vulnerable to CVE-2021-23214.
-->
これまでTCP接続にデータを挿入できる中間者は、暗号化で保護されているはずのデータベースセッションの冒頭に平文データを投入可能でした。
libpqの問い合わせ応答以外の細かい振る舞いのために実現は容易ではありませんが、これを悪用してクライアントの最初の問い合わせに偽の応答を挿入することがおそらく可能でした。
別の攻撃は、セッションの初期に送られたクライアントのパスワードやその他の機微データを抜き出すことです。
これはCVE-2021-23214のサーバ側脆弱性と組み合わせて可能となります。
(CVE-2021-23222)
     </p><p>
<!--
      The <productname>PostgreSQL</productname> Project thanks
      Jacob Champion for reporting this problem.
      (CVE-2021-23222)
-->
<span class="productname">PostgreSQL</span>プロジェクトは本問題を報告してくれたJacob Championに感謝します。
(CVE-2021-23222)
     </p></li><li class="listitem"><!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [ff9f111bc] 2021-09-29 11:21:51 -0300
Branch: REL_14_STABLE [64a8687a6] 2021-09-29 11:41:01 -0300
Branch: REL_13_STABLE [1d97d3d08] 2021-09-29 11:21:51 -0300
Branch: REL_12_STABLE [1df0a914d] 2021-09-29 11:21:51 -0300
Branch: REL_11_STABLE [cfedb279a] 2021-09-29 11:21:51 -0300
Branch: REL_10_STABLE [d9fe2cc7d] 2021-09-29 11:21:51 -0300
Branch: REL9_6_STABLE [148c6ee3b] 2021-09-29 11:21:51 -0300
Branch: master [d03bca4d7] 2021-09-30 10:01:03 -0300
Branch: REL_14_STABLE [e3731bac5] 2021-09-30 10:01:03 -0300
Branch: master [d186d233d] 2021-10-01 18:03:11 -0300
Branch: REL_14_STABLE [0ce67bce0] 2021-10-01 18:03:11 -0300
Branch: master [010e52337] 2021-10-13 18:49:27 -0300
Branch: REL_14_STABLE [79c7fe1af] 2021-10-13 18:49:27 -0300
Branch: REL_13_STABLE [2cdf97fd1] 2021-10-13 18:49:27 -0300
Branch: REL_12_STABLE [4b7abbe48] 2021-10-13 18:49:27 -0300
Branch: REL_11_STABLE [6287b8e19] 2021-10-13 18:49:27 -0300
Branch: REL_10_STABLE [41cce2326] 2021-10-13 18:49:27 -0300
Branch: REL9_6_STABLE [5ec87619b] 2021-10-13 18:49:27 -0300
Branch: REL_14_STABLE [494ec0037] 2021-11-01 13:07:23 -0300
Branch: REL_13_STABLE [17227825c] 2021-11-01 13:07:23 -0300
Branch: REL_12_STABLE [da782bc93] 2021-11-01 13:07:23 -0300
Branch: REL_11_STABLE [5ef210047] 2021-11-01 13:07:23 -0300
Branch: REL_10_STABLE [656312c2a] 2021-11-01 13:07:23 -0300
Branch: REL9_6_STABLE [99197701e] 2021-11-01 13:07:23 -0300
--><p>
<!--
      Fix physical replication for cases where the primary crashes
      after shipping a WAL segment that ends with a partial WAL record
      (&Aacute;lvaro Herrera)
-->
物理レプリケーションで、プライマリが部分的なWALレコードで終わっているWALセグメントを渡した後にクラッシュした場合について、修正されました。
(Álvaro Herrera)
     </p><p>
<!--
      If the primary did not survive long enough to finish writing the
      rest of the incomplete WAL record, then the previous crash-recovery
      logic had it back up and overwrite WAL starting from the beginning
      of the incomplete WAL record.  This is problematic since standby
      servers may already have copies of that WAL segment.  They will then
      see an inconsistent next segment, and will not be able to recover
      without manual intervention.  To fix, do not back up over a WAL
      segment boundary when restarting after a crash.  Instead write a new
      type of WAL record at the start of the next WAL segment, informing
      readers that the incomplete WAL record will never be finished and
      must be disregarded.
-->
ダウンするプライマリが不完全なWALレコードの残りを書き込み完了できなかった場合、以前のクラッシュリカバリロジックでは、それをバックアップして、不完全なWALレコードの最初からWALを上書きしました。
スタンバイサーバは既にそのWALセグメントのコピーを持っているかもしれないので、これは問題がありました。
不整合な次セグメントに遭遇して、手動の介入なしにはリカバリできないことになりました。
クラッシュ後の再起動時にWALセグメント境界を越えたバックアップをしないように修正されました。
その代わりに、次のWALセグメントの始めに新しいタイプのWALレコードを書いて、不完全なWALレコードは決して終了せず無視しなければならないことを知らせるようになりました。
     </p><p>
<!--
      When applying this update, it's best to update standby servers
      before the primary, so that they will be ready to handle this new
      WAL record type if the primary happens to crash.
-->
この修正を適用する場合、新しいWALレコードタイプが生じるようになるため、プライマリより先にスタンバイサーバをアップデートするのが良いです。
     </p></li><li class="listitem"><!--
Author: Peter Geoghegan <pg@bowt.ie>
Branch: master [9bacec15b] 2021-11-02 12:06:17 -0700
Branch: REL_14_STABLE [61a86ed55] 2021-11-02 12:06:16 -0700
--><p>
<!--
      Ensure that parallel <command>VACUUM</command> doesn't miss any
      indexes (Peter Geoghegan, Masahiko Sawada)
-->
並列<code class="command">VACUUM</code>がインデックスを取りこぼさないように修正されました。
(Peter Geoghegan, Masahiko Sawada)
     </p><p>
<!--
      A parallel <command>VACUUM</command> would fail to process indexes
      that are below the <varname>min_parallel_index_scan_size</varname>
      cutoff, if the table also has at least two indexes that are above
      that size.  This could result in those indexes becoming corrupt,
      since they'd still contain references to any heap entries removed by
      the <command>VACUUM</command>; subsequent queries using such indexes
      would be likely to return rows they shouldn't.
      This problem does not affect autovacuum, since it doesn't use
      parallel vacuuming.  However, it is advisable to reindex any
      manually-vacuumed tables that have the right mix of index sizes.
-->
テーブルが<code class="varname">min_parallel_index_scan_size</code>を上回る2つ以上のインデックスを持つ場合に、並列<code class="command">VACUUM</code>が<code class="varname">min_parallel_index_scan_size</code>を下回るインデックスを処理していませんでした。
この結果、これらのインデックスは<code class="command">VACUUM</code>で除去済みのヒープ上のエントリに対する参照を持つことになって、破損した状態となる可能性があります。
この問題は並列VACUUMを行わないautovacuumには影響しません。
適切なインデックスサイズの組み合わせを持つ手動VACUUMを行ったことがあるテーブルについて、REINDEXを行うことが推奨されます。
     </p></li><li class="listitem"><!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [3cd9c3b92] 2021-10-23 18:36:38 -0700
Branch: REL_14_STABLE [a5b9a0000] 2021-10-23 18:36:42 -0700
Branch: REL_13_STABLE [a9d0a5409] 2021-10-23 18:36:42 -0700
Branch: REL_12_STABLE [fe5d44a1d] 2021-10-23 18:36:42 -0700
Branch: REL_11_STABLE [df6158139] 2021-10-23 18:36:43 -0700
Branch: REL_10_STABLE [560124a37] 2021-10-23 18:36:43 -0700
Branch: REL9_6_STABLE [518493243] 2021-10-23 18:36:43 -0700
--><p>
<!--
      Fix <command>CREATE INDEX CONCURRENTLY</command> to wait for
      the latest prepared transactions (Andrey Borodin)
-->
<code class="command">CREATE INDEX CONCURRENTLY</code>が直近の準備されたトランザクションを待つように修正されました。
(Andrey Borodin)
     </p><p>
<!--
      Rows inserted by just-prepared transactions might be omitted from
      the new index, causing queries relying on the index to miss such
      rows.  The previous fix for this type of problem failed to account
      for <command>PREPARE TRANSACTION</command> commands that were still
      in progress when <command>CREATE INDEX CONCURRENTLY</command>
      checked for them.  As before, in installations that have enabled
      prepared transactions (<varname>max_prepared_transactions</varname>
      &gt; 0), it's recommended to reindex any concurrently-built indexes
      in case this problem occurred when they were built.
-->
準備されたトランザクションから直近に挿入された行が、新たなインデックスから無視されるかもしれませんでした。その結果、インデックスに依存する問い合わせが、その行を取りこぼすおそれがありました。
この問題に対する以前の修正は、<code class="command">CREATE INDEX CONCURRENTLY</code>が検査したときに進行中の<code class="command">PREPARE TRANSACTION</code>コマンドを考慮できていませんでした。
<code class="varname">max_prepared_transactions</code>&gt;0の準備されたトランザクション（二相コミット）が有効なサーバでは、CONCURRENTLY指定で作成されたインデックスを全てREINDEXすることが推奨されます。
     </p></li><li class="listitem"><!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [fdd965d07] 2021-10-23 18:36:38 -0700
Branch: REL_14_STABLE [dde966efb] 2021-10-23 18:36:42 -0700
Branch: REL_13_STABLE [2e33b4359] 2021-10-23 18:36:42 -0700
Branch: REL_12_STABLE [0869e53d3] 2021-10-23 18:36:42 -0700
Branch: REL_11_STABLE [5141e471b] 2021-10-23 18:36:43 -0700
Branch: REL_10_STABLE [db86746fd] 2021-10-23 18:36:43 -0700
Branch: REL9_6_STABLE [e428699cb] 2021-10-23 18:36:43 -0700
--><p>
<!--
      Avoid race condition that can cause backends to fail to add entries
      for new rows to an index being built concurrently (Noah Misch,
      Andrey Borodin)
-->
同時作成をしているインデックスで、新たな行に対するエントリ追加の失敗を引き起こす可能性のある競合状態が回避されました。
(Noah Misch, Andrey Borodin)
     </p><p>
<!--
      While it's apparently rare in the field, this case could potentially
      affect any index built or reindexed with
      the <literal>CONCURRENTLY</literal> option.  It is recommended to
      reindex any such indexes to make sure they are correct.
-->
これにより破損したインデックスが生じる可能性があります。
実際には稀にしか発生しないとみられますが、この誤りは潜在的に<code class="literal">CONCURRENTLY</code>指定を付けたあらゆるインデックス構築または再構築に影響する可能性があります。
同時作成したインデックスの全てをREINDEXすることが推奨されます。
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [add5cf28d] 2021-11-01 11:38:23 +0900
Branch: REL_14_STABLE [f255de9a4] 2021-11-01 11:40:22 +0900
Branch: REL_13_STABLE [77f7909a4] 2021-11-01 11:40:29 +0900
--><p>
<!--
      Fix <command>REINDEX CONCURRENTLY</command> to preserve operator
      class parameters that were attached to the target index
      (Michael Paquier)
-->
対象インデックスに付加された演算子クラスのパラメータを維持するように<code class="command">REINDEX CONCURRENTLY</code>が修正されました。
(Michael Paquier)
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [98ec35b0b] 2021-10-21 10:39:01 +0900
Branch: REL_14_STABLE [5040c9641] 2021-10-21 10:39:07 +0900
--><p>
<!--
      Fix incorrect creation of shared dependencies when cloning a
      database that contains non-builtin objects (Aleksander Alekseev)
-->
組込オブジェクト以外を含んだデータベースを複製するときの共有依存関係の誤作成が修正されました。
(Aleksander Alekseev)
     </p><p>
<!--
      The effects of this error are probably limited in practice.  In
      principle, it could allow a role to be dropped while it still owns
      objects; but most installations would never want to drop a role
      that had been used for objects they'd added
      to <literal>template1</literal>.
-->
このエラーの影響は、おそらく実際には限定的です。
原理的には、ロールがまだオブジェクトを所有している間、ロールを削除することができます。
しかし、ほとんどのインストレーションでは、<code class="literal">template1</code>に追加したオブジェクトに使用されていたロールを削除することはないでしょう。
     </p></li><li class="listitem"><!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [d6f1e16c8] 2021-10-18 19:08:25 -0300
Branch: REL_14_STABLE [72d064217] 2021-10-18 19:08:25 -0300
Branch: REL_13_STABLE [fe35528a5] 2021-10-18 19:08:25 -0300
Branch: REL_12_STABLE [8b26be8a3] 2021-10-18 19:08:25 -0300
Branch: REL_11_STABLE [b703b7d31] 2021-10-18 19:08:25 -0300
Branch: REL_10_STABLE [d36bdc4e9] 2021-10-18 19:08:25 -0300
--><p>
<!--
      Ensure that the relation cache is invalidated for a table being
      attached to or detached from a partitioned table (Amit Langote,
      &Aacute;lvaro Herrera)
-->
パーティションテーブルにアタッチあるいはデタッチしているテーブルについて、リレーションキャッシュが確実に無効化されるようになりました。
(Amit Langote, Álvaro Herrera)
     </p><p>
<!--
      This oversight could allow misbehavior of subsequent inserts/updates
      addressed directly to the partition, but only in currently-existing
      sessions.
-->
本障害により、アタッチ/デタッチの後に既存のセッションからそのパーティションに対する直接の挿入/更新を行ったときに、アタッチ/デタッチ操作がリレーションキャッシュに反映されていないことによる、不適切な制約の適用等の誤動作を起こす可能性がありました。
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [5b0e7fe1d] 2021-10-13 16:38:07 +0900
Branch: REL_14_STABLE [922e15c47] 2021-10-13 16:38:15 +0900
--><p>
<!--
      Fix corruption of parse tree while creating a range type (Alex
      Kozhemyakin, Sergey Shinderuk)
-->
範囲型の作成時にパースツリーが破損する障害が、修正されました。
(Alex Kozhemyakin, Sergey Shinderuk)
     </p><p>
<!--
      <command>CREATE TYPE</command> incorrectly freed an element of the
      parse tree, which could cause problems for a later event trigger, or
      if the <command>CREATE TYPE</command> command was stored in the plan
      cache and used again later.
-->
<code class="command">CREATE TYPE</code>がパースツリーの要素を誤って解放していて、続くイベントトリガや<code class="command">CREATE TYPE</code>コマンドがプランキャッシュに格納されて後に再使用される場合に、（クラッシュや予期せぬエラー等の）問題が起きる可能性がありました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3e310d837] 2021-10-19 13:54:45 -0400
Branch: REL_14_STABLE [04dae19f4] 2021-10-19 13:54:45 -0400
Branch: REL_13_STABLE [30e61a8cd] 2021-10-19 13:54:46 -0400
Branch: REL_12_STABLE [ae7b1dd59] 2021-10-19 13:54:46 -0400
Branch: REL_11_STABLE [0d08c279b] 2021-10-19 13:54:46 -0400
--><p>
<!--
      Fix updates of element fields in arrays of domain over composite
      (Tom Lane)
-->
複合型のドメインの配列の要素の更新について修正されました。
(Tom Lane)
     </p><p>
<!--
      A command such as <literal>UPDATE tab SET fld[1].subfld =
      val</literal> failed if the array's elements were domains rather
      than plain composites.
-->
<code class="literal">UPDATE tab SET fld[1].subfld = val</code>のようなコマンドが、配列要素が複合型ではなく複合型のドメインである場合に失敗して、クラッシュや誤った更新結果を引き起こしました。
     </p></li><li class="listitem"><!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [c6bc655ee] 2021-10-01 18:29:18 -0300
Branch: REL_14_STABLE [20047609d] 2021-10-01 18:29:18 -0300
Branch: REL_13_STABLE [170206e45] 2021-10-01 18:29:18 -0300
--><p>
<!--
      Disallow the combination of <literal>FETCH FIRST WITH TIES</literal>
      and <literal>FOR UPDATE SKIP LOCKED</literal> (David Christensen)
-->
<code class="literal">FETCH FIRST WITH TIES</code>と<code class="literal">FOR UPDATE SKIP LOCKED</code>の組み合わせが禁止されました。
(David Christensen)
     </p><p>
<!--
      <literal>FETCH FIRST WITH TIES</literal> necessarily fetches one
      more row than requested, since it cannot stop until it finds a row
      that is not a tie.  In our current implementation,
      if <literal>FOR UPDATE</literal> is used then that row will also get
      locked even though it is not returned.  That results in undesirable
      behavior if the <literal>SKIP LOCKED</literal> option is specified.
      It's difficult to change this without introducing a different set of
      undesirable behaviors, so for now, forbid the combination.
-->
<code class="literal">FETCH FIRST WITH TIES</code>は同順位でない行を見つけるまで停止しないため、返すべき行数に加えてもう1行を取り出す必要があります。
また、現在の実装では<code class="literal">FOR UPDATE</code>が使われた場合は返さない行についてもロックを取得します。
その結果、<code class="literal">SKIP LOCKED</code>オプションが指定された場合に望ましくない振る舞いが生じました。
別の一連の望ましくない動作を導入せずにこれを変更することは難しいため、当面の対処として、この組み合わせが禁止されました。
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [fdd885714] 2021-10-19 11:03:52 +0900
Branch: REL_14_STABLE [b1b797ec7] 2021-10-19 11:04:00 +0900
Branch: REL_13_STABLE [85dc4292a] 2021-10-19 11:04:04 +0900
--><p>
<!--
      Disallow <literal>ALTER INDEX index ALTER COLUMN col SET
      (options)</literal> (Nathan Bossart, Michael Paquier)
-->
<code class="literal">ALTER INDEX index ALTER COLUMN col SET (options)</code>でのオプション指定が禁止されました。
(Nathan Bossart, Michael Paquier)
     </p><p>
<!--
      While the parser accepted this, it's undocumented and doesn't
      actually work.
-->
パーサはこれを受け入れていましたが、文書記載がなく、実際には機能しませんでした。
     </p></li><li class="listitem"><!--
Author: Dean Rasheed <dean.a.rasheed@gmail.com>
Branch: master [e54a758d2] 2021-10-06 13:16:51 +0100
Branch: REL_14_STABLE [8e26b868d] 2021-10-06 13:19:25 +0100
Branch: REL_13_STABLE [9ab94ccb1] 2021-10-06 13:20:23 +0100
Branch: REL_12_STABLE [676218034] 2021-10-06 13:21:27 +0100
Branch: REL_11_STABLE [b2a0f1673] 2021-10-06 13:22:33 +0100
Branch: REL_10_STABLE [4853baaac] 2021-10-06 13:23:13 +0100
Branch: REL9_6_STABLE [0de8f9bc8] 2021-10-06 13:24:22 +0100
--><p>
<!--
      Fix corner-case loss of precision in
      numeric <function>power()</function> (Dean Rasheed)
-->
numeric型の<code class="function">power()</code>関数で稀な場合の精度損失が修正されました。
(Dean Rasheed)
     </p><p>
<!--
      The result could be inaccurate when the first argument is very close
      to 1.
-->
第一引数が1に非常に近い場合に不正確な結果が生じる可能性がありました。
     </p></li><li class="listitem"><!--
Author: David Rowley <drowley@postgresql.org>
Branch: master [39a310567] 2021-11-08 14:40:33 +1300
Branch: REL_14_STABLE [1f194ed6c] 2021-11-08 14:41:13 +1300
--><p>
<!--
      Avoid choosing the wrong hash equality operator for Memoize plans
      (David Rowley)
-->
Memoizeプランでハッシュ等価演算子の誤選択が回避されました。
(David Rowley)
     </p><p>
<!--
      This error could result in crashes or incorrect query results.
-->
本障害により、クラッシュまたは誤った問い合わせ結果が生じるおそれがありました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4d5f651f1] 2021-10-14 12:43:55 -0400
Branch: REL_14_STABLE [fd059ac2e] 2021-10-14 12:43:43 -0400
Branch: REL_13_STABLE [fdd6a4d8d] 2021-10-14 12:43:43 -0400
--><p>
<!--
      Fix planner error with pulling up subquery expressions into function
      rangetable entries (Tom Lane)
-->
副問い合わせの式を関数にプルアップする際のプランナエラーが修正されました。
(Tom Lane)
     </p><p>
<!--
      If a function in <literal>FROM</literal> laterally references the
      output of some sub-<literal>SELECT</literal> earlier in
      the <literal>FROM</literal> clause, and we are able to flatten that
      sub-<literal>SELECT</literal> into the outer query, the
      expression(s) copied into the function expression were not fully
      processed.  This could lead to crashes at execution.
-->
<code class="literal">FROM</code>にある関数が<code class="literal">FROM</code>句のsub-<code class="literal">SELECT</code>の出力をラテラル参照する場合で、sub-<code class="literal">SELECT</code>を外側の問い合わせに平坦化が可能である場合、関数の式へコピーされた式は完全には処理されませんでした。
その結果、プランの実行時にクラッシュを引き起こすおそれがありました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8c1144ba7] 2021-10-01 14:59:35 -0400
Branch: REL_14_STABLE [a54509bfd] 2021-10-01 14:59:35 -0400
Branch: REL_13_STABLE [7adbe186f] 2021-10-01 14:59:35 -0400
Branch: REL_12_STABLE [334fb8c3d] 2021-10-01 14:59:35 -0400
Branch: REL_11_STABLE [5863d348a] 2021-10-01 14:59:35 -0400
Branch: REL_10_STABLE [f951ea3a2] 2021-10-01 14:59:35 -0400
--><p>
<!--
      Avoid using MCV-only statistics to estimate the range of a column
      (Tom Lane)
-->
列の範囲の見積に不完全なMCVのみのプランナ統計情報を信用して使わないように修正されました。
(Tom Lane)
     </p><p>
<!--
      There are corner cases in which <command>ANALYZE</command> will
      build a most-common-values (MCV) list but not a histogram, even
      though the MCV list does not account for all the observed values.
      In such cases, keep the planner from using the MCV list alone to
      estimate the range of column values.
-->
<code class="command">ANALYZE</code>で稀にMCV（most-common-values、最頻値）リストが作られてヒストグラムは作られないことがあります。
このような場合、MCVリストのみでデータ全体をあらわせそうな場合に限って、MCVリストのみで列値の範囲を見積をするようになりました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [7b5d4c29e] 2021-10-01 11:10:12 -0400
Branch: REL_14_STABLE [e6adaa179] 2021-10-01 11:10:12 -0400
Branch: REL_13_STABLE [04ef2021e] 2021-10-01 11:10:12 -0400
Branch: REL_12_STABLE [cded2c460] 2021-10-01 11:10:12 -0400
Branch: REL_11_STABLE [5abbda985] 2021-10-01 11:10:12 -0400
--><p>
<!--
      Fix restoration of a Portal's snapshot inside a subtransaction
      (Bertrand Drouvot)
-->
サブトランザクション内でのポータルのスナップショット復旧について修正されました。
(Bertrand Drouvot)
     </p><p>
<!--
      If a procedure commits or rolls back a transaction, and then its
      next significant action is inside a new subtransaction, snapshot
      management went wrong, leading to a dangling pointer and probable
      crash.  A typical example in PL/pgSQL is a <literal>COMMIT</literal>
      immediately followed by a <literal>BEGIN ... EXCEPTION</literal>
      block that performs a query.
-->
プロシージャがあるトランザクションをコミットやロールバックして、その次の明示的な動作が新たなサブトランザクション内である場合にスナップショット管理を誤っていました。
その結果、不正なポインタが生じて、クラッシュを引き起こす可能性がありました。
PL/pgSQLにおける典型的な例は、クエリを実行する<code class="literal">BEGIN ... EXCEPTION</code>ブロックの直後にある<code class="literal">COMMIT</code>です。
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [409f9ca44] 2021-10-18 11:55:42 +0900
Branch: REL_14_STABLE [5b353aaff] 2021-10-18 11:56:48 +0900
Branch: REL_13_STABLE [8f4fe8d7f] 2021-10-18 11:56:52 +0900
Branch: REL_12_STABLE [a207b8521] 2021-10-18 11:56:54 +0900
Branch: REL_11_STABLE [506aa1f71] 2021-10-18 11:56:57 +0900
Branch: REL_10_STABLE [d1a6a08df] 2021-10-18 11:57:02 +0900
Branch: REL9_6_STABLE [f49bf8263] 2021-10-18 11:57:07 +0900
--><p>
<!--
      Clean up correctly if a transaction fails after exporting its
      snapshot (Dilip Kumar)
-->
スナップショットのエクスポート後にトランザクションが失敗した場合に、正しくクリーンアップするようになりました。
(Dilip Kumar)
     </p><p>
<!--
      This oversight would only cause a problem if the same session
      attempted to export a snapshot again.  The most likely scenario for
      that is creation of a replication slot (followed by rollback)
      and then creation of another replication slot.
-->
この誤りは、同じセッションがスナップショットを再びエクスポートしようとした場合に限って問題を引き起こします。
ありそうな該当シナリオは、レプリケーションスロットを作成（その後ロールバック）、そして別のレプリケーションスロットを作成しようとすることです。
     </p></li><li class="listitem"><!--
Author: Alexander Korotkov <akorotkov@postgresql.org>
Branch: master [05e6e78c1] 2021-11-06 19:13:58 +0300
Branch: REL_14_STABLE [b0f6bd48f] 2021-11-06 19:13:53 +0300
Branch: REL_13_STABLE [e1fee28a0] 2021-11-06 18:34:19 +0300
Branch: REL_12_STABLE [8f779a1a3] 2021-11-06 18:34:21 +0300
Branch: REL_11_STABLE [691c0df73] 2021-11-06 18:34:23 +0300
Branch: REL_10_STABLE [774d00573] 2021-11-06 18:34:26 +0300
Branch: REL9_6_STABLE [7381b79ad] 2021-11-06 18:34:31 +0300
--><p>
<!--
      Prevent wraparound of overflowed-subtransaction tracking on standby
      servers (Kyotaro Horiguchi, Alexander Korotkov)
-->
スタンバイサーバでオーバーフローしたサブトランザクション追跡の周回を防止しました。
(Kyotaro Horiguchi, Alexander Korotkov)
     </p><p>
<!--
      This oversight could cause significant performance degradation
      (manifesting as excessive SubtransSLRU traffic) on standby servers.
-->
この誤りにより、スタンバイサーバで顕著な性能低下をもたらすおそれがあります。
該当した場合、SubtransSLRUについての過大な処理量がはっきり現れました。
     </p></li><li class="listitem"><!--
Author: Michael Paquier <michael@paquier.xyz>
Branch: master [8a4237908] 2021-10-04 14:05:20 +0900
Branch: REL_14_STABLE [828f7f000] 2021-10-04 14:05:48 +0900
Branch: REL_13_STABLE [194e535a0] 2021-10-04 14:05:52 +0900
Branch: REL_12_STABLE [3c3f118d5] 2021-10-04 14:05:55 +0900
Branch: REL_11_STABLE [0a561d4d0] 2021-10-04 14:05:59 +0900
Branch: REL_10_STABLE [8a6a1fe07] 2021-10-04 14:06:03 +0900
Branch: REL9_6_STABLE [e2b2a9e1c] 2021-10-04 14:06:09 +0900
--><p>
<!--
      Ensure that prepared transactions are properly accounted for during
      promotion of a standby server (Michael Paquier, Andres Freund)
-->
スタンバイサーバの昇格中に、（二相コミット機能の）準備されたトランザクションが適切に考慮されるようになりました。
(Michael Paquier, Andres Freund)
     </p><p>
<!--
      There was a narrow window where a prepared transaction could be
      omitted from a snapshot taken by a concurrently-running session.
      If that session then used the snapshot to perform data updates,
      erroneous results or data corruption could occur.
-->
同時実行中のセッションが取得したスナップショットで、準備されたトランザクションが省略される可能性がある限られた時間帯がありました。
その後、そのセッションがスナップショットを使用してデータを更新すると、誤った結果やデータの破損が発生する可能性がありました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [39ae0ef85] 2021-10-11 11:56:52 -0400
Branch: REL_14_STABLE [2c25db32e] 2021-10-11 11:56:52 -0400
--><p>
<!--
      Fix <quote>could not find RecursiveUnion</quote> error
      when <command>EXPLAIN</command> tries to print a filter condition
      attached to a WorkTableScan node (Tom Lane)
-->
<code class="command">EXPLAIN</code>がWorkTableScanノードにアタッチされたフィルタ条件を表示しようとした時に発生する<span class="quote">「<span class="quote">could not find RecursiveUnion</span>」</span>エラーが修正されました。
(Tom Lane)
     </p></li><li class="listitem"><!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [c2c618ff1] 2021-10-19 19:08:45 -0300
Branch: REL_14_STABLE [3ce3fb2f7] 2021-10-19 19:08:45 -0300
Branch: REL_13_STABLE [842fe6123] 2021-10-19 19:08:45 -0300
Branch: REL_12_STABLE [6c8d1c197] 2021-10-19 19:08:45 -0300
Branch: master [cd124d205] 2021-10-20 13:05:42 -0300
Branch: REL_14_STABLE [718278855] 2021-10-20 13:05:42 -0300
Branch: REL_13_STABLE [a73a3671d] 2021-10-20 13:05:42 -0300
Branch: REL_12_STABLE [3c8c49945] 2021-10-20 13:05:42 -0300
--><p>
<!--
      Ensure that the correct lock level is used when renaming a table
      (Nathan Bossart, &Aacute;lvaro Herrera)
-->
<code class="command">ALTER INDEX</code>コマンドを使ってテーブルの名前を変更する際に、正しいロックレベルを使用するように修正されました。
(Nathan Bossart, Álvaro Herrera)
     </p><p>
<!--
      For historical reasons, <command>ALTER INDEX ... RENAME</command>
      can be applied to any sort of relation.  The lock level required to
      rename an index is lower than that required to rename a table or
      other kind of relation, but the code got this wrong and would use
      the weaker lock level whenever the command is spelled <command>ALTER
      INDEX</command>.
-->
歴史的な理由から、<code class="command">ALTER INDEX ... RENAME</code>はあらゆる種類のリレーションに適用できます。
インデックス名を変更するのに必要なロックレベルは、テーブル等その他のリレーション名を変更する場合より低いのですが、<code class="command">ALTER INDEX</code>を使った場合には対象がインデックス以外であっても、誤って低いロックレベルが使用されていました。
     </p></li><li class="listitem"><!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [d74b54b3d] 2021-11-05 12:29:35 -0300
Branch: REL_14_STABLE [02e20bb2d] 2021-11-05 12:29:35 -0300
Branch: REL_13_STABLE [bf5cdcfd5] 2021-11-05 12:29:34 -0300
Branch: REL_12_STABLE [3eff168a2] 2021-11-05 12:29:34 -0300
Branch: REL_11_STABLE [92224e470] 2021-11-05 12:29:34 -0300
Branch: REL_10_STABLE [58b600f64] 2021-11-05 12:29:34 -0300
Branch: REL9_6_STABLE [e0eaeafd6] 2021-11-05 12:29:35 -0300
--><p>
<!--
      Avoid null-pointer-dereference crash when dropping a role that owns
      objects being dropped concurrently (&Aacute;lvaro Herrera)
-->
オブジェクトとそのオブジェクトを所有するロールが並行して同時に削除された場合にnull-pointer-dereferenceによるクラッシュが発生することがあり、回避されました。
(Álvaro Herrera)
     </p></li><li class="listitem"><!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [6b1b405eb] 2021-11-03 10:52:38 +0200
Branch: REL_14_STABLE [4ebd740cd] 2021-11-03 10:54:33 +0200
Branch: REL_13_STABLE [07070c008] 2021-11-03 10:54:36 +0200
Branch: REL_12_STABLE [11a399f9c] 2021-11-03 10:54:39 +0200
Branch: REL_11_STABLE [6bf00da11] 2021-11-03 10:54:42 +0200
Branch: REL_10_STABLE [7b55bb892] 2021-11-03 11:09:08 +0200
Branch: REL9_6_STABLE [8f32afee0] 2021-11-03 11:15:02 +0200
Branch: master [d5ab0681b] 2021-11-03 19:38:17 +0200
Branch: REL_14_STABLE [f4e3b6271] 2021-11-03 19:41:35 +0200
Branch: REL_13_STABLE [b7299b664] 2021-11-03 19:41:38 +0200
Branch: REL_12_STABLE [7dc9a310e] 2021-11-03 19:41:41 +0200
Branch: REL_11_STABLE [b110af5f7] 2021-11-03 19:41:44 +0200
Branch: REL_10_STABLE [245799d39] 2021-11-03 19:41:46 +0200
Branch: REL9_6_STABLE [71aeaf245] 2021-11-03 19:41:49 +0200
--><p>
<!--
      Prevent <quote>snapshot reference leak</quote> warning
      when <function>lo_export()</function> or a related function fails
      (Heikki Linnakangas)
-->
<code class="function">lo_export()</code>または関連する関数が失敗した場合の<span class="quote">「<span class="quote">snapshot reference leak</span>」</span>警告が防止されました。
(Heikki Linnakangas)
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [01fc65270] 2021-11-02 13:36:47 -0400
Branch: REL_14_STABLE [16a56774f] 2021-11-02 13:36:53 -0400
Branch: REL_13_STABLE [ada667b45] 2021-11-02 13:36:57 -0400
--><p>
<!--
      Fix inefficient code generation for CoerceToDomain expression nodes
      (Ranier Vilela)
-->
CoerceToDomain式ノードの非効率なコード生成が修正されました。
(Ranier Vilela)
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6301c3ada] 2021-10-31 15:31:29 -0400
Branch: REL_14_STABLE [8424dfced] 2021-10-31 15:31:38 -0400
Branch: REL_13_STABLE [df238aed1] 2021-10-31 15:31:44 -0400
Branch: master [e9d9ba2a4] 2021-11-01 16:24:39 -0400
Branch: REL_14_STABLE [ad87bf355] 2021-11-01 16:24:40 -0400
Branch: REL_13_STABLE [e477642a1] 2021-11-01 16:24:40 -0400
Branch: master [65c6cab13] 2021-11-02 11:31:54 -0400
Branch: REL_14_STABLE [08cfa5981] 2021-11-02 11:31:54 -0400
Branch: REL_13_STABLE [0151af40c] 2021-11-02 11:31:54 -0400
--><p>
<!--
      Avoid O(N^2) behavior in some list-manipulation operations
      (Nathan Bossart, Tom Lane)
-->
いくつかのリスト操作でO(N^2)の動作が回避されるようになりました。
(Nathan Bossart, Tom Lane)
     </p><p>
<!--
      These changes fix slow processing in several scenarios, including:
      when a standby replays a transaction that held many exclusive locks
      on the primary; when many files are due to be unlinked after a
      checkpoint; when hash aggregation involves many batches; and when
      <filename>pg_trgm</filename> extracts indexable conditions from a
      complex regular expression.  Only the first of these scenarios has
      actually been reported from the field, but they all seem like
      plausible consequences of inefficient list deletions.
-->
これにより、プライマリ上で多数の排他ロックを保持しているトランザクションをスタンバイでリプレイする場合、チェックポイント後に削除(unlink)されることになっているファイルが多数ある場合、ハッシュ集約に多くのバッチ(ディスク書き出し)が含まれる場合、<code class="filename">pg_trgm</code>が複雑な正規表現からインデックス可能な条件を抽出する場合を含むいくつかのシナリオで処理速度低下が修正されました。
これらのうち、実際にユーザから報告されたのは1番目の項目だけですが、それ以外も非効率なリスト削除により該当すると見られます。
     </p></li><li class="listitem"><!--
Author: Peter Geoghegan <pg@bowt.ie>
Branch: master [a5213adf3] 2021-10-27 12:10:47 -0700
Branch: REL_14_STABLE [d078fe83d] 2021-10-27 12:10:45 -0700
Branch: REL_13_STABLE [f8cce4a3d] 2021-10-27 12:10:43 -0700
Branch: master [c2381b510] 2021-10-27 13:09:24 -0700
Branch: REL_14_STABLE [6cac34339] 2021-10-27 13:09:01 -0700
Branch: REL_13_STABLE [d5a2ffbce] 2021-10-27 13:09:00 -0700
--><p>
<!--
      Add more defensive checks around B-tree posting list splits
      (Peter Geoghegan)
-->
B-treeのポスティングリスト分割に関するより防御的な検査が追加されました。
(Peter Geoghegan)
     </p><p>
<!--
      This change should help detect index corruption involving duplicate
      table TIDs.
-->
この変更により、テーブルのTIDの重複を含むインデックスの破損を検出できるようになります。
     </p></li><li class="listitem"><!--
Author: Tomas Vondra <tomas.vondra@postgresql.org>
Branch: master [d91353f4b] 2021-11-06 01:50:44 +0100
Branch: REL_14_STABLE [f7829feb7] 2021-11-06 01:53:36 +0100
--><p>
<!--
      Avoid assertion failure when inserting NaN into a BRIN
      float8 or float4 minmax_multi_ops index (Tomas Vondra)
-->
BRINのfloat8またはfloat4のminmax_multi_opsインデックスにNaNを挿入する時のアサート失敗が回避されました。
(Tomas Vondra)
     </p><p>
<!--
      In production builds, such cases would result in a somewhat
      inefficient, but not actually incorrect, index.
-->
実運用むけビルドにおいては、このような場合、いくらか非効率的ですが間違ってはいないインデックスになります。
     </p></li><li class="listitem"><!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [e3e29cec1] 2021-10-12 09:50:17 +0900
Branch: REL_14_STABLE [62e821ad2] 2021-10-12 09:51:17 +0900
--><p>
<!--
      Allow the autovacuum launcher process to respond
      to <function>pg_log_backend_memory_contexts()</function> requests
      more quickly (Koyu Tanigawa)
-->
自動VACUUMのランチャープロセスが<code class="function">pg_log_backend_memory_contexts()</code>の要求に対してより迅速に応答できるようになりました。
(Koyu Tanigawa)
     </p></li><li class="listitem"><!--
Author: Daniel Gustafsson <dgustafsson@postgresql.org>
Branch: master [0ded7039f] 2021-10-01 22:47:05 +0200
Branch: REL_14_STABLE [a5e83ad79] 2021-10-01 22:47:05 +0200
--><p>
<!--
      Fix memory leak in HMAC hash calculations (Sergey Shinderuk)
-->
HMACハッシュ計算におけるメモリリークが修正されました。
(Sergey Shinderuk)
     </p></li><li class="listitem"><!--
Author: Thomas Munro <tmunro@postgresql.org>
Branch: master [8781b0ce2] 2021-10-26 12:54:55 +1300
Branch: REL_14_STABLE [181361a0c] 2021-10-26 13:09:00 +1300
Branch: REL_13_STABLE [24b7cf8a5] 2021-10-26 13:04:40 +1300
Branch: REL_12_STABLE [8fef901e3] 2021-10-26 13:01:52 +1300
--><p>
<!--
      Disallow setting <varname>huge_pages</varname>
      to <literal>on</literal> when <varname>shared_memory_type</varname>
      is <literal>sysv</literal> (Thomas Munro)
-->
<code class="varname">shared_memory_type</code>が<code class="literal">sysv</code>の場合、<code class="varname">huge_pages</code>を<code class="literal">on</code>に設定することが禁止されました。
(Thomas Munro)
     </p><p>
<!--
      Previously, this setting was accepted, but it did nothing for lack
      of any implementation.
-->
以前はこの設定は受け入れられていましたが、実装がないため何もしませんでした。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a0558cfa3] 2021-10-03 13:21:20 -0400
Branch: REL_14_STABLE [e0eba586b] 2021-10-03 13:21:20 -0400
--><p>
<!--
      Fix checking of query type in PL/pgSQL's <command>RETURN
      QUERY</command> statement (Tom Lane)
-->
PL/pgSQLの<code class="command">RETURN QUERY</code>文における、クエリ型のチェックが修正されました。
(Tom Lane)
     </p><p>
<!--
      <command>RETURN QUERY</command> should accept any query that can
      return tuples, e.g. <command>UPDATE RETURNING</command>.  v14
      accidentally disallowed anything but <command>SELECT</command>;
      moreover, the <command>RETURN QUERY EXECUTE</command> variant
      failed to apply any query-type check at all.
-->
<code class="command">RETURN QUERY</code>は、<code class="command">UPDATE RETURNING</code>のようにタプルを返すことができる任意のクエリを受け入れるべきです。
v14では誤って<code class="command">SELECT</code>以外のものを禁止していました。
さらに、異形の<code class="command">RETURN QUERY EXECUTE</code>では、クエリ型チェックがまったく適用されていませんでした。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [2acc84c6f] 2021-10-22 15:22:25 -0400
Branch: REL_14_STABLE [3ad2c2455] 2021-10-22 15:22:25 -0400
Branch: REL_13_STABLE [476006023] 2021-10-22 15:22:26 -0400
Branch: REL_12_STABLE [52b927a73] 2021-10-22 15:22:26 -0400
Branch: REL_11_STABLE [871dfe4b7] 2021-10-22 15:22:26 -0400
Branch: REL_10_STABLE [10f9faf6d] 2021-10-22 15:22:26 -0400
Branch: REL9_6_STABLE [b1df061f7] 2021-10-22 15:22:26 -0400
--><p>
<!--
      Fix <application>pg_dump</application> to dump non-global default
      privileges correctly (Neil Chen, Masahiko Sawada)
-->
大域的でないデフォルト権限を正しくダンプするように、<span class="application">pg_dump</span>が修正されました。
(Neil Chen, Masahiko Sawada)
     </p><p>
<!--
      If a global (unrestricted) <command>ALTER DEFAULT
      PRIVILEGES</command> command revoked some present-by-default
      privilege, for example <literal>EXECUTE</literal> for functions, and
      then a restricted <command>ALTER DEFAULT PRIVILEGES</command>
      command granted that privilege again for a selected role or
      schema, <application>pg_dump</application> failed to dump the
      restricted privilege grant correctly.
-->
大域的な（限定なしの）<code class="command">ALTER DEFAULT PRIVILEGES</code>コマンドが関数の<code class="literal">EXECUTE</code>などデフォルトである権限を取り消した後、限定付きの<code class="command">ALTER DEFAULT PRIVILEGES</code>コマンドが選択されたロールやスキーマに対してその権限を再び付与した場合、<span class="application">pg_dump</span>は制限付きの権限付与を正しくダンプできませんでした。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e2ff7d9a8] 2021-10-16 12:23:57 -0400
Branch: REL_14_STABLE [b5152e3ba] 2021-10-16 12:24:11 -0400
Branch: REL_13_STABLE [6a262ba8c] 2021-10-16 12:24:17 -0400
Branch: REL_12_STABLE [fd182a92a] 2021-10-16 12:24:24 -0400
Branch: REL_11_STABLE [ca7a4ce58] 2021-10-16 12:24:33 -0400
Branch: REL_10_STABLE [2e2a23283] 2021-10-16 12:24:40 -0400
--><p>
<!--
      Make <application>pg_dump</application> acquire shared lock on
      partitioned tables that are to be dumped (Tom Lane)
-->
ダンプされるパーティションテーブルに対して、<span class="application">pg_dump</span>が共有ロックを取得するようになりました。
(Tom Lane)
     </p><p>
<!--
      This oversight was usually pretty harmless, since
      once <application>pg_dump</application> has locked any of the leaf
      partitions, that would suffice to prevent significant DDL on the
      partitioned table itself.  However problems could ensue when dumping
      a childless partitioned table, since no relevant lock would be held.
-->
<span class="application">pg_dump</span>がリーフパーティションのいずれかをロックすれば、パーティションテーブル自体に対する重要なDDLを防ぐのに十分であるためこの見落としはたいていの場合は無害でした。
しかし関連するロックが保持されないため、子のないパーティションテーブルをダンプするときに問題が発生する可能性がありました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [40dfac4fc] 2021-10-16 15:02:55 -0400
Branch: REL_14_STABLE [3e4c8db93] 2021-10-16 15:03:05 -0400
Branch: REL_13_STABLE [0b5f557b7] 2021-10-16 15:03:10 -0400
Branch: REL_12_STABLE [5b0b2983a] 2021-10-16 15:03:15 -0400
Branch: REL_11_STABLE [58955c84f] 2021-10-16 15:03:21 -0400
--><p>
<!--
      Fix crash in <application>pg_dump</application> when attempting to
      dump trigger definitions from a pre-8.3 server (Tom Lane)
-->
<span class="productname">PostgreSQL</span>8.3より前のサーバからトリガ定義をダンプしようとした際の<span class="application">pg_dump</span>のクラッシュが修正されました。
(Tom Lane)
     </p></li><li class="listitem"><!--
Author: Daniel Gustafsson <dgustafsson@postgresql.org>
Branch: master [998d060f3] 2021-10-19 12:59:54 +0200
Branch: REL_14_STABLE [3e2f32b01] 2021-10-19 12:59:54 +0200
Branch: REL_13_STABLE [687fe8a9d] 2021-10-19 12:59:54 +0200
Branch: REL_12_STABLE [e788883de] 2021-10-19 12:59:54 +0200
Branch: REL_11_STABLE [038892c81] 2021-10-19 12:59:54 +0200
Branch: REL_10_STABLE [4fda03b67] 2021-10-19 12:59:54 +0200
Branch: REL9_6_STABLE [ef1f15819] 2021-10-19 12:59:54 +0200
--><p>
<!--
      Fix incorrect filename in <application>pg_restore</application>'s
      error message about an invalid large object TOC file (Daniel
      Gustafsson)
-->
<span class="application">pg_restore</span>の無効なラージオブジェクトのTOCファイルに関するエラーメッセージ中の誤ったファイル名が修正されました。
(Daniel Gustafsson)
     </p></li><li class="listitem"><!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [d33674708] 2021-09-29 21:46:56 +0900
Branch: REL_14_STABLE [8021334d3] 2021-09-29 21:47:25 +0900
Branch: REL_13_STABLE [3cc85d7d5] 2021-09-29 21:47:31 +0900
Branch: master [2acb7cc6b] 2021-09-29 21:48:52 +0900
Branch: REL_14_STABLE [8231c500e] 2021-09-29 21:49:29 +0900
Branch: REL_13_STABLE [8cf4f7118] 2021-09-29 21:49:36 +0900
Branch: REL_12_STABLE [c5f7e702d] 2021-09-29 21:49:40 +0900
--><p>
<!--
      Ensure that <application>pgbench</application> exits with non-zero
      status after a socket-level failure (Yugo Nagata, Fabien Coelho)
-->
ソケットレベルの障害発生後、<span class="application">pgbench</span>がゼロ以外のステータスで終了するようになりました。
(Yugo Nagata, Fabien Coelho)
     </p><p>
<!--
      The desired behavior is to finish out the run but then exit with
      status 2.  Also, fix the reporting of such errors.
-->
望ましい動作は実行を完了した後、ステータス2で終了することで、そのように修正されました。
また、ソケットレベル障害のエラー報告が修正されました。
     </p></li><li class="listitem"><!--
Author: Peter Geoghegan <pg@bowt.ie>
Branch: master [d2bf06db3] 2021-10-13 14:08:12 -0700
Branch: REL_14_STABLE [dd58194cf] 2021-10-13 14:08:11 -0700
Branch: master [cd3f429d9] 2021-10-14 14:50:26 -0700
Branch: REL_14_STABLE [5863115e4] 2021-10-14 14:50:25 -0700
--><p>
<!--
      Prevent <application>pg_amcheck</application> from checking
      temporary relations, as well as indexes that are invalid or not
      ready (Mark Dilger)
-->
<span class="application">pg_amcheck</span>が一時的なリレーションや、無効または準備ができていないインデックスをチェックしないようにしました。
(Mark Dilger)
     </p><p>
<!--
      This avoids unhelpful checks of relations that will almost certainly
      appear inconsistent.
-->
これにより、ほぼ確実に矛盾しているように見える、役に立たないリレーションのチェックが回避されます。
     </p></li><li class="listitem"><!--
Author: Peter Geoghegan <pg@bowt.ie>
Branch: master [292698f15] 2021-10-11 17:21:48 -0700
Branch: REL_14_STABLE [e7712155e] 2021-10-11 17:21:46 -0700
--><p>
<!--
      Make <filename>contrib/amcheck</filename> skip unlogged tables
      when running on a standby server (Mark Dilger)
-->
<code class="filename">contrib/amcheck</code>がスタンバイサーバで実行される際に、UNLOGGEDテーブルをスキップするようになりました。
(Mark Dilger)
     </p><p>
<!--
      It's appropriate to do this since such tables will be empty,
      and unlogged indexes were already handled similarly.
-->
このようなテーブルは空になりますし、UNLOGGEDインデックスもすでにスキップするようになっているため、このようにするのが適切です。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a667b0668] 2021-10-31 19:13:48 -0400
Branch: REL_14_STABLE [7104e0b24] 2021-10-31 19:13:48 -0400
Branch: REL_13_STABLE [3a5b313ce] 2021-10-31 19:13:48 -0400
Branch: REL_12_STABLE [16d0da5c8] 2021-10-31 19:13:48 -0400
Branch: REL_11_STABLE [5dd067430] 2021-10-31 19:13:48 -0400
Branch: REL_10_STABLE [d87d5f8d8] 2021-10-31 19:13:48 -0400
Branch: REL9_6_STABLE [fdb60ca83] 2021-10-31 19:13:48 -0400
--><p>
<!--
      Change <filename>contrib/pg_stat_statements</filename> to read
      its <quote>query texts</quote> file in units of at most 1GB
      (Tom Lane)
-->
<code class="filename">contrib/pg_stat_statements</code>が最大1GB単位で<span class="quote">「<span class="quote">問い合わせテキスト</span>」</span>ファイルを読み込むようになりました。
(Tom Lane)
     </p><p>
<!--
      Such large query text files are very unusual, but if they do occur,
      the previous coding would fail on Windows 64 (which rejects
      individual read requests of more than 2GB).
-->
そのような大きな問い合わせテキストファイルは非常にまれですが、もし発生した場合、以前のコードでは（一度に2GB以上の読み込みを拒否しますので）64ビット版Windowsでは失敗していたでしょう。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3071bbfe4] 2021-10-06 15:50:24 -0400
Branch: REL_14_STABLE [12ff678e1] 2021-10-06 15:50:24 -0400
Branch: REL_13_STABLE [aee83f39a] 2021-10-06 15:50:24 -0400
Branch: REL_12_STABLE [228897374] 2021-10-06 15:50:24 -0400
Branch: REL_11_STABLE [88807757d] 2021-10-06 15:50:24 -0400
Branch: REL_10_STABLE [2e33fbda1] 2021-10-06 15:50:24 -0400
Branch: REL9_6_STABLE [36c9f7d96] 2021-10-06 15:50:24 -0400
--><p>
<!--
      Fix null-pointer crash
      when <filename>contrib/postgres_fdw</filename> tries to report a
      data conversion error (Tom Lane)
-->
<code class="filename">contrib/postgres_fdw</code>がデータ変換エラーを報告しようとする際に発生しうるNULLポインタのクラッシュが修正されました。
(Tom Lane)
     </p></li><li class="listitem"><!--
Author: Jeff Davis <jdavis@postgresql.org>
Branch: master [7821a0bf2] 2021-10-14 12:24:00 -0700
Branch: REL_14_STABLE [0b90f1c4c] 2021-10-14 12:24:22 -0700
Branch: REL_13_STABLE [20f785732] 2021-10-14 12:24:47 -0700
Branch: REL_12_STABLE [ab11f6e46] 2021-10-14 12:25:07 -0700
Branch: REL_11_STABLE [3f5d481ef] 2021-10-14 12:25:30 -0700
Branch: REL_10_STABLE [9364f64a2] 2021-10-14 12:25:48 -0700
Branch: REL9_6_STABLE [ae6abeb88] 2021-10-14 12:26:26 -0700
--><p>
<!--
      Ensure that <function>GetSharedSecurityLabel()</function> can be
      used in a newly-started session that has not yet built its critical
      relation cache entries (Jeff Davis)
-->
<code class="function">GetSharedSecurityLabel()</code>が、クリティカルなリレーションキャッシュエントリがまだ構築されていない新たに開始したセッションでも使用できるようになりました。
(Jeff Davis)
     </p></li><li class="listitem"><!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [f4ce6c4d3] 2021-10-22 09:49:07 -0400
Branch: REL_14_STABLE [52c0c1136] 2021-10-22 09:50:16 -0400
--><p>
<!--
      When running a TAP test, include the module's own directory
      in <envar>PATH</envar> (Andrew Dunstan)
-->
TAPテストを実行する際、モジュール自体のディレクトリを<code class="envar">PATH</code>に含めるようになりました。
(Andrew Dunstan)
     </p><p>
<!--
      This allows tests to find built programs that are not installed,
      such as custom test drivers.
-->
これにより、カスタムテストドライバなどのインストールされていないプログラムを検出できるようになりました。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9b8d68cc6] 2021-10-02 16:05:42 -0400
Branch: REL_14_STABLE [fa8db4879] 2021-10-02 16:06:09 -0400
Branch: REL_13_STABLE [9c76689de] 2021-10-02 16:06:23 -0400
Branch: REL_12_STABLE [e5b25f19b] 2021-10-02 16:06:45 -0400
Branch: REL_11_STABLE [9cc919b51] 2021-10-02 16:06:55 -0400
Branch: REL_10_STABLE [e323630cd] 2021-10-02 16:07:16 -0400
Branch: REL9_6_STABLE [dbec5a2fe] 2021-10-02 16:07:37 -0400
Branch: master [ad740067a] 2021-10-02 16:05:10 -0400
Branch: REL_14_STABLE [81464999b] 2021-10-02 16:06:09 -0400
Branch: REL_13_STABLE [7ba8eb81f] 2021-10-02 16:06:23 -0400
Branch: REL_12_STABLE [4721e8aa6] 2021-10-02 16:06:45 -0400
Branch: REL_11_STABLE [bb6d42669] 2021-10-02 16:06:55 -0400
Branch: REL_10_STABLE [cb0799db0] 2021-10-02 16:07:16 -0400
Branch: REL9_6_STABLE [37cbe0f79] 2021-10-02 16:07:36 -0400
Branch: master [c1aa3b3c0] 2021-10-04 14:52:39 -0400
Branch: REL_14_STABLE [919c08d90] 2021-10-04 14:52:17 -0400
Branch: REL_13_STABLE [c53ff69e1] 2021-10-04 14:52:17 -0400
Branch: REL_12_STABLE [07873a5dc] 2021-10-04 14:52:17 -0400
Branch: REL_11_STABLE [d0b0b70dc] 2021-10-04 14:52:17 -0400
Branch: REL_10_STABLE [cd2479142] 2021-10-04 14:52:17 -0400
Branch: REL9_6_STABLE [b5f34ae08] 2021-10-04 14:52:17 -0400
--><p>
<!--
      Use the CLDR project's data to map Windows time zone names to IANA
      time zones (Tom Lane)
-->
Windowsのタイムゾーン名をIANAタイムゾーンに割り当てるのにCLDRプロジェクトのデータを利用するようになりました。
(Tom Lane)
     </p><p>
<!--
      When running on Windows, <application>initdb</application> attempts
      to set the new cluster's <varname>timezone</varname> parameter to
      the IANA time zone matching the system's prevailing time zone.
      We were using a mapping table that we'd generated years ago and
      updated only fitfully; unsurprisingly, it contained a number of
      errors as well as omissions of recently-added zones.  It turns out
      that CLDR has been tracking the most appropriate mappings, so start
      using their data.  This change will not affect any existing
      installation, only newly-initialized clusters.
-->
Windowsで実行する場合、<span class="application">initdb</span>は新たなクラスタの<code class="varname">timezone</code>パラメータに、システムのタイムゾーンに対応したIANAタイムゾーンを設定しようとします。
これまでWindowsで利用していたマッピングテーブルは何年も前に生成され、更新も散発的にしか行われないため、数多くのエラーが含まれていたり、最近追加されたゾーンが存在していなかったりと問題がありました。
CLDRが最も適切なマッピングを追跡していることが判明したため、これらのデータを使用するようになりました。
既存インストレーションには影響はなく、新しく初期化されたデータベースクラスタにのみ影響します。
     </p></li><li class="listitem"><!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [937aafd6d] 2021-10-29 11:38:18 -0400
Branch: REL_14_STABLE [0c8a40b39] 2021-10-29 11:38:32 -0400
Branch: REL_13_STABLE [4cd72add0] 2021-10-29 11:38:38 -0400
Branch: REL_12_STABLE [14b8d25d6] 2021-10-29 11:38:47 -0400
Branch: REL_11_STABLE [91455f7c6] 2021-10-29 11:38:53 -0400
Branch: REL_10_STABLE [d0fe211ce] 2021-10-29 11:38:58 -0400
Branch: REL9_6_STABLE [22a498b9b] 2021-10-29 11:39:05 -0400
--><p>
<!--
      Update time zone data files to <application>tzdata</application>
      release 2021e for DST law changes in Fiji, Jordan, Palestine, and
      Samoa, plus historical corrections for Barbados, Cook Islands,
      Guyana, Niue, Portugal, and Tonga.
-->
タイムゾーンデータファイルが<span class="application">tzdata</span>release 2021eに更新されました。
フィジー、ヨルダン、パレスチナ、サモアで夏時間法が変更され、バルバドス、クック諸島、ガイアナ、ニウエ、ポルトガル、トンガの歴史的修正が行われています。
     </p><p>
<!--
      Also, the Pacific/Enderbury zone has been renamed to Pacific/Kanton.
      Also, the following zones have been merged into nearby, more-populous
      zones whose clocks have agreed with them since 1970: Africa/Accra,
      America/Atikokan, America/Blanc-Sablon, America/Creston,
      America/Curacao, America/Nassau, America/Port_of_Spain,
      Antarctica/DumontDUrville, and Antarctica/Syowa.
      In all these cases, the previous zone name remains as an alias.
-->
また、Pacific/EnderburyはPacific/Kantonに名称変更されました。
また、Africa/Accra、America/Atikokan、America/Blanc-Sablon、America/Creston、America/Curacao、America/Nassau、America/Port_of_Spain、Antarctica/DumontDUrville、Antarctica/Syowaの各ゾーンは、1970年以降時計が一致している近くのより人口の多いゾーンに統合されました。
これらの名前はエイリアスとして残されています。
     </p></li></ul></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-14-2.html" title="E.4. リリース 14.2">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="release-14.html" title="E.6. リリース 14">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">E.4. リリース 14.2 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 14.5文書">ホーム</a></td><td width="40%" align="right" valign="top"> E.6. リリース 14</td></tr></table></div></body></html>