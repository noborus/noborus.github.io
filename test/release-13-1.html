<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.1. リリース 13.1</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="release.html" title="付録E リリースノート" /><link rel="next" href="release-13.html" title="E.2. リリース13" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 13.1文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="release.html" title="付録E リリースノート">付録E リリースノート</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?title=version 13.1 &#10;                      release-13-1.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="release.html" title="付録E リリースノート">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="60%" align="center">E.1. リリース 13.1</td><td width="20%" align="right"> <a accesskey="n" href="release-13.html" title="E.2. リリース13">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RELEASE-13-1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.1. リリース 13.1</h2></div></div></div><span class="original">
  &lt;title&gt;Release 13.1&lt;/title&gt;
</span><p><span class="original">
  &lt;title&gt;Release date:&lt;/title&gt;
</span><strong>リリース日: </strong>2020-11-12</p><p>
<span class="original">
   This release contains a variety of fixes from 13.0.
   For information about new features in major release 13, see
   &lt;xref linkend="release-13"/&gt;.
</span>
このリリースは13.0に対し、様々な不具合を修正したものです。
13メジャーリリースにおける新機能については、<a class="xref" href="release-13.html" title="E.2. リリース13">E.2</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.5.4"><div class="titlepage"><div><div><h3 class="title">E.1.1. バージョン13.1への移行</h3></div></div></div><span class="original">
   &lt;title&gt;Migration to Version 13.1&lt;/title&gt;
</span><p>
<span class="original">
    A dump/restore is not required for those running 13.X.
</span>
13.Xからの移行ではダンプ/リストアは不要です。
   </p></div><div class="sect2" id="id-1.11.6.5.5"><div class="titlepage"><div><div><h3 class="title">E.1.2. 変更点</h3></div></div></div><span class="original">
   &lt;title&gt;Changes&lt;/title&gt;
</span><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="original">
Author: Noah Misch &lt;noah@leadboat.com&gt;
Branch: master [0c3185e96] 2020-11-09 07:32:09 -0800
Branch: REL_13_STABLE [c90c84b3f] 2020-11-09 07:32:12 -0800
Branch: REL_12_STABLE [ac8f6243c] 2020-11-09 07:32:12 -0800
Branch: REL_11_STABLE [43ebfea5a] 2020-11-09 07:32:13 -0800
Branch: REL_10_STABLE [f97ecea1e] 2020-11-09 07:32:13 -0800
Branch: REL9_6_STABLE [ff3de4c21] 2020-11-09 07:32:13 -0800
Branch: REL9_5_STABLE [aefc625de] 2020-11-09 07:32:14 -0800
</span><p>
<span class="original">
      Block &lt;command&gt;DECLARE CURSOR ... WITH HOLD&lt;/command&gt; and firing of
      deferred triggers within index expressions and materialized view
      queries (Noah Misch)
</span>
インデックス式とマテリアライズドビューの問い合わせの中での<code class="command">DECLARE CURSOR ... WITH HOLD</code>と遅延トリガの発動を防止しました。
(Noah Misch)
     </p><p>
<span class="original">
      This is essentially a leak in the &lt;quote&gt;security restricted
      operation&lt;/quote&gt; sandbox mechanism.  An attacker having permission
      to create non-temporary SQL objects could parlay this leak to
      execute arbitrary SQL code as a superuser.
</span>
これは本質的に<span class="quote">「<span class="quote">セキュリティ制限された操作</span>」</span>のサンドボックス機構の抜け穴です。
テンポラリでないSQLオブジェクトの作成権限を持つ攻撃者は、任意のSQLコードをスーパーユーザとして実行するように抜け穴を拡大できました。
     </p><p>
<span class="original">
      The &lt;productname&gt;PostgreSQL&lt;/productname&gt; Project thanks
      Etienne Stalmans for reporting this problem.
      (CVE-2020-25695)
</span>
<span class="productname">PostgreSQL</span>プロジェクトは本問題を報告してくれたEtienne Stalmansに感謝します。
(CVE-2020-25695)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [a45bc8a4f] 2020-09-24 18:19:38 -0400
Branch: REL_13_STABLE [cb8885ac4] 2020-09-24 18:19:38 -0400
Branch: REL_12_STABLE [fb93f784f] 2020-09-24 18:19:38 -0400
Branch: REL_11_STABLE [1738a61c8] 2020-09-24 18:19:39 -0400
Branch: REL_10_STABLE [1888ff8d0] 2020-09-24 18:19:39 -0400
Branch: REL9_6_STABLE [7c154f2fd] 2020-09-24 18:19:39 -0400
Branch: REL9_5_STABLE [56b46d3a1] 2020-09-24 18:19:39 -0400
Branch: master [8e5793ab6] 2020-10-19 19:03:46 -0400
Branch: REL_13_STABLE [1814f915b] 2020-10-19 19:03:46 -0400
Branch: REL_12_STABLE [c6d0b9b16] 2020-10-19 19:03:46 -0400
Branch: REL_11_STABLE [5a9f99bed] 2020-10-19 19:03:47 -0400
Branch: REL_10_STABLE [68f236993] 2020-10-19 19:03:47 -0400
Branch: REL9_6_STABLE [5c78f7977] 2020-10-19 19:03:47 -0400
Branch: REL9_5_STABLE [da129a04a] 2020-10-19 19:03:47 -0400
</span><p>
<span class="original">
      Fix usage of complex connection-string parameters
      in &lt;application&gt;pg_dump&lt;/application&gt;,
      &lt;application&gt;pg_restore&lt;/application&gt;,
      &lt;application&gt;clusterdb&lt;/application&gt;,
      &lt;application&gt;reindexdb&lt;/application&gt;,
      and &lt;application&gt;vacuumdb&lt;/application&gt; (Tom Lane)
</span>
<span class="application">pg_dump</span>、<span class="application">pg_restore</span>、<span class="application">clusterdb</span>、<span class="application">reindexdb</span>、および、<span class="application">vacuumdb</span>における、複雑な接続文字列のパラメータの使用方法を修正しました。
(Tom Lane)
     </p><p>
<span class="original">
      The &lt;option&gt;-d&lt;/option&gt; parameter
      of &lt;application&gt;pg_dump&lt;/application&gt;
      and &lt;application&gt;pg_restore&lt;/application&gt;, or
      the &lt;option&gt;-&amp;#45;maintenance-db&lt;/option&gt; parameter of the other
      programs mentioned, can be a &lt;quote&gt;connection string&lt;/quote&gt;
      containing multiple connection parameters rather than just a
      database name.  In cases where these programs need to initiate
      additional connections, such as parallel processing or processing of
      multiple databases, the connection string was forgotten and just the
      basic connection parameters (database name, host, port, and
      username) were used for the additional connections.  This could lead
      to connection failures if the connection string included any other
      essential information, such as non-default SSL or GSS parameters.
      Worse, the connection might succeed but not be encrypted as
      intended, or be vulnerable to man-in-the-middle attacks that the
      intended connection parameters would have prevented.
      (CVE-2020-25694)
</span>
<span class="application">pg_dump</span>と<span class="application">pg_restore</span>の<code class="option">-d</code>パラメータや、列記した他のプログラムの<code class="option">--maintenance-db</code>パラメータは、単一のデータベース名ではなく複数の接続パラメータを含む<span class="quote">「<span class="quote">接続文字列</span>」</span>とすることができます。
並列処理や複数データベースの処理など、これらのプログラムが追加の接続を初期化する必要がある場合、この接続文字列は無視されて、追加接続には基本の接続パラメータ（データベース名、ホスト、ポート、ユーザ名）だけが使われました。
接続文字列にデフォルトでないSSLやGSSのパラメータなど他に何らか重要な情報が含まれている場合に、この動作は接続失敗をもたらす可能性がありました。
さらに悪いことには、接続は成功するけれども意図通りに暗号化されなかったり、意図した接続パラメータが防ぐはずだった中間者攻撃に脆弱になったりするかもしれませんでした。
(CVE-2020-25694)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [85c54287a] 2020-10-21 16:19:00 -0400
Branch: REL_13_STABLE [2e4af4110] 2020-10-21 16:19:00 -0400
Branch: REL_12_STABLE [f656517ec] 2020-10-21 16:19:01 -0400
Branch: REL_11_STABLE [20be76d5c] 2020-10-21 16:19:01 -0400
Branch: REL_10_STABLE [8175da6e7] 2020-10-21 16:19:02 -0400
Branch: REL9_6_STABLE [870a23230] 2020-10-21 16:18:41 -0400
Branch: REL9_5_STABLE [6997da09a] 2020-10-21 16:18:41 -0400
</span><p>
<span class="original">
      When &lt;application&gt;psql&lt;/application&gt;'s &lt;command&gt;\connect&lt;/command&gt;
      command re-uses connection parameters, ensure that all
      non-overridden parameters from a previous connection string are
      re-used (Tom Lane)
</span>
<span class="application">psql</span>の<code class="command">\connect</code>コマンドが接続パラメータを再利用するとき、以前の接続文字列から上書きされていないパラメータが確実に再利用されるようにしました。
(Tom Lane)
     </p><p>
<span class="original">
      This avoids cases where reconnection might fail due to omission of
      relevant parameters, such as non-default SSL or GSS options.
      Worse, the reconnection might succeed but not be encrypted as
      intended, or be vulnerable to man-in-the-middle attacks that the
      intended connection parameters would have prevented.
      This is largely the same problem as just cited
      for &lt;application&gt;pg_dump&lt;/application&gt; et al,
      although &lt;application&gt;psql&lt;/application&gt;'s behavior is more complex
      since the user may intentionally override some connection
      parameters.
      (CVE-2020-25694)
</span>
これにより、デフォルトでないSSLやGSSのオプションなど、関連するパラメータの脱落により再接続に失敗するかもしれないケースを回避します。
さらに悪いことに、再接続は成功したけれども意図通りに暗号化されなかったり、意図した接続パラメータで防ぐはずの中間者攻撃に脆弱になったりするかもしれませんでした。
ユーザが意図的に一部の接続パラメータを上書きするので<span class="application">psql</span>の振る舞いはより複雑ですが、これは前述の<span class="application">pg_dump</span>等に対するものと大筋で同じ問題です。
(CVE-2020-25694)
     </p></li><li class="listitem"><span class="original">
Author: Noah Misch &lt;noah@leadboat.com&gt;
Branch: master [098fb0079] 2020-11-09 07:32:09 -0800
Branch: REL_13_STABLE [67029845b] 2020-11-09 07:32:12 -0800
Branch: REL_12_STABLE [3855e5b47] 2020-11-09 07:32:13 -0800
Branch: REL_11_STABLE [7b356c78f] 2020-11-09 07:32:13 -0800
Branch: REL_10_STABLE [a498db87b] 2020-11-09 07:32:13 -0800
Branch: REL9_6_STABLE [12fd81cb7] 2020-11-09 07:32:14 -0800
Branch: REL9_5_STABLE [a54dfbee1] 2020-11-09 07:32:14 -0800
</span><p>
<span class="original">
      Prevent &lt;application&gt;psql&lt;/application&gt;'s &lt;command&gt;\gset&lt;/command&gt;
      command from modifying specially-treated variables (Noah Misch)
</span>
<span class="application">psql</span>の<code class="command">\gset</code>コマンドが特別扱いされる変数を書き換えるのを防止しました。
(Noah Misch)
     </p><p>
<span class="original">
      &lt;command&gt;\gset&lt;/command&gt; without a prefix would overwrite whatever
      variables the server told it to.  Thus, a compromised server could
      set specially-treated variables such as &lt;varname&gt;PROMPT1&lt;/varname&gt;,
      giving the ability to execute arbitrary shell code in the user's
      session.
</span>
接頭辞を伴わない<code class="command">\gset</code>はサーバが示した変数を何であれ上書きします。
したがって、安全でないサーバが<code class="varname">PROMPT1</code>などの特別扱いされる変数を設定して、ユーザのセッションで任意シェルコードを実行できるようにする可能性がありました。
     </p><p>
<span class="original">
      The &lt;productname&gt;PostgreSQL&lt;/productname&gt; Project thanks
      Nick Cleaton for reporting this problem.
      (CVE-2020-25696)
</span>
<span class="productname">PostgreSQL</span>プロジェクトは本問題を報告してくれたNick Cleatonに感謝します。
(CVE-2020-25696)
     </p></li><li class="listitem"><span class="original">
Author: Alvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;
Branch: master [4e9821b6f] 2020-10-14 20:12:26 -0300
Branch: REL_13_STABLE [72e43fc31] 2020-10-14 20:12:26 -0300
Author: Alvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;
Branch: master [7f4708818] 2020-10-15 09:48:36 -0300
Branch: REL_13_STABLE [9f783aea6] 2020-10-15 09:52:35 -0300
</span><p>
<span class="original">
      Fix unintended breakage of the replication protocol
      (&amp;Aacute;lvaro Herrera)
</span>
レプリケーションプロトコルの意図せぬ破壊を修正しました。
(Álvaro Herrera)
     </p><p>
<span class="original">
      A walsender reports two command-completion events
      for &lt;literal&gt;START_REPLICATION&lt;/literal&gt;.  This was undocumented and
      apparently unintentional; so we failed to notice that a late 13.0
      change removed the duplicate event.  However it turns out that
      walreceivers require the extra event in some code paths.  The most
      practical fix is to decree that the extra event is part of the
      protocol and resume generating it.
</span>
walsenderは<code class="literal">START_REPLICATION</code>に対するコマンド完了イベントを2つ報告しました。
これはドキュメント記載されておらず、明らかに意図せぬものです。
それで、私たちは最近の13.0の変更が二重イベントを削除したことを知らせていませんでした。
しかしながら、walreceiverが一部のコードパスで余分なイベントを必要とすることが判明しました。
最も現実的な修正は、余分なイベントをプロトコルの一部と決定し、余分なイベント発生を復活させることです。
     </p></li><li class="listitem"><span class="original">
Author: Thomas Munro &lt;tmunro@postgresql.org&gt;
Branch: master [aca74843e] 2020-09-24 10:39:52 +1200
Branch: REL_13_STABLE [052014a20] 2020-09-24 10:27:22 +1200
Branch: REL_12_STABLE [7664cc869] 2020-09-24 10:30:47 +1200
Branch: REL_11_STABLE [c5a5bd0bb] 2020-09-24 10:31:57 +1200
Branch: REL_10_STABLE [dd36d6b00] 2020-09-24 10:33:00 +1200
Branch: REL9_6_STABLE [d38e15979] 2020-09-24 10:35:10 +1200
Branch: REL9_5_STABLE [23d8b3577] 2020-09-24 10:36:27 +1200
</span><p>
<span class="original">
      Ensure that SLRU directories are properly fsync'd during checkpoints
      (Thomas Munro)
</span>
チェックポイント時にSLRUディレクトリが適切にfsyncされるようにしました。
(Thomas Munro)
     </p><p>
<span class="original">
      This prevents possible data loss in a subsequent operating system
      crash.
</span>
これはオペレーティングシステムのクラッシュ後に起こりうるデータ損失を防止します。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [d907bd054] 2020-11-03 15:41:32 -0500
Branch: REL_13_STABLE [768dbef0d] 2020-11-03 15:41:32 -0500
Branch: REL_12_STABLE [136f87ea5] 2020-11-03 15:41:32 -0500
Branch: REL_11_STABLE [501035a0a] 2020-11-03 15:41:32 -0500
Branch: REL_10_STABLE [df4405b78] 2020-11-03 15:41:32 -0500
Branch: REL9_6_STABLE [04c4b495b] 2020-11-03 15:41:32 -0500
Branch: REL9_5_STABLE [77df80cf6] 2020-11-03 15:41:32 -0500
</span><p>
<span class="original">
      Fix &lt;command&gt;ALTER ROLE&lt;/command&gt; for users with
      the &lt;literal&gt;BYPASSRLS&lt;/literal&gt; attribute (Tom Lane, Stephen Frost)
</span>
<code class="literal">BYPASSRLS</code>属性を持ったユーザに対する<code class="command">ALTER ROLE</code>を修正しました。
(Tom Lane, Stephen Frost)
     </p><p>
<span class="original">
      The &lt;literal&gt;BYPASSRLS&lt;/literal&gt; attribute is only allowed to be
      changed by superusers, but other &lt;command&gt;ALTER ROLE&lt;/command&gt;
      operations, such as password changes, should be allowed with only
      ordinary permission checks.  The previous coding erroneously
      restricted all changes on such a role to superusers.
</span>
<code class="literal">BYPASSRLS</code>属性はスーパーユーザのみ変更することができますが、
パスワード変更などの他の<code class="command">ALTER ROLE</code>操作は通常のパーミッション検査に基づき可能とすべきです。
これまでのコードでは誤って、このようなロールへの全ての変更をスーパーユーザからのみに制限していました。
     </p></li><li class="listitem"><span class="original">
Author: Peter Eisentraut &lt;peter@eisentraut.org&gt;
Branch: master [bf797a8d9] 2020-11-03 15:28:23 +0100
Branch: REL_13_STABLE [539775981] 2020-11-03 15:28:36 +0100
</span><p>
<span class="original">
      Disallow &lt;command&gt;ALTER TABLE ONLY ... DROP EXPRESSION&lt;/command&gt; when
      there are child tables (Peter Eisentraut)
</span>
子テーブルがあるときに<code class="command">ALTER TABLE ONLY ... DROP EXPRESSION</code>を禁止しました。
(Peter Eisentraut)
     </p><p>
<span class="original">
      The current implementation cannot handle this case correctly, so just
      forbid it for now.
</span>
現在の実装ではこの場合について正しく扱うことができないため、当面は単にこれを禁止します。
     </p></li><li class="listitem"><span class="original">
Author: Alvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;
Branch: master [bbb927b4d] 2020-10-20 19:22:09 -0300
Branch: REL_13_STABLE [5f6463a20] 2020-10-20 19:22:09 -0300
Branch: REL_12_STABLE [0e6b6f8c7] 2020-10-20 19:22:09 -0300
Branch: REL_11_STABLE [a795f6782] 2020-10-20 19:22:09 -0300
</span><p>
<span class="original">
      Ensure that &lt;command&gt;ALTER TABLE ONLY ... ENABLE/DISABLE
      TRIGGER&lt;/command&gt; does not recurse to child tables
      (&amp;Aacute;lvaro Herrera)
</span>
<code class="command">ALTER TABLE ONLY ... ENABLE/DISABLE TRIGGER</code>が子テーブルに再帰しないようにしました。
      (Álvaro Herrera)
     </p><p>
<span class="original">
      Previously the &lt;literal&gt;ONLY&lt;/literal&gt; flag was ignored.
</span>
これまでは<code class="literal">ONLY</code>フラグが無視されていました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [5b7bfc397] 2020-11-05 11:44:32 -0500
Branch: REL_13_STABLE [44b973b91] 2020-11-05 11:44:32 -0500
Branch: REL_12_STABLE [0bdf1ef3d] 2020-11-05 11:44:32 -0500
Branch: REL_11_STABLE [7dc18c619] 2020-11-05 11:44:32 -0500
</span><p>
<span class="original">
      Allow &lt;command&gt;LOCK TABLE&lt;/command&gt; to succeed on a self-referential
      view (Tom Lane)
</span>
<code class="command">LOCK TABLE</code>が自己参照ビューで動作するようにしました。
(Tom Lane)
     </p><p>
<span class="original">
      It previously threw an error complaining about infinite recursion,
      but there seems no need to disallow the case.
</span>
これまでは無限再帰を問題とするエラーを投げていましたが、この場合を禁止する必要はないと思われます。
     </p></li><li class="listitem"><span class="original">
Author: Michael Paquier &lt;michael@paquier.xyz&gt;
Branch: master [b17ff07aa] 2020-11-01 21:22:07 +0900
Branch: REL_13_STABLE [bb62df46b] 2020-11-01 21:24:10 +0900
Branch: REL_12_STABLE [41a033b50] 2020-11-01 21:24:15 +0900
</span><p>
<span class="original">
      Retain statistics about an index across &lt;command&gt;REINDEX
      CONCURRENTLY&lt;/command&gt; (Michael Paquier, Fabr&amp;iacute;zio de Royes Mello)
</span>
<code class="command">REINDEX CONCURRENTLY</code>を経てもインデックスに関する統計情報を維持するようにしました。
(Michael Paquier, Fabrízio de Royes Mello)
     </p><p>
<span class="original">
      Non-concurrent reindexing has always preserved such statistics.
</span>
同時実行でないインデックス再作成では既にこのような統計情報を維持するようになっていました。
     </p></li><li class="listitem"><span class="original">
Author: Michael Paquier &lt;michael@paquier.xyz&gt;
Branch: master [e66bcfb4c] 2020-09-29 14:15:57 +0900
Branch: REL_13_STABLE [1aedaba78] 2020-09-29 14:16:12 +0900
Branch: REL_12_STABLE [8aa4496dd] 2020-09-29 14:16:18 +0900
</span><p>
<span class="original">
      Fix incorrect progress reporting from &lt;command&gt;REINDEX
      CONCURRENTLY&lt;/command&gt; (Matthias van de Meent, Michael Paquier)
</span>
<code class="command">REINDEX CONCURRENTLY</code>からの誤った進行報告を修正しました。
(Matthias van de Meent, Michael Paquier)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [ad77039fa] 2020-10-28 13:47:02 -0400
Branch: REL_13_STABLE [70492195b] 2020-10-28 13:47:02 -0400
Branch: REL_12_STABLE [43330cdd4] 2020-10-28 13:47:02 -0400
</span><p>
<span class="original">
      Ensure that &lt;literal&gt;GENERATED&lt;/literal&gt; columns are updated when
      the column(s) they depend on are updated via a rule or an updatable
      view (Tom Lane)
</span>
ルールや更新可能ビューを通して依存する列が更新されたときに、<code class="literal">GENERATED</code>列が確実に更新されるようにしました。
(Tom Lane)
     </p><p>
<span class="original">
      This fix also takes care of possible failure to fire a
      column-specific trigger in such cases.
</span>
この修正は、このような場合において起こりうる列指定トリガの発動失敗にも対処しています。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [72647ac3b] 2020-09-28 14:12:38 -0400
Branch: REL_13_STABLE [61a78c71a] 2020-09-28 14:12:38 -0400
Branch: REL_12_STABLE [29f20db85] 2020-09-28 14:12:38 -0400
</span><p>
<span class="original">
      Fix failures with collation-dependent partition bound expressions
      (Tom Lane)
</span>
照合順序に依存したパーティション境界の式でのエラーを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Peter Eisentraut &lt;peter@eisentraut.org&gt;
Branch: master [560564d3a] 2020-11-04 12:46:28 +0100
Branch: REL_13_STABLE [82d4a2a7d] 2020-11-04 12:46:38 +0100
Branch: REL_12_STABLE [ea9087938] 2020-11-04 12:46:52 +0100
</span><p>
<span class="original">
      Support hashing of text arrays (Peter Eisentraut)
</span>
テキスト配列のハッシュ化に対応しました。
(Peter Eisentraut)
     </p><p>
<span class="original">
      Array hashing failed if the array element type is collatable.
      Notably, this prevented using hash partitioning with a text array
      column as partition key.
</span>
配列要素型が照合順序を適用できる場合に配列のハッシュ作成に失敗していました。
特に、これはテキスト配列の列をパーティションキーとしたハッシュパーティショニングの使用を妨げました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [3db322eaa] 2020-10-07 17:10:26 -0400
Branch: REL_13_STABLE [5ed20a689] 2020-10-07 17:10:26 -0400
</span><p>
<span class="original">
      Prevent internal overflows in cross-type datetime
      comparisons (Nikita Glukhov, Alexander Korotkov, Tom Lane)
</span>
異なる型の間で日付時刻を比較する際の内部オーバーフローを防止しました。
(Nikita Glukhov, Alexander Korotkov, Tom Lane)
     </p><p>
<span class="original">
      Previously, comparing a date to a timestamp would fail if the date
      is past the valid range for timestamps.  There were also corner
      cases involving overflow of close-to-the-limit timestamp values
      during timezone rotation.
</span>
これまでは、dateがtimestampとして有効な範囲より過去の場合、dateとtimestampとの比較はエラーになりました。
また、関連した稀な場合として、タイムゾーンのローテーションに際して限界値に近いtimestamp値のオーバーフローもありました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [489c9c340] 2020-09-30 15:40:23 -0400
Branch: REL_13_STABLE [99fd38c02] 2020-09-30 15:40:23 -0400
Branch: REL_12_STABLE [c5232dca8] 2020-09-30 15:40:23 -0400
Branch: REL_11_STABLE [b0fe0b022] 2020-09-30 15:40:23 -0400
Branch: REL_10_STABLE [db96be24c] 2020-09-30 15:40:23 -0400
Branch: REL9_6_STABLE [19e798268] 2020-09-30 15:40:23 -0400
Branch: REL9_5_STABLE [4857e6fe1] 2020-09-30 15:40:23 -0400
</span><p>
<span class="original">
      Fix off-by-one conversion of negative years to BC dates
      in &lt;function&gt;to_date()&lt;/function&gt;
      and &lt;function&gt;to_timestamp()&lt;/function&gt; (Dar Alathar-Yemen, Tom Lane)
</span>
<code class="function">to_date()</code>と<code class="function">to_timestamp()</code>でのマイナス年からBC日付への一つ違いの変換を修正しました。
(Dar Alathar-Yemen, Tom Lane)
     </p><p>
<span class="original">
      Also, arrange for the combination of a negative year and an
      explicit &lt;quote&gt;BC&lt;/quote&gt; marker to cancel out and produce AD.
</span>
また、マイナス年と明示的な<span class="quote">「<span class="quote">BC</span>」</span>マークとの組み合わせに対して、打ち消してADを生成するように調整しました。
     </p></li><li class="listitem"><span class="original">
Author: Alexander Korotkov &lt;akorotkov@postgresql.org&gt;
Branch: master [c2aa562ea] 2020-09-29 11:00:22 +0300
Branch: REL_13_STABLE [abcc0ab16] 2020-09-29 11:55:15 +0300
Branch: master [927d9abb6] 2020-09-29 12:00:04 +0300
Branch: REL_13_STABLE [651bdbc81] 2020-09-29 12:00:12 +0300
</span><p>
<span class="original">
      Allow the &lt;type&gt;jsonpath&lt;/type&gt; &lt;function&gt;.datetime()&lt;/function&gt;
      method to accept ISO 8601-format timestamps (Nikita Glukhov)
</span>
<code class="type">jsonpath</code>の<code class="function">.datetime()</code>メソッドがISO 8601形式のタイムスタンプを受け入れできるようにしました。
(Nikita Glukhov)
     </p><p>
<span class="original">
      This is not required by SQL, but it seems appropriate since
      our &lt;function&gt;to_json()&lt;/function&gt; functions generate that timestamp
      format for Javascript compatibility.
</span>
これはSQLで要求されていることではありませんが、<code class="function">to_json()</code>関数がJavascriptの互換性のために、このタイムスタンプ形式を生成することから適切と考えられます。
     </p></li><li class="listitem"><span class="original">
Author: Fujii Masao &lt;fujii@postgresql.org&gt;
Branch: master [fd26f7823] 2020-09-29 16:21:46 +0900
Branch: REL_13_STABLE [059caf36c] 2020-09-29 16:23:57 +0900
Branch: REL_12_STABLE [4d342b9d4] 2020-09-29 16:24:20 +0900
Branch: REL_11_STABLE [462ff7966] 2020-09-29 16:24:47 +0900
Branch: REL_10_STABLE [334417538] 2020-09-29 16:25:08 +0900
Branch: REL9_6_STABLE [7be02a3bf] 2020-09-29 16:25:20 +0900
Branch: REL9_5_STABLE [40a8fb1e0] 2020-09-29 16:25:51 +0900
</span><p>
<span class="original">
      Ensure that standby servers will archive WAL timeline history files
      when &lt;varname&gt;archive_mode&lt;/varname&gt; is set
      to &lt;literal&gt;always&lt;/literal&gt; (Grigory Smolkin, Fujii Masao)
</span>
<code class="varname">archive_mode</code>が<code class="literal">always</code>に設定されているとき、スタンバイサーバがWALタイムラインヒストリファイルを確実にアーカイブするようにしました。
(Grigory Smolkin, Fujii Masao)
     </p><p>
<span class="original">
      This oversight could lead to failure of subsequent PITR recovery
      attempts.
</span>
この見落としにより、その後のPITRリカバリの試みが失敗する可能性がありました。
     </p></li><li class="listitem"><span class="original">
Author: Thomas Munro &lt;tmunro@postgresql.org&gt;
Branch: master [b94109ce3] 2020-10-15 11:41:58 +1300
Branch: REL_13_STABLE [e0950135a] 2020-10-15 11:42:17 +1300
Branch: master [70516a178] 2020-10-15 18:34:21 +1300
Branch: REL_13_STABLE [47522ee00] 2020-10-15 18:38:03 +1300
</span><p>
<span class="original">
      Fix edge cases in detecting premature death of the postmaster on
      platforms that use &lt;function&gt;kqueue()&lt;/function&gt; (Thomas Munro)
</span>
<code class="function">kqueue()</code>を使うプラットフォームにて早すぎるpostmasterダウンの検出での境界ケースを修正しました。
(Thomas Munro)
     </p></li><li class="listitem"><span class="original">
Author: Tomas Vondra &lt;tomas.vondra@postgresql.org&gt;
Branch: master [ebb7ae839] 2020-11-03 22:31:57 +0100
Branch: REL_13_STABLE [2d26c4ac7] 2020-11-03 22:32:34 +0100
</span><p>
<span class="original">
      Avoid generating an incorrect incremental-sort plan when the sort key
      is a volatile expression (James Coleman)
</span>
ソートキーが揮発的な式であるときの誤ったインクリメンタルソートのプランの生成を回避しました。
(James Coleman)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [d7885b1f8] 2020-10-06 11:43:53 -0400
Branch: REL_13_STABLE [b7f166efa] 2020-10-06 11:43:53 -0400
Branch: REL_12_STABLE [3d69efc4f] 2020-10-06 11:43:54 -0400
</span><p>
<span class="original">
      Fix possible crash when considering partition-wise joins
      during GEQO planning (Tom Lane)
</span>
GEQOのプラン作成時にパーティション同士の結合を検討したときに起こりうるクラッシュを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [dfc797730] 2020-11-01 18:38:42 -0500
Branch: REL_13_STABLE [2330f4d3a] 2020-11-01 18:38:42 -0500
Branch: master [fd2997565] 2020-11-02 11:25:18 -0500
Branch: REL_13_STABLE [7957e75c5] 2020-11-02 11:25:18 -0500
</span><p>
<span class="original">
      Fix possible infinite loop or corrupted output data in TOAST
      decompression (Tom Lane)
</span>
TOASTの圧縮の展開で起こりうる無限ループまたは壊れた出力データを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Peter Geoghegan &lt;pg@bowt.ie&gt;
Branch: master [48e129134] 2020-11-04 18:42:27 -0800
Branch: REL_13_STABLE [02c9386ca] 2020-11-04 18:42:24 -0800
</span><p>
<span class="original">
      Fix counting of the number of entries in B-tree indexes during
      cleanup-only &lt;command&gt;VACUUM&lt;/command&gt;s (Peter Geoghegan)
</span>
クリーンアップだけをする<code class="command">VACUUM</code>のときのBツリーインデックスで項目数のカウントを修正しました。
(Peter Geoghegan)
     </p></li><li class="listitem"><span class="original">
Author: Tomas Vondra &lt;tomas.vondra@postgresql.org&gt;
Branch: master [7577dd848] 2020-11-07 00:39:19 +0100
Branch: REL_13_STABLE [6a7b55f37] 2020-11-07 00:40:06 +0100
Branch: REL_12_STABLE [8149e9f9a] 2020-11-07 00:40:40 +0100
Branch: REL_11_STABLE [895d0f0e8] 2020-11-07 00:41:02 +0100
Branch: REL_10_STABLE [0b96fc977] 2020-11-07 00:41:19 +0100
Branch: REL9_6_STABLE [bae31e75f] 2020-11-07 00:41:36 +0100
Branch: REL9_5_STABLE [d2d3a4bd3] 2020-11-07 00:41:52 +0100
</span><p>
<span class="original">
      Ensure that data is detoasted before being inserted into a BRIN
      index (Tomas Vondra)
</span>
データがBRINインデックスに挿入される前に確実にTOASTから戻すようにしました。
(Tomas Vondra)
     </p><p>
<span class="original">
      Index entries are not supposed to contain out-of-line TOAST
      pointers, but BRIN didn't get that memo.  This could lead to errors
      like &lt;quote&gt;missing chunk number 0 for toast value NNN&lt;/quote&gt;.
      (If you are faced with such an error from an existing
      index, &lt;command&gt;REINDEX&lt;/command&gt; should be enough to fix it.)
</span>
インデックスのエントリに行外のTOASTポインタを含むことはサポートされませんが、BRINはこれを考慮していませんでした。
これにより、<span class="quote">「<span class="quote">missing chunk number 0 for toast value NNN（TOAST値NNNのためのチャンク番号0がありません）</span>」</span>のようなエラーが生じる可能性がありました。
（既存のインデックスでこのようなエラーに遭遇したなら、修正するのに<code class="command">REINDEX</code>を行えばよいです。）
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [371668a83] 2020-10-12 18:01:34 -0400
Branch: REL_13_STABLE [962ab473e] 2020-10-12 18:01:34 -0400
Branch: REL_12_STABLE [12945874e] 2020-10-12 18:01:34 -0400
</span><p>
<span class="original">
      Fix buffered GiST index builds to work when the index has included
      columns (Pavel Borisov)
</span>
インデックスが付加された列を持つときに動作するように、バッファ付きGiSTインデックスの構築を修正しました。
(Pavel Borisov)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [0a4b34031] 2020-11-02 21:11:50 -0500
Branch: REL_13_STABLE [a58a631b4] 2020-11-02 21:11:50 -0500
Branch: REL_12_STABLE [d3befe9b9] 2020-11-02 21:11:50 -0500
Branch: REL_11_STABLE [f28b089cb] 2020-11-02 21:11:50 -0500
Branch: REL_10_STABLE [7827497ba] 2020-11-02 21:11:50 -0500
</span><p>
<span class="original">
      Fix unportable use of &lt;function&gt;getnameinfo()&lt;/function&gt;
      in &lt;structname&gt;pg_hba_file_rules&lt;/structname&gt; view (Tom Lane)
</span>
<code class="structname">pg_hba_file_rules</code>ビューで<code class="function">getnameinfo()</code>の移植性に欠ける使用法を修正しました。
(Tom Lane)
     </p><p>
<span class="original">
      On FreeBSD 11, and possibly other platforms, the
      view's &lt;structfield&gt;address&lt;/structfield&gt;
      and &lt;structfield&gt;netmask&lt;/structfield&gt; columns were always null due
      to this error.
</span>
FreeBSD 11では、あるいは他のプラットフォームでも、このビューの<code class="structfield">address</code>と<code class="structfield">netmask</code>列はこの誤りのために常にnullでした。
     </p></li><li class="listitem"><span class="original">
Author: Noah Misch &lt;noah@leadboat.com&gt;
Branch: master [f90e80b91] 2020-10-31 08:43:28 -0700
Branch: REL_13_STABLE [ab2e2ce46] 2020-10-31 08:43:32 -0700
Branch: REL_12_STABLE [741b84e9f] 2020-10-31 08:44:13 -0700
Branch: REL_11_STABLE [045466675] 2020-10-31 08:45:19 -0700
</span><p>
<span class="original">
      Avoid crash if &lt;varname&gt;debug_query_string&lt;/varname&gt; is NULL
      when starting a parallel worker (Noah Misch)
</span>
パラレルワーカを開始するときに<code class="varname">debug_query_string</code>がNULLである場合のクラッシュを回避しました。
(Noah Misch)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [ba9f18abd] 2020-10-25 13:57:46 -0400
Branch: REL_13_STABLE [d88d8ad28] 2020-10-25 13:57:46 -0400
Branch: REL_12_STABLE [de78c1007] 2020-10-25 13:57:46 -0400
Branch: master [20d3fe900] 2020-10-26 11:36:53 -0400
Branch: master [8b39345a9] 2020-11-08 13:08:36 -0500
Branch: REL_13_STABLE [7aeb6404f] 2020-11-08 13:08:36 -0500
Branch: REL_12_STABLE [94ec005f3] 2020-11-08 13:08:36 -0500
</span><p>
<span class="original">
      Avoid failures when a &lt;literal&gt;BEFORE ROW UPDATE&lt;/literal&gt; trigger
      returns the &lt;quote&gt;old&lt;/quote&gt; row of a table having dropped
      or &lt;quote&gt;missing&lt;/quote&gt; columns (Amit Langote, Tom Lane)
</span>
<code class="literal">BEFORE ROW UPDATE</code>トリガが、削除されたか<span class="quote">「<span class="quote">見つからない</span>」</span>列を持つテーブルの<span class="quote">「<span class="quote">old</span>」</span>行を返すときの失敗を回避しました。
(Amit Langote, Tom Lane)
     </p><p>
<span class="original">
      This method of suppressing an update could result in crashes,
      unexpected &lt;literal&gt;CHECK&lt;/literal&gt; constraint failures, or
      incorrect &lt;literal&gt;RETURNING&lt;/literal&gt; output,
      because &lt;quote&gt;missing&lt;/quote&gt; columns would read as NULLs for those
      purposes.  (A column is &lt;quote&gt;missing&lt;/quote&gt; for this purpose if
      it was added by &lt;command&gt;ALTER TABLE ADD COLUMN&lt;/command&gt; with a
      non-NULL, but constant, default value.)  Dropped columns could cause
      trouble as well.
</span>
この更新を抑制する方法は、<span class="quote">「<span class="quote">見つからない</span>」</span>列がNULLとして読まれることで、クラッシュや予期せぬ<code class="literal">CHECK</code>制約エラー、あるいは、誤った<code class="literal">RETURNING</code>出力をもたらす可能性がありました。
（ある列が定数ですが非NULLのデフォルト値で<code class="command">ALTER TABLE ADD COLUMN</code>にて追加された場合、その列は<span class="quote">「<span class="quote">見つからない</span>」</span>ものとなります。）
削除された列も同様に問題を引き起こすおそれがありました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [87a174c0e] 2020-10-23 11:32:33 -0400
Branch: REL_13_STABLE [e4538708d] 2020-10-23 11:32:33 -0400
</span><p>
<span class="original">
      Fix &lt;command&gt;EXPLAIN&lt;/command&gt;'s output for incremental sort plans
      to have correct tag nesting in XML output mode (Daniel Gustafsson)
</span>
インクリメンタルソートの計画に対する<code class="command">EXPLAIN</code>の出力を、XML出力モードで正しい入れ子のタグを持つように修正しました。
(Daniel Gustafsson)
     </p></li><li class="listitem"><span class="original">
Author: Peter Eisentraut &lt;peter@eisentraut.org&gt;
Branch: REL_13_STABLE [1f53d0b9f] 2020-10-20 14:09:16 +0200
Branch: REL_12_STABLE [bd0677bb8] 2020-10-20 14:31:52 +0200
Branch: REL_11_STABLE [6e03a8a30] 2020-10-20 14:50:43 +0200
Branch: REL_10_STABLE [f78ebbe68] 2020-10-20 15:19:47 +0200
Branch: REL9_6_STABLE [d4e654d15] 2020-10-20 15:35:31 +0200
Branch: REL9_5_STABLE [d27c18d26] 2020-10-20 17:22:41 +0200
</span><p>
<span class="original">
      Avoid unnecessary failure when transferring very large payloads
      through shared memory queues (Markus Wanner)
</span>
共有メモリのキューを通して非常に大きな内容を転送するときの不要なエラーを回避しました。
(Markus Wanner)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [c8ab97017] 2020-10-19 14:33:09 -0400
Branch: REL_13_STABLE [25378db74] 2020-10-19 14:33:10 -0400
</span><p>
<span class="original">
      Fix omission of result data type coercion in some cases in
      SQL-language functions (Tom Lane)
</span>
SQL言語関数でいくつかの場合における結果データ型の強制の欠落を修正しました。
(Tom Lane)
     </p><p>
<span class="original">
      This could lead to wrong results or crashes, depending on the data
      types involved.
</span>
関わるデータ型によっては、これにより誤った結果やクラッシュをもたらす可能性がありました。
     </p></li><li class="listitem"><span class="original">
Author: Andres Freund &lt;andres@anarazel.de&gt;
Branch: master [72559438f] 2020-10-15 14:29:53 -0700
Branch: REL_13_STABLE [ae3e75aba] 2020-10-15 14:30:40 -0700
Branch: REL_12_STABLE [c8a2bb0f1] 2020-10-15 14:31:32 -0700
Branch: REL_11_STABLE [f3dee5b9a] 2020-10-15 15:06:16 -0700
Branch: master [fe2a16d8b] 2020-10-15 18:17:00 -0700
Branch: REL_13_STABLE [efc9a8e98] 2020-10-15 18:17:00 -0700
Branch: REL_12_STABLE [c835c7ffe] 2020-10-15 18:17:01 -0700
Branch: REL_11_STABLE [4a4f4487d] 2020-10-15 18:17:01 -0700
</span><p>
<span class="original">
      Fix incorrect handling of template function attributes in JIT code
      generation (Andres Freund)
</span>
JITコード生成でのテンプレート関数属性の誤った扱いを修正しました。
(Andres Freund)
     </p><p>
<span class="original">
      This has been shown to cause crashes on &lt;literal&gt;s390x&lt;/literal&gt;,
      and very possibly there are other cases on other platforms.
</span>
これは<code class="literal">s390x</code>でクラッシュを引き起こすことが示されていて、他のプラットフォームでも他の問題がある可能性があります。
     </p></li><li class="listitem"><span class="original">
Author: Noah Misch &lt;noah@leadboat.com&gt;
Branch: master [f5c1167b1] 2020-10-11 21:31:37 -0700
Branch: REL_13_STABLE [d41cb63ff] 2020-10-11 21:31:40 -0700
Branch: master [88ea7a118] 2020-10-11 21:31:37 -0700
Branch: REL_13_STABLE [5efa788e1] 2020-10-11 21:31:40 -0700
</span><p>
<span class="original">
      Improve code generated for compare_exchange and fetch_add operations
      on PPC (Noah Misch)
</span>
PPCでcompare_exchangeとfetch_addの操作についてコード生成を改善しました。
(Noah Misch)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [e55f718fc] 2020-09-26 16:04:06 -0400
Branch: REL_13_STABLE [f7873900f] 2020-09-26 16:04:06 -0400
Branch: REL_12_STABLE [bda32733c] 2020-09-26 16:04:06 -0400
Branch: REL_11_STABLE [dd89ba578] 2020-09-26 16:04:06 -0400
Branch: REL_10_STABLE [de6725deb] 2020-09-26 16:04:06 -0400
Branch: REL9_6_STABLE [acab757ce] 2020-09-26 16:04:06 -0400
Branch: REL9_5_STABLE [bf34ae930] 2020-09-26 16:04:06 -0400
</span><p>
<span class="original">
      Fix relation cache memory leaks with RLS policies (Tom Lane)
</span>
RLSポリシーに関してリレーションキャッシュのメモリリークを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Alvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;
Branch: master [623644f02] 2020-11-06 22:52:16 -0300
Branch: REL_13_STABLE [d94d37f8c] 2020-11-06 22:52:15 -0300
Branch: REL_12_STABLE [8ad6a0c1b] 2020-11-06 22:52:15 -0300
</span><p>
<span class="original">
      Fix edge-case memory leak
      in &lt;function&gt;index_get_partition()&lt;/function&gt; (Justin Pryzby)
</span>
<code class="function">index_get_partition()</code>で境界条件的な場合のメモリリークを修正しました。
(Justin Pryzby)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [397ea901e] 2020-10-12 13:31:24 -0400
Branch: REL_13_STABLE [9343bfefa] 2020-10-12 13:31:24 -0400
Branch: REL_12_STABLE [f35c11770] 2020-10-12 13:31:24 -0400
Branch: REL_11_STABLE [cfa4cff30] 2020-10-12 13:31:24 -0400
Branch: REL_10_STABLE [a5c77e6b8] 2020-10-12 13:31:24 -0400
Branch: REL9_6_STABLE [c7573ab1e] 2020-10-12 13:31:24 -0400
Branch: REL9_5_STABLE [43ca5e07d] 2020-10-12 13:31:24 -0400
</span><p>
<span class="original">
      Fix small memory leak when SIGHUP processing decides that a new GUC
      variable value cannot be applied without a restart (Tom Lane)
</span>
SIGHUP処理が新たなGUC変数値は再起動なしには適用できないと判断するときの小さなメモリリークを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [a6b1f5365] 2020-09-29 11:18:30 -0400
Branch: REL_13_STABLE [f0e4ec74e] 2020-09-29 11:18:30 -0400
Branch: REL_12_STABLE [c1e044bb3] 2020-09-29 11:18:31 -0400
Branch: REL_11_STABLE [13a1901ba] 2020-09-29 11:18:31 -0400
</span><p>
<span class="original">
      Fix memory leaks
      in &lt;application&gt;PL/pgsql&lt;/application&gt;'s &lt;command&gt;CALL&lt;/command&gt;
      processing (Pavel Stehule, Tom Lane)
</span>
<span class="application">PL/pgsql</span>の<code class="command">CALL</code>処理でメモリリークを修正しました。
(Pavel Stehule, Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [7d00a6b2d] 2020-10-17 16:53:48 -0400
Branch: REL_13_STABLE [d2074daeb] 2020-10-19 11:23:51 -0400
Branch: REL_12_STABLE [407580aab] 2020-10-19 11:23:51 -0400
Branch: REL_11_STABLE [883226441] 2020-10-19 11:23:52 -0400
Branch: REL_10_STABLE [6670e9107] 2020-10-19 11:23:52 -0400
Branch: REL9_6_STABLE [cdc7ace16] 2020-10-19 11:23:52 -0400
Branch: REL9_5_STABLE [6acc31a20] 2020-10-19 11:23:52 -0400
</span><p>
<span class="original">
      In &lt;application&gt;libpq&lt;/application&gt; for Windows,
      call &lt;function&gt;WSAStartup()&lt;/function&gt; once per process
      and &lt;function&gt;WSACleanup()&lt;/function&gt; not at all (Tom Lane,
      Alexander Lakhin)
</span>
Windowsの<span class="application">libpq</span>で、プロセスごとに一度<code class="function">WSAStartup()</code>を呼び出し、<code class="function">WSACleanup()</code>は全く呼び出さないようにしました。
(Tom Lane, Alexander Lakhin)
     </p><p>
<span class="original">
      Previously, &lt;application&gt;libpq&lt;/application&gt;
      invoked &lt;function&gt;WSAStartup()&lt;/function&gt; at connection start
      and &lt;function&gt;WSACleanup()&lt;/function&gt; at connection cleanup.
      However, it appears that calling &lt;function&gt;WSACleanup()&lt;/function&gt;
      can interfere with other program operations; notably, we have
      observed rare failures to emit expected output to stdout.  There
      appear to be no ill effects from omitting the call, so do that.
      (This also eliminates a performance issue from repeated DLL loads and
      unloads when a program performs a series of database connections.)
</span>
これまでは、<span class="application">libpq</span>は接続開始時に<code class="function">WSAStartup()</code>を呼び出し、接続をクリーンアップするときに<code class="function">WSACleanup()</code>を呼び出していました。
しかしながら、<code class="function">WSACleanup()</code>の呼び出しは他のプログラムの操作と干渉する可能性があることがわかりました。
特にstdoutへの期待された出力に稀に失敗することが観測されています。
この呼び出しを省略しても悪影響はないとみられるため、そのようにしました。
（これはプログラムがデータベース接続を連続して行うときのDLLロードとアンロードの繰り返しによる性能問題も取り除きます。）
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [21d36747d] 2020-10-24 13:12:08 -0400
Branch: REL_13_STABLE [fd048e0cb] 2020-10-24 13:12:19 -0400
Branch: REL_12_STABLE [bdc79ddd1] 2020-10-24 13:12:26 -0400
Branch: REL_11_STABLE [12a73f29f] 2020-10-24 13:12:31 -0400
Branch: REL_10_STABLE [f38b66ec0] 2020-10-24 13:12:41 -0400
Branch: REL9_6_STABLE [379c43bda] 2020-10-24 13:12:47 -0400
Branch: REL9_5_STABLE [758b45e83] 2020-10-24 13:12:53 -0400
</span><p>
<span class="original">
      Fix &lt;application&gt;ecpg&lt;/application&gt; library's per-thread
      initialization logic for Windows (Tom Lane, Alexander Lakhin)
</span>
Windowsでの<span class="application">ecpg</span>ライブラリのスレッドごとの初期化ロジックを修正しました。
(Tom Lane, Alexander Lakhin)
     </p><p>
<span class="original">
      Multi-threaded &lt;application&gt;ecpg&lt;/application&gt; applications could
      suffer rare misbehavior due to incorrect locking.
</span>
マルチスレッド化された<span class="application">ecpg</span>アプリケーションは、誤ったロックにより稀に誤動作を起こす可能性がありました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [1e3868ab3] 2020-11-07 15:03:44 -0500
Branch: REL_13_STABLE [1bccb159a] 2020-11-07 15:03:44 -0500
Branch: master [eed4356fa] 2020-11-07 16:25:42 -0500
Branch: REL_13_STABLE [3459f4169] 2020-11-07 16:25:42 -0500
</span><p>
<span class="original">
      Fix &lt;application&gt;ecpg&lt;/application&gt;'s mis-processing
      of &lt;literal&gt;B'...'&lt;/literal&gt; and &lt;literal&gt;X'...'&lt;/literal&gt; literals
      (Shenhao Wang)
</span>
<span class="application">ecpg</span>の<code class="literal">B'...'</code>および<code class="literal">X'...'</code>リテラルに対する誤った処理を修正しました。
(Shenhao Wang)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [66f8687a8] 2020-10-28 14:35:53 -0400
Branch: REL_13_STABLE [ba4f5413e] 2020-10-28 14:35:53 -0400
Branch: REL_12_STABLE [cb0982ba9] 2020-10-28 14:35:53 -0400
Branch: REL_11_STABLE [9eb250339] 2020-10-28 14:35:53 -0400
Branch: REL_10_STABLE [504f963f7] 2020-10-28 14:35:53 -0400
Branch: REL9_6_STABLE [204d77969] 2020-10-28 14:35:53 -0400
Branch: REL9_5_STABLE [aff06436c] 2020-10-28 14:35:53 -0400
</span><p>
<span class="original">
      On Windows, make &lt;application&gt;psql&lt;/application&gt; read the output of
      a backtick command in text mode, not binary mode (Tom Lane)
</span>
Windowsで、<span class="application">psql</span>がバッククォートコマンドの出力をバイナリモードでなくテキストモードで読むようにしました。
(Tom Lane)
     </p><p>
<span class="original">
      This ensures proper handling of newlines.
</span>
これにより改行を適切に扱えます。
     </p></li><li class="listitem"><span class="original">
Author: Andrew Dunstan &lt;andrew@dunslane.net&gt;
Branch: master [3eb3d3e78] 2020-09-04 13:54:54 -0400
Branch: REL_13_STABLE Release: REL_13_0 [72857482c] 2020-09-04 13:55:11 -0400
Branch: REL_12_STABLE [616110eac] 2020-09-04 13:55:03 -0400
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [9e5f1f21a] 2020-10-07 12:51:02 -0400
Branch: REL_13_STABLE [2ea624b4b] 2020-10-07 12:51:03 -0400
Branch: REL_12_STABLE [d8c2a2199] 2020-10-07 12:51:04 -0400
Branch: REL_11_STABLE [f2c6e94f0] 2020-10-07 12:51:05 -0400
Branch: REL_10_STABLE [0c79dcb36] 2020-10-07 12:51:05 -0400
Branch: REL9_6_STABLE [710c0a66d] 2020-10-07 12:51:06 -0400
Branch: REL9_5_STABLE [0bfe356c5] 2020-10-07 12:51:06 -0400
</span><p>
<span class="original">
      Ensure that &lt;application&gt;pg_dump&lt;/application&gt; collects per-column
      information about extension configuration tables (Fabr&amp;iacute;zio de
      Royes Mello, Tom Lane)
</span>
<span class="application">pg_dump</span>が拡張の設定テーブルの列ごとの情報を確実に収集するようにしました。
(Fabrízio de Royes Mello, Tom Lane)
     </p><p>
<span class="original">
      Failure to do this led to crashes when
      specifying &lt;option&gt;-&amp;#45;inserts&lt;/option&gt;, or underspecified (though
      usually correct) &lt;command&gt;COPY&lt;/command&gt; commands when
      using &lt;command&gt;COPY&lt;/command&gt; to reload the tables' data.
</span>
これに失敗することで、<code class="option">--inserts</code>を指定したときにクラッシュしたり、<code class="command">COPY</code>を使用してテーブルのデータを再ロードするときに、（通常は正しいのですが）不十分な指定の<code class="command">COPY</code>コマンドになったりしました。
     </p></li><li class="listitem"><span class="original">
Author: Bruce Momjian &lt;bruce@momjian.us&gt;
Branch: master [3c0471b5f] 2020-10-15 19:33:46 -0400
Branch: REL_13_STABLE [59cfff65b] 2020-10-15 19:33:45 -0400
Branch: REL_12_STABLE [a106236d8] 2020-10-15 19:33:43 -0400
Branch: REL_11_STABLE [eb421c83b] 2020-10-15 19:33:42 -0400
Branch: REL_10_STABLE [85fedf39f] 2020-10-15 19:33:36 -0400
Branch: REL9_6_STABLE [39c23c199] 2020-10-15 19:33:36 -0400
Branch: REL9_5_STABLE [d9ae2297b] 2020-10-15 19:33:36 -0400
Branch: master [536de14e2] 2020-10-15 20:37:20 -0400
Branch: REL_13_STABLE [79fe23465] 2020-10-15 20:37:20 -0400
Branch: REL_12_STABLE [0ab7ca98a] 2020-10-15 20:37:20 -0400
Branch: REL_11_STABLE [16be4e435] 2020-10-15 20:37:19 -0400
Branch: REL_10_STABLE [6e34cc8ab] 2020-10-15 20:37:19 -0400
Branch: REL9_6_STABLE [9dcffe69a] 2020-10-15 20:37:19 -0400
Branch: REL9_5_STABLE [b05672c72] 2020-10-15 20:37:19 -0400
</span><p>
<span class="original">
      Make &lt;application&gt;pg_upgrade&lt;/application&gt; check for pre-existence
      of tablespace directories in the target cluster (Bruce Momjian)
</span>
<span class="application">pg_upgrade</span>が対象クラスタにテーブルスペースディレクトリが既に存在するかを検査するようにしました。
(Bruce Momjian)
     </p></li><li class="listitem"><span class="original">
Author: Michael Paquier &lt;michael@paquier.xyz&gt;
Branch: master [ca2a12c93] 2020-10-19 09:36:56 +0900
Branch: REL_13_STABLE [1bd9b2b23] 2020-10-19 09:37:50 +0900
Branch: REL_12_STABLE [57bdf29dd] 2020-10-19 09:37:55 +0900
Branch: REL_11_STABLE [914139081] 2020-10-19 09:38:01 +0900
Branch: REL_10_STABLE [e8d36f9ec] 2020-10-19 09:38:06 +0900
Branch: REL9_6_STABLE [994a02f7f] 2020-10-19 09:38:13 +0900
Branch: REL9_5_STABLE [099238322] 2020-10-19 09:38:18 +0900
</span><p>
<span class="original">
      Fix potential memory leak in &lt;filename&gt;contrib/pgcrypto&lt;/filename&gt;
      (Michael Paquier)
</span>
<code class="filename">contrib/pgcrypto</code>の潜在的なメモリリークを修正しました。
(Michael Paquier)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [02a75f836] 2020-10-16 11:59:13 -0400
Branch: REL_13_STABLE [3d338a46a] 2020-10-16 11:59:25 -0400
Branch: REL_12_STABLE [7004ce758] 2020-10-16 11:59:31 -0400
Branch: REL_11_STABLE [1eb2d7e3e] 2020-10-16 11:59:36 -0400
Branch: REL_10_STABLE [3e1a4c260] 2020-10-16 11:59:41 -0400
Branch: REL9_6_STABLE [e15115b4d] 2020-10-16 11:59:47 -0400
Branch: REL9_5_STABLE [9c3032881] 2020-10-16 11:59:52 -0400
</span><p>
<span class="original">
      Add check for an unlikely failure case
      in &lt;filename&gt;contrib/pgcrypto&lt;/filename&gt; (Daniel Gustafsson)
</span>
<code class="filename">contrib/pgcrypto</code>での起こりそうにない失敗ケースに対する検査を追加しました。
(Daniel Gustafsson)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [4a071afbd] 2020-10-29 15:28:14 -0400
Branch: REL_13_STABLE [ee03baad2] 2020-10-29 15:28:28 -0400
Branch: REL_12_STABLE [25b587f03] 2020-10-29 15:28:35 -0400
Branch: REL_11_STABLE [24d769b90] 2020-10-29 15:28:41 -0400
Branch: REL_10_STABLE [c39f4e81d] 2020-10-29 15:28:47 -0400
</span><p>
<span class="original">
      Fix recently-added &lt;type&gt;timetz&lt;/type&gt; test case so it works when
      the USA is not observing daylight savings time (Tom Lane)
</span>
最近に追加された<code class="type">timetz</code>のテストケースを修正して、アメリカが夏時間を守っていないときにも動作するようにしました。
(Tom Lane)
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [c4a803ac7] 2020-10-16 21:53:33 -0400
Branch: REL_13_STABLE [3f26dca76] 2020-10-16 21:53:43 -0400
Branch: REL_12_STABLE [b39c94097] 2020-10-16 21:53:50 -0400
Branch: REL_11_STABLE [2b9166dbc] 2020-10-16 21:53:55 -0400
Branch: REL_10_STABLE [aae4097b0] 2020-10-16 21:54:03 -0400
Branch: REL9_6_STABLE [13dbf4ab8] 2020-10-16 21:54:09 -0400
Branch: REL9_5_STABLE [c8cb243cb] 2020-10-16 21:54:14 -0400
Branch: master [7d6d6bce4] 2020-10-22 21:23:47 -0400
Branch: REL_13_STABLE [96ed2ae93] 2020-10-22 21:24:01 -0400
Branch: REL_12_STABLE [78ccf7f42] 2020-10-22 21:24:07 -0400
Branch: REL_11_STABLE [02f86d523] 2020-10-22 21:24:12 -0400
Branch: REL_10_STABLE [a357cc05d] 2020-10-22 21:24:17 -0400
Branch: REL9_6_STABLE [05a36321a] 2020-10-22 21:24:23 -0400
Branch: REL9_5_STABLE [0abebb58f] 2020-10-22 21:24:28 -0400
</span><p>
<span class="original">
      Update time zone data files to &lt;application&gt;tzdata&lt;/application&gt;
      release 2020d for DST law changes in Fiji, Morocco, Palestine, the
      Canadian Yukon, Macquarie Island, and Casey Station (Antarctica);
      plus historical corrections for France, Hungary, Monaco, and
      Palestine.
</span>
タイムゾーンデータファイルを<span class="application">tzdata</span> release 2020dに更新しました。フィジー、モロッコ、パレスチナ、カナダのユーコン、マッコーリー島、ケーシー基地（南極）の夏時間法の変更と、フランス、ハンガリー、モナコ、パレスチナの歴史的修正が含まれます。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [ce0e97f80] 2020-10-16 21:40:16 -0400
Branch: REL_13_STABLE [e0cf5e9b2] 2020-10-16 21:40:16 -0400
Branch: REL_12_STABLE [3d13a8307] 2020-10-16 21:40:16 -0400
Branch: REL_11_STABLE [4a2528bfa] 2020-10-16 21:40:16 -0400
Branch: REL_10_STABLE [41eeeb348] 2020-10-16 21:40:16 -0400
Branch: REL9_6_STABLE [5515c73a6] 2020-10-16 21:40:16 -0400
Branch: REL9_5_STABLE [38fac9c1f] 2020-10-16 21:40:16 -0400
Branch: master [c5054da0d] 2020-10-22 21:15:22 -0400
Branch: REL_13_STABLE [0e551533b] 2020-10-22 21:15:37 -0400
Branch: REL_12_STABLE [f56c42e50] 2020-10-22 21:16:04 -0400
Branch: REL_11_STABLE [d2ffe0a00] 2020-10-22 21:16:16 -0400
Branch: REL_10_STABLE [34285083b] 2020-10-22 21:16:23 -0400
Branch: REL9_6_STABLE [58f9f52a3] 2020-10-22 21:16:31 -0400
Branch: REL9_5_STABLE [ff26f804a] 2020-10-22 21:16:38 -0400
</span><p>
<span class="original">
      Sync our copy of the timezone library with IANA tzcode release 2020d
      (Tom Lane)
</span>
タイムゾーンライブラリのコピーをIANA tzcode release 2020dに同期しました。
(Tom Lane)
     </p><p>
<span class="original">
      This absorbs upstream's change of &lt;application&gt;zic&lt;/application&gt;'s
      default output option from &lt;quote&gt;fat&lt;/quote&gt;
      to &lt;quote&gt;slim&lt;/quote&gt;.  That's just cosmetic for our purposes, as
      we continue to select the &lt;quote&gt;fat&lt;/quote&gt; mode in pre-v13
      branches.  This change also ensures
      that &lt;function&gt;strftime()&lt;/function&gt; does not
      change &lt;varname&gt;errno&lt;/varname&gt; unless it fails.
</span>
これはアップストリームの<span class="application">zic</span>のデフォルト出力オプションの<span class="quote">「<span class="quote">fat</span>」</span>から<span class="quote">「<span class="quote">slim</span>」</span>への変更を吸収します。
V13より前のブランチでは引き続き<span class="quote">「<span class="quote">fat</span>」</span>モードを選択するため、これは単に見た目を整えるためのものです。
この変更は<code class="function">strftime()</code>が、それが失敗しない限り、<code class="varname">errno</code>を変更しないことも保証します。
     </p></li></ul></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release.html" title="付録E リリースノート">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="release-13.html" title="E.2. リリース13">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">付録E リリースノート </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.1文書">ホーム</a></td><td width="40%" align="right" valign="top"> E.2. リリース13</td></tr></table></div></body></html>