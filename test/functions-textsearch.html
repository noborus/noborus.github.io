<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.13. テキスト検索関数と演算子</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="functions-net.html" title="9.12. ネットワークアドレス関数と演算子" /><link rel="next" href="functions-uuid.html" title="9.14. UUID関数" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 16.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="functions.html" title="第9章 関数と演算子">第9章 関数と演算子</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-net.html" title="9.12. ネットワークアドレス関数と演算子">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="第9章 関数と演算子">上へ</a></td><td width="60%" align="center">9.13. テキスト検索関数と演算子</td><td width="20%" align="right"> <a accesskey="n" href="functions-uuid.html" title="9.14. UUID関数">次へ</a></td></tr></table><hr /></div><div class="sect1" id="FUNCTIONS-TEXTSEARCH"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.13. テキスト検索関数と演算子 <a href="#FUNCTIONS-TEXTSEARCH" class="id_link">#</a></h2></div></div></div><!--
  <title>Text Search Functions and Operators</title>
--><a id="id-1.5.8.21.2" class="indexterm"></a><a id="id-1.5.8.21.3" class="indexterm"></a><a id="id-1.5.8.21.4" class="indexterm"></a><a id="id-1.5.8.21.5" class="indexterm"></a><p>
<!--
   <xref linkend="textsearch-operators-table"/>,
   <xref linkend="textsearch-functions-table"/> and
   <xref linkend="textsearch-functions-debug-table"/>
   summarize the functions and operators that are provided
   for full text searching.  See <xref linkend="textsearch"/> for a detailed
   explanation of <productname>PostgreSQL</productname>'s text search
   facility.
-->
<a class="xref" href="functions-textsearch.html#TEXTSEARCH-OPERATORS-TABLE" title="表9.42 テキスト検索演算子">表 9.42</a>、<a class="xref" href="functions-textsearch.html#TEXTSEARCH-FUNCTIONS-TABLE" title="表9.43 テキスト検索関数">表 9.43</a>および<a class="xref" href="functions-textsearch.html#TEXTSEARCH-FUNCTIONS-DEBUG-TABLE" title="表9.44 テキスト検索デバッグ関数">表 9.44</a>は全文検索用に提供されている関数と演算子を要約しています。<span class="productname">PostgreSQL</span>のテキスト検索機能の詳細は<a class="xref" href="textsearch.html" title="第12章 全文検索">第12章</a>を参照してください。
  </p><div class="table" id="TEXTSEARCH-OPERATORS-TABLE"><p class="title"><strong>表9.42 テキスト検索演算子</strong></p><div class="table-contents"><!--
    <title>Text Search Operators</title>
--><table class="table" summary="テキスト検索演算子" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<!--
        Operator
-->
演算子
       </p>
       <p>
<!--
        Description
-->
説明
       </p>
       <p>
<!--
        Example(s)
-->
例
       </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsvector</code> <code class="literal">@@</code> <code class="type">tsquery</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">@@</code> <code class="type">tsvector</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p>
<!--
        Does <type>tsvector</type> match <type>tsquery</type>?
        (The arguments can be given in either order.)
-->
<code class="type">tsvector</code>が<code class="type">tsquery</code>の条件に合うか？
（引数は任意の順で与えることができます。）
       </p>
       <p>
        <code class="literal">to_tsvector('fat cats ate rats') @@ to_tsquery('cat &amp; rat')</code>
        → <code class="returnvalue">t</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">text</code> <code class="literal">@@</code> <code class="type">tsquery</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p>
<!--
        Does text string, after implicit invocation
        of <function>to_tsvector()</function>, match <type>tsquery</type>?
-->
テキスト文字列は<code class="function">to_tsvector()</code>の暗黙的な呼び出し後に<code class="type">tsquery</code>の条件に合うか？
       </p>
       <p>
        <code class="literal">'fat cats ate rats' @@ to_tsquery('cat &amp; rat')</code>
        → <code class="returnvalue">t</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsvector</code> <code class="literal">@@@</code> <code class="type">tsquery</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">@@@</code> <code class="type">tsvector</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p>
<!--
        This is a deprecated synonym for <literal>@@</literal>.
-->
<code class="literal">@@</code>に対する廃止予定の同義語です。
       </p>
       <p>
        <code class="literal">to_tsvector('fat cats ate rats') @@@ to_tsquery('cat &amp; rat')</code>
        → <code class="returnvalue">t</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsvector</code> <code class="literal">||</code> <code class="type">tsvector</code>
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Concatenates two <type>tsvector</type>s.  If both inputs contain
        lexeme positions, the second input's positions are adjusted
        accordingly.
-->
2つの<code class="type">tsvector</code>を連結します。
両方の入力が語彙素の位置を含んでいるなら2番目の入力の位置はそれにしたがって調整されます。
       </p>
       <p>
        <code class="literal">'a:1 b:2'::tsvector || 'c:1 d:2 b:3'::tsvector</code>
        → <code class="returnvalue">'a':1 'b':2,5 'c':3 'd':4</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">&amp;&amp;</code> <code class="type">tsquery</code>
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        ANDs two <type>tsquery</type>s together, producing a query that
        matches documents that match both input queries.
-->
2つの<code class="type">tsquery</code>の論理積を取り、両方の入力問い合わせにマッチする文書にマッチする問い合わせを生成します。
       </p>
       <p>
        <code class="literal">'fat | rat'::tsquery &amp;&amp; 'cat'::tsquery</code>
        → <code class="returnvalue">( 'fat' | 'rat' ) &amp; 'cat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">||</code> <code class="type">tsquery</code>
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        ORs two <type>tsquery</type>s together, producing a query that
        matches documents that match either input query.
-->
2つの<code class="type">tsquery</code>の論理和を取り、どちらかの入力問い合わせにマッチする文書にマッチする問い合わせを生成します。
       </p>
       <p>
        <code class="literal">'fat | rat'::tsquery || 'cat'::tsquery</code>
        → <code class="returnvalue">'fat' | 'rat' | 'cat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="literal">!!</code> <code class="type">tsquery</code>
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Negates a <type>tsquery</type>, producing a query that matches
        documents that do not match the input query.
-->
<code class="type">tsquery</code>の否定を取り、入力問い合わせにマッチしない文書にマッチする問い合わせを生成します。
       </p>
       <p>
        <code class="literal">!! 'cat'::tsquery</code>
        → <code class="returnvalue">!'cat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">&lt;-&gt;</code> <code class="type">tsquery</code>
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Constructs a phrase query, which matches if the two input queries
        match at successive lexemes.
-->
2つの入力問い合わせが連続する語彙素にマッチする場合にマッチする語句問い合わせを作成します。
       </p>
       <p>
        <code class="literal">to_tsquery('fat') &lt;-&gt; to_tsquery('rat')</code>
        → <code class="returnvalue">'fat' &lt;-&gt; 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">@&gt;</code> <code class="type">tsquery</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p>
<!--
        Does first <type>tsquery</type> contain the second?  (This considers
        only whether all the lexemes appearing in one query appear in the
        other, ignoring the combining operators.)
-->
最初の<code class="type">tsquery</code>は2番目を含んでいるか？
（これは結合演算子を無視して、単に一方の問い合わせ中のすべての語彙素が他方に現れるかどうかだけを考慮します。）
       </p>
       <p>
        <code class="literal">'cat'::tsquery @&gt; 'cat &amp; rat'::tsquery</code>
        → <code class="returnvalue">f</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="type">tsquery</code> <code class="literal">&lt;@</code> <code class="type">tsquery</code>
        → <code class="returnvalue">boolean</code>
       </p>
       <p>
<!--
        Is first <type>tsquery</type> contained in the second?  (This
        considers only whether all the lexemes appearing in one query appear
        in the other, ignoring the combining operators.)
-->
最初の<code class="type">tsquery</code>は2番目に含まれているか？
（これは結合演算子を無視して、単に一方の問い合わせ中のすべての語彙素が他方に現れるかどうかだけを考慮します。）
       </p>
       <p>
        <code class="literal">'cat'::tsquery &lt;@ 'cat &amp; rat'::tsquery</code>
        → <code class="returnvalue">t</code>
       </p>
       <p>
        <code class="literal">'cat'::tsquery &lt;@ '!cat &amp; rat'::tsquery</code>
        → <code class="returnvalue">t</code>
       </p></td></tr></tbody></table></div></div><br class="table-break" /><p>
<!--
     In addition to these specialized operators, the usual comparison
     operators shown in <xref linkend="functions-comparison-op-table"/> are
     available for types <type>tsvector</type> and <type>tsquery</type>.
     These are not very
     useful for text searching but allow, for example, unique indexes to be
     built on columns of these types.
-->
表に示された演算子に加え、<a class="xref" href="functions-comparison.html#FUNCTIONS-COMPARISON-OP-TABLE" title="表9.1 比較演算子">表 9.1</a>で示す通常の比較演算子型<code class="type">tsvector</code>および<code class="type">tsquery</code>に対して利用できます。
これらはテキスト検索に対してそれほど有用ではありませんが、例えばこれらの型の列に一意インデックスを作成することを可能にします。
    </p><div class="table" id="TEXTSEARCH-FUNCTIONS-TABLE"><p class="title"><strong>表9.43 テキスト検索関数</strong></p><div class="table-contents"><!--
    <title>Text Search Functions</title>
--><table class="table" summary="テキスト検索関数" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<!--
        Function
-->
関数
       </p>
       <p>
<!--
        Description
-->
説明
       </p>
       <p>
<!--
        Example(s)
-->
例
       </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.1.1.1.1" class="indexterm"></a>
        <code class="function">array_to_tsvector</code> ( <code class="type">text[]</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Converts an array of text strings to a <type>tsvector</type>.
        The given strings are used as lexemes as-is, without further
        processing.  Array elements must not be empty strings
        or <literal>NULL</literal>.
-->
文字列の配列を<code class="type">tsvector</code>に変換します。
与えられた文字列はそれ以上処理せずに語彙素としてそのまま使用されます。
配列要素は空文字列や<code class="literal">NULL</code>であってはなりません。
       </p>
       <p>
        <code class="literal">array_to_tsvector('{fat,cat,rat}'::text[])</code>
        → <code class="returnvalue">'cat' 'fat' 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.2.1.1.1" class="indexterm"></a>
        <code class="function">get_current_ts_config</code> ( )
        → <code class="returnvalue">regconfig</code>
       </p>
       <p>
<!--
        Returns the OID of the current default text search configuration
        (as set by <xref linkend="guc-default-text-search-config"/>).
-->
（<a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TEXT-SEARCH-CONFIG">default_text_search_config</a>で設定された）現在のテキスト検索設定のOIDを返します。
       </p>
       <p>
        <code class="literal">get_current_ts_config()</code>
        → <code class="returnvalue">english</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.3.1.1.1" class="indexterm"></a>
        <code class="function">length</code> ( <code class="type">tsvector</code> )
        → <code class="returnvalue">integer</code>
       </p>
       <p>
<!--
        Returns the number of lexemes in the <type>tsvector</type>.
-->
<code class="type">tsvector</code>にある語彙素の数を返します。
       </p>
       <p>
        <code class="literal">length('fat:2,4 cat:3 rat:5A'::tsvector)</code>
        → <code class="returnvalue">3</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.4.1.1.1" class="indexterm"></a>
        <code class="function">numnode</code> ( <code class="type">tsquery</code> )
        → <code class="returnvalue">integer</code>
       </p>
       <p>
<!--
        Returns the number of lexemes plus operators in
        the <type>tsquery</type>.
-->
<code class="type">tsquery</code>にある語彙素の数と演算子の数の和を返します。
       </p>
       <p>
        <code class="literal">numnode('(fat &amp; rat) | cat'::tsquery)</code>
        → <code class="returnvalue">5</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.5.1.1.1" class="indexterm"></a>
        <code class="function">plainto_tsquery</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>query</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Converts text to a <type>tsquery</type>, normalizing words according to
        the specified or default configuration.  Any punctuation in the string
        is ignored (it does not determine query operators).  The resulting
        query matches documents containing all non-stopwords in the text.
-->
指定されたデフォルト設定にしたがって単語を正規化してテキストを<code class="type">tsquery</code>に変換します。
文字列中の句読点はすべて無視されます。（句読点は問い合わせ演算子を決定しません。）
結果の問い合わせはテキスト中の非ストップワードをすべて含む文書にマッチします。
       </p>
       <p>
        <code class="literal">plainto_tsquery('english', 'The Fat Rats')</code>
        → <code class="returnvalue">'fat' &amp; 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.6.1.1.1" class="indexterm"></a>
        <code class="function">phraseto_tsquery</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>query</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Converts text to a <type>tsquery</type>, normalizing words according to
        the specified or default configuration.  Any punctuation in the string
        is ignored (it does not determine query operators).  The resulting
        query matches phrases containing all non-stopwords in the text.
-->
指定されたデフォルト設定にしたがって単語を正規化してテキストを<code class="type">tsquery</code>に変換します。
文字列中の句読点はすべて無視されます。（句読点は問い合わせ演算子を決定しません。）
結果の問い合わせはテキスト中の非ストップワードをすべて含む句にマッチします。
       </p>
       <p>
        <code class="literal">phraseto_tsquery('english', 'The Fat Rats')</code>
        → <code class="returnvalue">'fat' &lt;-&gt; 'rat'</code>
       </p>
       <p>
        <code class="literal">phraseto_tsquery('english', 'The Cat and Rats')</code>
        → <code class="returnvalue">'cat' &lt;2&gt; 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.7.1.1.1" class="indexterm"></a>
        <code class="function">websearch_to_tsquery</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>query</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Converts text to a <type>tsquery</type>, normalizing words according
        to the specified or default configuration.  Quoted word sequences are
        converted to phrase tests.  The word <quote>or</quote> is understood
        as producing an OR operator, and a dash produces a NOT operator;
        other punctuation is ignored.
        This approximates the behavior of some common web search tools.
-->
指定されたデフォルト設定にしたがって単語を正規化してテキストを<code class="type">tsquery</code>に変換します。
引用符で囲まれた一連の語は句の検査に変換されます。
<span class="quote">「<span class="quote">or</span>」</span>はOR演算子を生成するものとして扱われ、ダッシュはNOT演算子として扱われます。
それ以外の句読点は無視されます。
これにより通常のweb検索ツールに近い振る舞いをします。
       </p>
       <p>
        <code class="literal">websearch_to_tsquery('english', '"fat rat" or cat dog')</code>
        → <code class="returnvalue">'fat' &lt;-&gt; 'rat' | 'cat' &amp; 'dog'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.8.1.1.1" class="indexterm"></a>
        <code class="function">querytree</code> ( <code class="type">tsquery</code> )
        → <code class="returnvalue">text</code>
       </p>
       <p>
<!--
        Produces a representation of the indexable portion of
        a <type>tsquery</type>.  A result that is empty or
        just <literal>T</literal> indicates a non-indexable query.
-->
<code class="type">tsquery</code>のインデックス付可能な部分の表現を生成します。
空あるいは<code class="literal">T</code>はインデックス付できる部分が無い問い合わせであることを意味します。
       </p>
       <p>
        <code class="literal">querytree('foo &amp; ! bar'::tsquery)</code>
        → <code class="returnvalue">'foo'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.9.1.1.1" class="indexterm"></a>
        <code class="function">setweight</code> ( <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>, <em class="parameter"><code>weight</code></em> <code class="type">"char"</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Assigns the specified <parameter>weight</parameter> to each element
        of the <parameter>vector</parameter>.
-->
<em class="parameter"><code>vector</code></em>の各要素に指定した<em class="parameter"><code>weight</code></em>を割り当てます。
       </p>
       <p>
        <code class="literal">setweight('fat:2,4 cat:3 rat:5B'::tsvector, 'A')</code>
        → <code class="returnvalue">'cat':3A 'fat':2A,4A 'rat':5A</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.10.1.1.1" class="indexterm"></a>
        <code class="function">setweight</code> ( <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>, <em class="parameter"><code>weight</code></em> <code class="type">"char"</code>, <em class="parameter"><code>lexemes</code></em> <code class="type">text[]</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Assigns the specified <parameter>weight</parameter> to elements
        of the <parameter>vector</parameter> that are listed
        in <parameter>lexemes</parameter>.
        The strings in <parameter>lexemes</parameter> are taken as lexemes
        as-is, without further processing.  Strings that do not match any
        lexeme in <parameter>vector</parameter> are ignored.
-->
<em class="parameter"><code>vector</code></em>の各要素に<em class="parameter"><code>lexemes</code></em>で列挙した<em class="parameter"><code>weight</code></em>を割り当てます。
<em class="parameter"><code>語彙素</code></em>の文字列は、処理されることなく、そのまま語彙素として扱われます。
<em class="parameter"><code>ベクトル</code></em>のどの語彙素にも一致しない文字列は無視されます。
       </p>
       <p>
        <code class="literal">setweight('fat:2,4 cat:3 rat:5,6B'::tsvector, 'A', '{cat,rat}')</code>
        → <code class="returnvalue">'cat':3A 'fat':2,4 'rat':5A,6A</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.11.1.1.1" class="indexterm"></a>
        <code class="function">strip</code> ( <code class="type">tsvector</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Removes positions and weights from the <type>tsvector</type>.
-->
位置と重みを<code class="type">tsvector</code>から削除します。
       </p>
       <p>
        <code class="literal">strip('fat:2,4 cat:3 rat:5A'::tsvector)</code>
        → <code class="returnvalue">'cat' 'fat' 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.12.1.1.1" class="indexterm"></a>
        <code class="function">to_tsquery</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>query</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Converts text to a <type>tsquery</type>, normalizing words according to
        the specified or default configuration.  The words must be combined
        by valid <type>tsquery</type> operators.
-->
指定されたデフォルト設定にしたがって単語を正規化してテキストを<code class="type">tsquery</code>に変換します。
単語は有効な<code class="type">tsquery</code>演算子と組み合わされていなければなりません。
       </p>
       <p>
        <code class="literal">to_tsquery('english', 'The &amp; Fat &amp; Rats')</code>
        → <code class="returnvalue">'fat' &amp; 'rat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.13.1.1.1" class="indexterm"></a>
        <code class="function">to_tsvector</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
         <em class="parameter"><code>document</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Converts text to a <type>tsvector</type>, normalizing words according
        to the specified or default configuration.  Position information is
        included in the result.
-->
指定されたデフォルト設定にしたがって単語を正規化してテキストを<code class="type">tsvector</code>に変換します。
位置情報が結果に含まれます。
       </p>
       <p>
        <code class="literal">to_tsvector('english', 'The Fat Rats')</code>
        → <code class="returnvalue">'fat':2 'rat':3</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">to_tsvector</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">json</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p class="func_signature">
        <code class="function">to_tsvector</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">jsonb</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Converts each string value in the JSON document to
        a <type>tsvector</type>, normalizing words according to the specified
        or default configuration.  The results are then concatenated in
        document order to produce the output.  Position information is
        generated as though one stopword exists between each pair of string
        values.  (Beware that <quote>document order</quote> of the fields of a
        JSON object is implementation-dependent when the input
        is <type>jsonb</type>; observe the difference in the examples.)
-->
指定されたデフォルト設定にしたがって正規化してJSON文書中の文字列値を<code class="type">tsvector</code>に変換します。
そして結果は文書中の順序にしたがって結合されます。
位置情報は、あたかも文字列値の各々の対の間にストップワードが存在するかのように生成されます。
（入力が<code class="type">jsonb</code>の場合、JSONオブジェクトのフィールドの<span class="quote">「<span class="quote">ドキュメント順</span>」</span>は実装依存であることに注意してください。例中の差異を見てください。）
       </p>
       <p>
        <code class="literal">to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::json)</code>
        → <code class="returnvalue">'dog':5 'fat':2 'rat':3</code>
       </p>
       <p>
        <code class="literal">to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::jsonb)</code>
        → <code class="returnvalue">'dog':1 'fat':4 'rat':5</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.15.1.1.1" class="indexterm"></a>
        <code class="function">json_to_tsvector</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">json</code>,
        <em class="parameter"><code>filter</code></em> <code class="type">jsonb</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.15.1.2.1" class="indexterm"></a>
        <code class="function">jsonb_to_tsvector</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">jsonb</code>,
        <em class="parameter"><code>filter</code></em> <code class="type">jsonb</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Selects each item in the JSON document that is requested by
        the <parameter>filter</parameter> and converts each one to
        a <type>tsvector</type>, normalizing words according to the specified
        or default configuration.  The results are then concatenated in
        document order to produce the output.  Position information is
        generated as though one stopword exists between each pair of selected
        items.  (Beware that <quote>document order</quote> of the fields of a
        JSON object is implementation-dependent when the input
        is <type>jsonb</type>.)
        The <parameter>filter</parameter> must be a <type>jsonb</type>
        array containing zero or more of these keywords:
        <literal>"string"</literal> (to include all string values),
        <literal>"numeric"</literal> (to include all numeric values),
        <literal>"boolean"</literal> (to include all boolean values),
        <literal>"key"</literal> (to include all keys), or
        <literal>"all"</literal> (to include all the above).
        As a special case, the <parameter>filter</parameter> can also be a
        simple JSON value that is one of these keywords.
-->
<em class="parameter"><code>filter</code></em>によって要求された項目をJSON文書から検索し、指定されたデフォルト設定にしたがって正規化して<code class="type">tsvector</code>に変換します。
そして結果は文書中の順序にしたがって結合されます。
位置情報は、あたかも文字列値の各々の対の間にストップワードが存在するかのように生成されます。
（入力が<code class="type">jsonb</code>の場合、JSONオブジェクトのフィールドの<span class="quote">「<span class="quote">ドキュメント順</span>」</span>は実装依存であることに注意してください。例中の差異を見てください。）
<em class="parameter"><code>filter</code></em>は0個以上の以下のキーワードを含む<code class="type">jsonb</code>の配列でなければなりません：
<code class="literal">"string"</code> (すべての文字列値を含めます)、<code class="literal">"numeric"</code> (すべての数値を含めます)、<code class="literal">"boolean"</code> (すべての論理値を含めます)、<code class="literal">"key"</code> (すべてのキーを含めます)、<code class="literal">"all"</code> (すべてを含めます)。
特別な場合として、<em class="parameter"><code>filter</code></em>はこれらのキーワードのどれかである単純なJSON値とすることもできます。
       </p>
       <p>
        <code class="literal">json_to_tsvector('english', '{"a": "The Fat Rats", "b": 123}'::json, '["string", "numeric"]')</code>
        → <code class="returnvalue">'123':5 'fat':2 'rat':3</code>
       </p>
       <p>
        <code class="literal">json_to_tsvector('english', '{"cat": "The Fat Rats", "dog": 123}'::json, '"all"')</code>
        → <code class="returnvalue">'123':9 'cat':1 'dog':7 'fat':4 'rat':5</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.16.1.1.1" class="indexterm"></a>
        <code class="function">ts_delete</code> ( <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>, <em class="parameter"><code>lexeme</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Removes any occurrence of the given <parameter>lexeme</parameter>
        from the <parameter>vector</parameter>.
        The <parameter>lexeme</parameter> string is treated as a lexeme as-is,
        without further processing.
-->
<em class="parameter"><code>vector</code></em>から与えられた<em class="parameter"><code>lexeme</code></em>を削除します。
<em class="parameter"><code>lexeme</code></em>文字列は、それ以上の処理を行わずに、現状のままのlexemeとして扱われます。
       </p>
       <p>
        <code class="literal">ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, 'fat')</code>
        → <code class="returnvalue">'cat':3 'rat':5A</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">ts_delete</code> ( <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>, <em class="parameter"><code>lexemes</code></em> <code class="type">text[]</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Removes any occurrences of the lexemes
        in <parameter>lexemes</parameter>
        from the <parameter>vector</parameter>.
        The strings in <parameter>lexemes</parameter> are taken as lexemes
        as-is, without further processing.  Strings that do not match any
        lexeme in <parameter>vector</parameter> are ignored.
-->
<em class="parameter"><code>vector</code></em>から<em class="parameter"><code>lexemes</code></em>中のすべての語彙素を削除します。
<em class="parameter"><code>lexemes</code></em>内の文字列は、それ以上の処理を行わずに、そのまま語彙素として扱われます。
<em class="parameter"><code>vector</code></em>内のどの語彙素とも一致しない文字列は無視されます。
       </p>
       <p>
        <code class="literal">ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, ARRAY['fat','rat'])</code>
        → <code class="returnvalue">'cat':3</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.18.1.1.1" class="indexterm"></a>
        <code class="function">ts_filter</code> ( <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>, <em class="parameter"><code>weights</code></em> <code class="type">"char"[]</code> )
        → <code class="returnvalue">tsvector</code>
       </p>
       <p>
<!--
        Selects only elements with the given <parameter>weights</parameter>
        from the <parameter>vector</parameter>.
-->
<em class="parameter"><code>vector</code></em>から<em class="parameter"><code>weights</code></em>を持つ要素だけを検索します。
       </p>
       <p>
        <code class="literal">ts_filter('fat:2,4 cat:3b,7c rat:5A'::tsvector, '{a,b}')</code>
        → <code class="returnvalue">'cat':3B 'rat':5A</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.19.1.1.1" class="indexterm"></a>
        <code class="function">ts_headline</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">text</code>,
        <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>
        [<span class="optional">, <em class="parameter"><code>options</code></em> <code class="type">text</code> </span>] )
        → <code class="returnvalue">text</code>
       </p>
       <p>
<!--
        Displays, in an abbreviated form, the match(es) for
        the <parameter>query</parameter> in
        the <parameter>document</parameter>, which must be raw text not
        a <type>tsvector</type>.  Words in the document are normalized
        according to the specified or default configuration before matching to
        the query.  Use of this function is discussed in
        <xref linkend="textsearch-headline"/>, which also describes the
        available <parameter>options</parameter>.
-->
<em class="parameter"><code>document</code></em>中の<em class="parameter"><code>query</code></em>にマッチするものを省略形で表示します。
<em class="parameter"><code>document</code></em>は<code class="type">tsvector</code>ではなくて生のテキストでなければなりません。
問い合わせのマッチ処理を行う前に、指定した、あるいはデフォルトの設定にしたがって単語が正規化されます。
<a class="xref" href="textsearch-controls.html#TEXTSEARCH-HEADLINE" title="12.3.4. 結果の強調">12.3.4</a>にこの関数の使い方が記述されています。可能な<em class="parameter"><code>options</code></em>についても言及されています。
       </p>
       <p>
        <code class="literal">ts_headline('The fat cat ate the rat.', 'cat')</code>
        → <code class="returnvalue">The fat &lt;b&gt;cat&lt;/b&gt; ate the rat.</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">ts_headline</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">json</code>,
        <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>
        [<span class="optional">, <em class="parameter"><code>options</code></em> <code class="type">text</code> </span>] )
        → <code class="returnvalue">text</code>
       </p>
       <p class="func_signature">
        <code class="function">ts_headline</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">jsonb</code>,
        <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>
        [<span class="optional">, <em class="parameter"><code>options</code></em> <code class="type">text</code> </span>] )
        → <code class="returnvalue">text</code>
       </p>
       <p>
<!--
        Displays, in an abbreviated form, match(es) for
        the <parameter>query</parameter> that occur in string values
        within the JSON <parameter>document</parameter>.
        See <xref linkend="textsearch-headline"/> for more details.
-->
JSON <em class="parameter"><code>document</code></em>中に出現する文字列値に<em class="parameter"><code>query</code></em>がマッチしたものを省略形で表示します。
詳細は<a class="xref" href="textsearch-controls.html#TEXTSEARCH-HEADLINE" title="12.3.4. 結果の強調">12.3.4</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_headline('{"cat":"raining cats and dogs"}'::jsonb, 'cat')</code>
        → <code class="returnvalue">{"cat": "raining &lt;b&gt;cats&lt;/b&gt; and dogs"}</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.21.1.1.1" class="indexterm"></a>
        <code class="function">ts_rank</code> (
        [<span class="optional"> <em class="parameter"><code>weights</code></em> <code class="type">real[]</code>, </span>]
        <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>,
        <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>
        [<span class="optional">, <em class="parameter"><code>normalization</code></em> <code class="type">integer</code> </span>] )
        → <code class="returnvalue">real</code>
       </p>
       <p>
<!--
        Computes a score showing how well
        the <parameter>vector</parameter> matches
        the <parameter>query</parameter>.  See
        <xref linkend="textsearch-ranking"/> for details.
-->
<em class="parameter"><code>vector</code></em>が<em class="parameter"><code>query</code></em>にどれほどマッチするかのスコアを計算します。
詳細は<a class="xref" href="textsearch-controls.html#TEXTSEARCH-RANKING" title="12.3.3. 検索結果のランキング">12.3.3</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_rank(to_tsvector('raining cats and dogs'), 'cat')</code>
        → <code class="returnvalue">0.06079271</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.22.1.1.1" class="indexterm"></a>
        <code class="function">ts_rank_cd</code> (
        [<span class="optional"> <em class="parameter"><code>weights</code></em> <code class="type">real[]</code>, </span>]
        <em class="parameter"><code>vector</code></em> <code class="type">tsvector</code>,
        <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>
        [<span class="optional">, <em class="parameter"><code>normalization</code></em> <code class="type">integer</code> </span>] )
        → <code class="returnvalue">real</code>
       </p>
       <p>
<!--
        Computes a score showing how well
        the <parameter>vector</parameter> matches
        the <parameter>query</parameter>, using a cover density
        algorithm.  See <xref linkend="textsearch-ranking"/> for details.
-->
被覆密度アルゴリズムを用いて<em class="parameter"><code>vector</code></em>が<em class="parameter"><code>query</code></em>にどれほどマッチするかのスコアを計算します。
詳細は<a class="xref" href="textsearch-controls.html#TEXTSEARCH-RANKING" title="12.3.3. 検索結果のランキング">12.3.3</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_rank_cd(to_tsvector('raining cats and dogs'), 'cat')</code>
        → <code class="returnvalue">0.1</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.23.1.1.1" class="indexterm"></a>
        <code class="function">ts_rewrite</code> ( <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>,
        <em class="parameter"><code>target</code></em> <code class="type">tsquery</code>,
        <em class="parameter"><code>substitute</code></em> <code class="type">tsquery</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Replaces occurrences of <parameter>target</parameter>
        with <parameter>substitute</parameter>
        within the <parameter>query</parameter>.
        See <xref linkend="textsearch-query-rewriting"/> for details.
-->
<em class="parameter"><code>query</code></em>中に出現する<em class="parameter"><code>target</code></em>を<em class="parameter"><code>substitute</code></em>に置き換えます。
詳細は<a class="xref" href="textsearch-features.html#TEXTSEARCH-QUERY-REWRITING" title="12.4.2.1. 問い合わせの書き換え">12.4.2.1</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_rewrite('a &amp; b'::tsquery, 'a'::tsquery, 'foo|bar'::tsquery)</code>
        → <code class="returnvalue">'b' &amp; ( 'foo' | 'bar' )</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">ts_rewrite</code> ( <em class="parameter"><code>query</code></em> <code class="type">tsquery</code>,
        <em class="parameter"><code>select</code></em> <code class="type">text</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Replaces portions of the <parameter>query</parameter> according to
        target(s) and substitute(s) obtained by executing
        a <command>SELECT</command> command.
        See <xref linkend="textsearch-query-rewriting"/> for details.
-->
<code class="command">SELECT</code>を実行して取得したターゲットと代替を使用して<em class="parameter"><code>query</code></em>の一部を置き換えます。
詳細は<a class="xref" href="textsearch-features.html#TEXTSEARCH-QUERY-REWRITING" title="12.4.2.1. 問い合わせの書き換え">12.4.2.1</a>を見てください。
       </p>
       <p>
        <code class="literal">SELECT ts_rewrite('a &amp; b'::tsquery, 'SELECT t,s FROM aliases')</code>
        → <code class="returnvalue">'b' &amp; ( 'foo' | 'bar' )</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.25.1.1.1" class="indexterm"></a>
        <code class="function">tsquery_phrase</code> ( <em class="parameter"><code>query1</code></em> <code class="type">tsquery</code>, <em class="parameter"><code>query2</code></em> <code class="type">tsquery</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Constructs a phrase query that searches
        for matches of <parameter>query1</parameter>
        and <parameter>query2</parameter> at successive lexemes (same
        as <literal>&lt;-&gt;</literal> operator).
-->
連続する語彙素で<em class="parameter"><code>query1</code></em>と<em class="parameter"><code>query2</code></em>のマッチを検索する語句問い合わせを作成します。
（<code class="literal">&lt;-&gt;</code>演算子と同じです。）
       </p>
       <p>
        <code class="literal">tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'))</code>
        → <code class="returnvalue">'fat' &lt;-&gt; 'cat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">tsquery_phrase</code> ( <em class="parameter"><code>query1</code></em> <code class="type">tsquery</code>, <em class="parameter"><code>query2</code></em> <code class="type">tsquery</code>, <em class="parameter"><code>distance</code></em> <code class="type">integer</code> )
        → <code class="returnvalue">tsquery</code>
       </p>
       <p>
<!--
        Constructs a phrase query that searches
        for matches of <parameter>query1</parameter> and
        <parameter>query2</parameter> that occur exactly
        <parameter>distance</parameter> lexemes apart.
-->
語彙素が正確に<em class="parameter"><code>distance</code></em>だけ離れている<em class="parameter"><code>query1</code></em>と<em class="parameter"><code>query2</code></em>へのマッチを検索する語句問い合わせを作成します。
       </p>
       <p>
        <code class="literal">tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'), 10)</code>
        → <code class="returnvalue">'fat' &lt;10&gt; 'cat'</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.27.1.1.1" class="indexterm"></a>
        <code class="function">tsvector_to_array</code> ( <code class="type">tsvector</code> )
        → <code class="returnvalue">text[]</code>
       </p>
       <p>
<!--
        Converts a <type>tsvector</type> to an array of lexemes.
-->
<code class="type">tsvector</code>を語彙素の配列に変換します。
       </p>
       <p>
        <code class="literal">tsvector_to_array('fat:2,4 cat:3 rat:5A'::tsvector)</code>
        → <code class="returnvalue">{cat,fat,rat}</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.9.2.2.28.1.1.1" class="indexterm"></a>
        <code class="function">unnest</code> ( <code class="type">tsvector</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>lexeme</code></em> <code class="type">text</code>,
        <em class="parameter"><code>positions</code></em> <code class="type">smallint[]</code>,
        <em class="parameter"><code>weights</code></em> <code class="type">text</code> )
       </p>
       <p>
<!--
        Expands a <type>tsvector</type> into a set of rows, one per lexeme.
-->
1行につき1語彙素で<code class="type">tsvector</code>を行の集合に変換します。
       </p>
       <p>
        <code class="literal">select * from unnest('cat:3 fat:2,4 rat:5A'::tsvector)</code>
        → <code class="returnvalue"></code>
</p><pre class="programlisting">
 lexeme | positions | weights
--------+-----------+---------
 cat    | {3}       | {D}
 fat    | {2,4}     | {D,D}
 rat    | {5}       | {A}
</pre><p>
       </p></td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">注記</h3><p>
<!--
    All the text search functions that accept an optional <type>regconfig</type>
    argument will use the configuration specified by
    <xref linkend="guc-default-text-search-config"/>
    when that argument is omitted.
-->
オプションの<code class="type">regconfig</code>引数を受け付ける全てのテキスト検索関数は、その引数が省略された場合<a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TEXT-SEARCH-CONFIG">default_text_search_config</a>で指定された設定を使用します。
   </p></div><p>
<!--
   The functions in
   <xref linkend="textsearch-functions-debug-table"/>
   are listed separately because they are not usually used in everyday text
   searching operations.  They are primarily helpful for development and
   debugging of new text search configurations.
-->
<a class="xref" href="functions-textsearch.html#TEXTSEARCH-FUNCTIONS-DEBUG-TABLE" title="表9.44 テキスト検索デバッグ関数">表 9.44</a>の関数は、日常のテキスト検索操作では通常使用されないので、別の表にしました。
これらは主に新しいテキスト検索設定の開発およびデバッグに役立ちます。
  </p><div class="table" id="TEXTSEARCH-FUNCTIONS-DEBUG-TABLE"><p class="title"><strong>表9.44 テキスト検索デバッグ関数</strong></p><div class="table-contents"><!--
    <title>Text Search Debugging Functions</title>
--><table class="table" summary="テキスト検索デバッグ関数" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<!--
        Function
-->
関数
       </p>
       <p>
<!--
        Description
-->
説明
       </p>
       <p>
<!--
        Example(s)
-->
例
       </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.12.2.2.1.1.1.1" class="indexterm"></a>
        <code class="function">ts_debug</code> (
        [<span class="optional"> <em class="parameter"><code>config</code></em> <code class="type">regconfig</code>, </span>]
        <em class="parameter"><code>document</code></em> <code class="type">text</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>alias</code></em> <code class="type">text</code>,
        <em class="parameter"><code>description</code></em> <code class="type">text</code>,
        <em class="parameter"><code>token</code></em> <code class="type">text</code>,
        <em class="parameter"><code>dictionaries</code></em> <code class="type">regdictionary[]</code>,
        <em class="parameter"><code>dictionary</code></em> <code class="type">regdictionary</code>,
        <em class="parameter"><code>lexemes</code></em> <code class="type">text[]</code> )
       </p>
       <p>
<!--
        Extracts and normalizes tokens from
        the <parameter>document</parameter> according to the specified or
        default text search configuration, and returns information about how
        each token was processed.
        See <xref linkend="textsearch-configuration-testing"/> for details.
-->
指定した、あるいはデフォルトの設定にしたがって<em class="parameter"><code>document</code></em>から正規化されたトークンを取り出し、各トークンがどのように処理されたかの情報を返します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-CONFIGURATION-TESTING" title="12.8.1. 設定のテスト">12.8.1</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_debug('english', 'The Brightest supernovaes')</code>
        → <code class="returnvalue">(asciiword,"Word, all ASCII",The,{english_stem},english_stem,{}) ...</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.12.2.2.2.1.1.1" class="indexterm"></a>
        <code class="function">ts_lexize</code> ( <em class="parameter"><code>dict</code></em> <code class="type">regdictionary</code>, <em class="parameter"><code>token</code></em> <code class="type">text</code> )
        → <code class="returnvalue">text[]</code>
       </p>
       <p>
<!--
        Returns an array of replacement lexemes if the input token is known to
        the dictionary, or an empty array if the token is known to the
        dictionary but it is a stop word, or NULL if it is not a known word.
        See <xref linkend="textsearch-dictionary-testing"/> for details.
-->
入力トークンが辞書にあれば代替の語彙素の配列、辞書にあるがストップワードである場合には空の配列、未知の単語ならNULLを返します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-DICTIONARY-TESTING" title="12.8.3. 辞書のテスト">12.8.3</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_lexize('english_stem', 'stars')</code>
        → <code class="returnvalue">{star}</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.12.2.2.3.1.1.1" class="indexterm"></a>
        <code class="function">ts_parse</code> ( <em class="parameter"><code>parser_name</code></em> <code class="type">text</code>,
        <em class="parameter"><code>document</code></em> <code class="type">text</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>tokid</code></em> <code class="type">integer</code>,
        <em class="parameter"><code>token</code></em> <code class="type">text</code> )
       </p>
       <p>
<!--
        Extracts tokens from the <parameter>document</parameter> using the
        named parser.
        See <xref linkend="textsearch-parser-testing"/> for details.
-->
名前で指定したパーサを使って<em class="parameter"><code>document</code></em>からトークンを取り出します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING" title="12.8.2. パーサのテスト">12.8.2</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_parse('default', 'foo - bar')</code>
        → <code class="returnvalue">(1,foo) ...</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">ts_parse</code> ( <em class="parameter"><code>parser_oid</code></em> <code class="type">oid</code>,
        <em class="parameter"><code>document</code></em> <code class="type">text</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>tokid</code></em> <code class="type">integer</code>,
        <em class="parameter"><code>token</code></em> <code class="type">text</code> )
       </p>
       <p>
<!--
        Extracts tokens from the <parameter>document</parameter> using a
        parser specified by OID.
        See <xref linkend="textsearch-parser-testing"/> for details.
-->
OIDで指定されたパーサを使って<em class="parameter"><code>document</code></em>からトークンを取り出します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING" title="12.8.2. パーサのテスト">12.8.2</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_parse(3722, 'foo - bar')</code>
        → <code class="returnvalue">(1,foo) ...</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.12.2.2.5.1.1.1" class="indexterm"></a>
        <code class="function">ts_token_type</code> ( <em class="parameter"><code>parser_name</code></em> <code class="type">text</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>tokid</code></em> <code class="type">integer</code>,
        <em class="parameter"><code>alias</code></em> <code class="type">text</code>,
        <em class="parameter"><code>description</code></em> <code class="type">text</code> )
       </p>
       <p>
<!--
        Returns a table that describes each type of token the named parser can
        recognize.
        See <xref linkend="textsearch-parser-testing"/> for details.
-->
名前で指定したパーサが認識できるトークンの型を記述するテーブルを返します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING" title="12.8.2. パーサのテスト">12.8.2</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_token_type('default')</code>
        → <code class="returnvalue">(1,asciiword,"Word, all ASCII") ...</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <code class="function">ts_token_type</code> ( <em class="parameter"><code>parser_oid</code></em> <code class="type">oid</code> )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>tokid</code></em> <code class="type">integer</code>,
        <em class="parameter"><code>alias</code></em> <code class="type">text</code>,
        <em class="parameter"><code>description</code></em> <code class="type">text</code> )
       </p>
       <p>
<!--
        Returns a table that describes each type of token a parser specified
        by OID can recognize.
        See <xref linkend="textsearch-parser-testing"/> for details.
-->
OIDで指定したパーサが認識できるトークンの型を記述するテーブルを返します。
詳細は<a class="xref" href="textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING" title="12.8.2. パーサのテスト">12.8.2</a>を見てください。
       </p>
       <p>
        <code class="literal">ts_token_type(3722)</code>
        → <code class="returnvalue">(1,asciiword,"Word, all ASCII") ...</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.21.12.2.2.7.1.1.1" class="indexterm"></a>
        <code class="function">ts_stat</code> ( <em class="parameter"><code>sqlquery</code></em> <code class="type">text</code>
        [<span class="optional">, <em class="parameter"><code>weights</code></em> <code class="type">text</code> </span>] )
        → <code class="returnvalue">setof record</code>
        ( <em class="parameter"><code>word</code></em> <code class="type">text</code>,
        <em class="parameter"><code>ndoc</code></em> <code class="type">integer</code>,
        <em class="parameter"><code>nentry</code></em> <code class="type">integer</code> )
       </p>
       <p>
<!--
        Executes the <parameter>sqlquery</parameter>, which must return a
        single <type>tsvector</type> column, and returns statistics about each
        distinct lexeme contained in the data.
        See <xref linkend="textsearch-statistics"/> for details.
-->
単一の<code class="type">tsvector</code>列を返さなければならない<em class="parameter"><code>sqlquery</code></em>を実行し、データに含まれる別個の語彙素に関する統計情報を返します。
詳細は<a class="xref" href="textsearch-features.html#TEXTSEARCH-STATISTICS" title="12.4.4. 文書の統計情報の収集">12.4.4</a>をご覧ください。
       </p>
       <p>
        <code class="literal">ts_stat('SELECT vector FROM apod')</code>
        → <code class="returnvalue">(foo,10,15) ...</code>
       </p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-net.html" title="9.12. ネットワークアドレス関数と演算子">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html" title="第9章 関数と演算子">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-uuid.html" title="9.14. UUID関数">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">9.12. ネットワークアドレス関数と演算子 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 16.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 9.14. UUID関数</td></tr></table></div></body></html>