<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>55.4. ストリーミングレプリケーションプロトコル</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sasl-authentication.html" title="55.3. SASL認証" /><link rel="next" href="protocol-logical-replication.html" title="55.5. 論理ストリーミングレプリケーションのプロトコル" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="protocol.html" title="第55章 フロントエンド/バックエンドプロトコル">第55章 フロントエンド/バックエンドプロトコル</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 15.0 : protocol-replication.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="sasl-authentication.html" title="55.3. SASL認証">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="protocol.html" title="第55章 フロントエンド/バックエンドプロトコル">上へ</a></td><td width="60%" align="center">55.4. ストリーミングレプリケーションプロトコル</td><td width="20%" align="right"> <a accesskey="n" href="protocol-logical-replication.html" title="55.5. 論理ストリーミングレプリケーションのプロトコル">次へ</a></td></tr></table><hr /></div><div class="sect1" id="PROTOCOL-REPLICATION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">55.4. ストリーミングレプリケーションプロトコル</h2></div></div></div><span class="original">
  &lt;title&gt;Streaming Replication Protocol&lt;/title&gt;
</span><p>
<span class="original">
   To initiate streaming replication, the frontend sends the
   &lt;literal&gt;replication&lt;/literal&gt; parameter in the startup message. A Boolean
   value of &lt;literal&gt;true&lt;/literal&gt; (or &lt;literal&gt;on&lt;/literal&gt;,
   &lt;literal&gt;yes&lt;/literal&gt;, &lt;literal&gt;1&lt;/literal&gt;) tells the backend to go into
   physical replication walsender mode, wherein a small set of replication
   commands, shown below, can be issued instead of SQL statements.
</span>
ストリーミングレプリケーションを初期化するために、フロントエンドは開始メッセージにて<code class="literal">replication</code>パラメータを送信します。
ブール値の<code class="literal">true</code>（または<code class="literal">on</code>、<code class="literal">yes</code>、<code class="literal">1</code>）がバックエンドに対して、SQL文ではなく小規模なレプリケーションコマンド群を発行できるようになる、物理レプリケーションのwalsenderモードに入るように伝えます。
  </p><p>
<span class="original">
   Passing &lt;literal&gt;database&lt;/literal&gt; as the value for the
   &lt;literal&gt;replication&lt;/literal&gt; parameter instructs the backend to go into
   logical replication walsender mode, connecting to the database specified in
   the &lt;literal&gt;dbname&lt;/literal&gt; parameter.  In logical replication walsender
   mode, the replication commands shown below as well as normal SQL commands can
   be issued.
</span>
<code class="literal">replication</code>パラメータに対する値として<code class="literal">database</code>を渡すことは、<code class="literal">dbname</code>パラメータで指定されたデータベースに接続して、バックエンドにロジカルレプリケーションのwalsendeモードに入ることを指示します。
ロジカルレプリケーションwalsenderモードでは、以下に示すレプリケーションコマンドを通常のSQLコマンドと同様に実行できます。
  </p><p>
<span class="original">
   In either physical replication or logical replication walsender mode, only the
   simple query protocol can be used.
</span>
物理レプリケーション、ロジカルレプリケーションいずれかのwalsenderモードでは、簡易問い合わせプロトコルのみ使用できます。
  </p><p>
<span class="original">
   For the purpose of testing replication commands, you can make a replication
   connection via &lt;application&gt;psql&lt;/application&gt; or any other
   &lt;application&gt;libpq&lt;/application&gt;-using tool with a connection string including
   the &lt;literal&gt;replication&lt;/literal&gt; option,
   e.g.:
</span>
《機械翻訳》複製コマンドをテストするために、<span class="application">psql</span>やその他の<span class="application">libpq</span>を使ったツールを使って、<code class="literal">複製</code>オプションを含む接続文字列で複製接続を作ることができます。
例:
</p><pre class="programlisting">
psql "dbname=postgres replication=database" -c "IDENTIFY_SYSTEM;"
</pre><p>
<span class="original">
   However, it is often more useful to use
   &lt;xref linkend="app-pgreceivewal"/&gt; (for physical replication) or
   &lt;xref linkend="app-pgrecvlogical"/&gt; (for logical replication).
</span>
《機械翻訳》しかし、<a class="xref" href="app-pgreceivewal.html" title="pg_receivewal"><span class="refentrytitle"><span class="application">pg_receivewal</span></span></a>(物理的複製の場合)や<a class="xref" href="app-pgrecvlogical.html" title="pg_recvlogical"><span class="refentrytitle"><span class="application">pg_recvlogical</span></span></a>(論理的複製の場合)を使う方が便利なことがよくあります。
  </p><p>
<span class="original">
   Replication commands are logged in the server log when
   &lt;xref linkend="guc-log-replication-commands"/&gt; is enabled.
</span>
<a class="xref" href="runtime-config-logging.html#GUC-LOG-REPLICATION-COMMANDS">log_replication_commands</a>が有効であるとき、サーバログにレプリケーションコマンドが記録されます。
  </p><p>
<span class="original">
   The commands accepted in replication mode are:
</span>
レプリケーションモードで受け付けられるコマンドは以下の通りです。

   </p><div class="variablelist"><dl class="variablelist"><dt id="PROTOCOL-REPLICATION-IDENTIFY-SYSTEM"><span class="term"><code class="literal">IDENTIFY_SYSTEM</code>
      <a id="id-1.10.6.10.7.1.1.1.2" class="indexterm"></a>
     </span></dt><dd><p>
       Requests the server to identify itself. Server replies with a result
       set of a single row, containing four fields:
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">systemid</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
          The unique system identifier identifying the cluster. This
          can be used to check that the base backup used to initialize the
          standby came from the same cluster.
</span>
クラスタを識別する一意なシステム識別子です。
これを使用してスタンバイを初期化するために使用するベースバックアップが同じクラスタに由来していることを検査することができます。
         </p></dd><dt><span class="term"><code class="literal">timeline</code> (<code class="type">int4</code>)</span></dt><dd><p>
<span class="original">
          Current timeline ID. Also useful to check that the standby is
          consistent with the primary.
</span>
現在のタイムラインIDです。
同様にスタンバイがプライマリと一貫性を持つことを検査するために使用されます。
         </p></dd><dt><span class="term"><code class="literal">xlogpos</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
          Current WAL flush location. Useful to get a known location in the
          write-ahead log where streaming can start.
</span>
現在のWALの吐き出し位置です。
ストリーミングを開始できる先行書き込みログの既知の位置を得る際に有用です。
         </p></dd><dt><span class="term"><code class="literal">dbname</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
          Database connected to or null.
</span>
接続したデータベース名またはNULLです。
         </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-SHOW"><span class="term"><code class="literal">SHOW</code> <em class="replaceable"><code>name</code></em>
      <a id="id-1.10.6.10.7.1.2.1.3" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Requests the server to send the current setting of a run-time parameter.
       This is similar to the SQL command &lt;xref linkend="sql-show"/&gt;.
</span>
実行時パラメータの現在の設定を送信するようサーバに要求します。
これはSQLコマンド<a class="xref" href="sql-show.html" title="SHOW"><span class="refentrytitle">SHOW</span></a>と同等です。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt><dd><p>
<span class="original">
          The name of a run-time parameter. Available parameters are documented
          in &lt;xref linkend="runtime-config"/&gt;.
</span>
実行時パラメータの名前です。
利用できるパラメータは<a class="xref" href="runtime-config.html" title="第20章 サーバの設定">第20章</a>に記述されています。
         </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-TIMELINE-HISTORY"><span class="term"><code class="literal">TIMELINE_HISTORY</code> <em class="replaceable"><code>tli</code></em>
      <a id="id-1.10.6.10.7.1.3.1.3" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Requests the server to send over the timeline history file for timeline
       &lt;replaceable class="parameter"&gt;tli&lt;/replaceable&gt;.  Server replies with a
       result set of a single row, containing two fields.  While the fields
       are labeled as &lt;type&gt;text&lt;/type&gt;, they effectively return raw bytes,
       with no encoding conversion:
</span>
<em class="replaceable"><code>tli</code></em>のタイムラインのため、サーバにタイムライン履歴ファイルの送付を要求します。
サーバは2列単一行の結果セットを返します。
フィールドには<code class="type">text</code>の印が付けられていますが、実際には符号化変換なしの生のバイトが返ります。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filename</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
          File name of the timeline history file, e.g., &lt;filename&gt;00000002.history&lt;/filename&gt;.
</span>
タイムライン履歴ファイル名、例えば<code class="filename">00000002.history</code>
         </p></dd><dt><span class="term"><code class="literal">content</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
          Contents of the timeline history file.
</span>
タイムライン履歴ファイルの内容
         </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-CREATE-REPLICATION-SLOT"><span class="term"><code class="literal">CREATE_REPLICATION_SLOT</code> <em class="replaceable"><code>slot_name</code></em> [ <code class="literal">TEMPORARY</code> ] { <code class="literal">PHYSICAL</code> | <code class="literal">LOGICAL</code> } [ ( <em class="replaceable"><code>option</code></em> [, ...] ) ]
      <a id="id-1.10.6.10.7.1.4.1.7" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Create a physical or logical replication
       slot. See &lt;xref linkend="streaming-replication-slots"/&gt; for more about
       replication slots.
</span>
物理的または論理的レプリケーションスロットを作成します。
レプリケーションスロットの詳細は<a class="xref" href="warm-standby.html#STREAMING-REPLICATION-SLOTS" title="27.2.6. レプリケーションスロット">27.2.6</a>を参照。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>slot_name</code></em></span></dt><dd><p>
<span class="original">
          The name of the slot to create. Must be a valid replication slot
          name (see &lt;xref linkend="streaming-replication-slots-manipulation"/&gt;).
</span>
作成するスロット名。
有効なレプリケーションスロット名でなければならない。
（<a class="xref" href="warm-standby.html#STREAMING-REPLICATION-SLOTS-MANIPULATION" title="27.2.6.1. レプリケーションスロットへの問い合わせと操作">27.2.6.1</a>を参照）。
         </p></dd><dt><span class="term"><em class="replaceable"><code>output_plugin</code></em></span></dt><dd><p>
<span class="original">
          The name of the output plugin used for logical decoding
          (see &lt;xref linkend="logicaldecoding-output-plugin"/&gt;).
</span>
ロジカルデコーディングに使用される出力プラグイン名。
（<a class="xref" href="logicaldecoding-output-plugin.html" title="49.6. ロジカルデコーディングの出力プラグイン">49.6</a>を参照）。
         </p></dd><dt><span class="term"><code class="literal">TEMPORARY</code></span></dt><dd><p>
<span class="original">
          Specify that this replication slot is a temporary one. Temporary
          slots are not saved to disk and are automatically dropped on error
          or when the session has finished.
</span>
このレプリケーションスロットが一時スロットであることを指定します。
一時スロットはディスクに保存されず、エラー発生時またはセッション終了時に自動的に削除されます。
         </p></dd></dl></div><span class="original">
      &lt;para&gt;The following options are supported:&lt;/para&gt;
</span><p>《機械翻訳》次のオプションがサポートされています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">TWO_PHASE [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
          If true, this logical replication slot supports decoding of two-phase
          commit. With this option, commands related to two-phase commit such as
          &lt;literal&gt;PREPARE TRANSACTION&lt;/literal&gt;, &lt;literal&gt;COMMIT PREPARED&lt;/literal&gt;
          and &lt;literal&gt;ROLLBACK PREPARED&lt;/literal&gt; are decoded and transmitted.
          The transaction will be decoded and transmitted at
          &lt;literal&gt;PREPARE TRANSACTION&lt;/literal&gt; time.
          The default is false.
</span>
《機械翻訳》trueの場合、この論理レプリケーション・スロットは2フェーズ・コミットのデコードをサポートします。
このオプションを使用すると、<code class="literal">PREPARE TRANSACTION</code>、<code class="literal">COMMIT PREPARED</code>および<code class="literal">ROLLBACK PREPARED</code>などの2フェーズ・コミットに関連するコマンドがデコードおよび転送されます。
トランザクションは<code class="literal">PREPARE TRANSACTION</code>時にデコードおよび転送されます。
デフォルトはfalseです。
         </p></dd><dt><span class="term"><code class="literal">RESERVE_WAL [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
          If true, this physical replication slot reserves &lt;acronym&gt;WAL&lt;/acronym&gt;
          immediately.  Otherwise, &lt;acronym&gt;WAL&lt;/acronym&gt; is only reserved upon
          connection from a streaming replication client.
          The default is false.
</span>
《マッチ度[71.428571]》この物理的レプリケーションスロットが直ちに<acronym class="acronym">WAL</acronym>を予約することを指定します。
そうでなければ、<acronym class="acronym">WAL</acronym>はストリーミングレプリケーションクライアントからの接続に応じてだけ予約されます。
         </p></dd><dt><span class="term"><code class="literal">SNAPSHOT { 'export' | 'use' | 'nothing' }</code></span></dt><dd><p>
<span class="original">
          Decides what to do with the snapshot created during logical slot
          initialization. &lt;literal&gt;'export'&lt;/literal&gt;, which is the default,
          will export the snapshot for use in other sessions. This option can't
          be used inside a transaction.  &lt;literal&gt;'use'&lt;/literal&gt; will use the
          snapshot for the current transaction executing the command. This
          option must be used in a transaction, and
          &lt;literal&gt;CREATE_REPLICATION_SLOT&lt;/literal&gt; must be the first command
          run in that transaction.  Finally, &lt;literal&gt;'nothing'&lt;/literal&gt; will
          just use the snapshot for logical decoding as normal but won't do
          anything else with it.
</span>
《マッチ度[77.408638]》論理スロットの初期化時に作成されたスナップショットの処理について決定します。
デフォルトの<code class="literal">EXPORT_SNAPSHOT</code>はスナップショットが他のセッションで利用できるようエクスポートします。
このオプションはトランザクションの内側で使用することはできません。
<code class="literal">USE_SNAPSHOT</code>はこのコマンドを実行している現在のトランザクションでスナップショットを利用します。
このオプションはトランザクション内で使用しなければならず、<code class="literal">CREATE_REPLICATION_SLOT</code>がそのトランザクション内で実行される最初のコマンドでなければなりません。
最後に、<code class="literal">NOEXPORT_SNAPSHOT</code>は論理デコーディングで通常通りにスナップショットを使用するだけで、他には何もしません。
         </p></dd></dl></div><p>
<span class="original">
       In response to this command, the server will send a one-row result set
       containing the following fields:
</span>
《機械翻訳》このコマンドに応答して、サーバは以下のフィールドを含む1行の結果セットを送信します。

       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">slot_name</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The name of the newly-created replication slot.
</span>
新しく作成されたレプリケーションスロットの名前です。
          </p></dd><dt><span class="term"><code class="literal">consistent_point</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The WAL location at which the slot became consistent.  This is the
           earliest location from which streaming can start on this replication
           slot.
</span>
スロットが一貫性のある状態になった時点のWAL位置です。
これが、このスロット上でストリーミングを開始できる最も早い場所となります。
          </p></dd><dt><span class="term"><code class="literal">snapshot_name</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The identifier of the snapshot exported by the command.  The
           snapshot is valid until a new command is executed on this connection
           or the replication connection is closed.  Null if the created slot
           is physical.
</span>
このコマンドでエクスポートされるスナップショットの識別子です。
スナップショットは、この接続上で新しいコマンドが実行されるか、レプリケーション接続が閉じられるまで有効です。
作成されたのが物理スロットの場合はNULLになります。
          </p></dd><dt><span class="term"><code class="literal">output_plugin</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The name of the output plugin used by the newly-created replication
           slot.  Null if the created slot is physical.
</span>
新しく作成されたレプリケーションスロットが使用する出力プラグインの名前です。
作成されたのが物理スロットの場合はNULLになります。
          </p></dd></dl></div><p>
      </p></dd><dt id="PROTOCOL-REPLICATION-CREATE-REPLICATION-SLOT-LEGACY"><span class="term"><code class="literal">CREATE_REPLICATION_SLOT</code> <em class="replaceable"><code>slot_name</code></em> [ <code class="literal">TEMPORARY</code> ] { <code class="literal">PHYSICAL</code> [ <code class="literal">RESERVE_WAL</code> ] | <code class="literal">LOGICAL</code> <em class="replaceable"><code>output_plugin</code></em> [ <code class="literal">EXPORT_SNAPSHOT</code> | <code class="literal">NOEXPORT_SNAPSHOT</code> | <code class="literal">USE_SNAPSHOT</code> | <code class="literal">TWO_PHASE</code> ] }
     </span></dt><dd><p>
<span class="original">
       For compatibility with older releases, this alternative syntax for
       the &lt;literal&gt;CREATE_REPLICATION_SLOT&lt;/literal&gt; command is still supported.
</span>
《機械翻訳》旧リリースとの互換性を保つために、<code class="literal">CREATE_REPLICATION_SLOT</code>コマンドのこの代替構文は引き続きサポートされています。
      </p></dd><dt id="PROTOCOL-REPLICATION-READ-REPLICATION-SLOT"><span class="term"><code class="literal">READ_REPLICATION_SLOT</code> <em class="replaceable"><code>slot_name</code></em>
      <a id="id-1.10.6.10.7.1.6.1.3" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Read some information associated with a replication slot. Returns a tuple
       with &lt;literal&gt;NULL&lt;/literal&gt; values if the replication slot does not
       exist. This command is currently only supported for physical replication
       slots.
</span>
《機械翻訳》レプリケーション・スロットに関連付けられた情報を読みます。
レプリケーション・スロットが存在しない場合は、<code class="literal">NULL</code>値を持つタプルが戻されます。
このコマンドは現在、物理レプリケーション・スロットでのみサポートされています。
      </p><p>
<span class="original">
       In response to this command, the server will return a one-row result set,
       containing the following fields:
</span>
《機械翻訳》このコマンドに応答して、サーバは以下のフィールドを含む1行の結果セットを返します:

       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">slot_type</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The replication slot's type, either &lt;literal&gt;physical&lt;/literal&gt; or
           &lt;literal&gt;NULL&lt;/literal&gt;.
</span>
《機械翻訳》レプリケーションスロットのタイプ、<code class="literal">physical</code>または<code class="literal">NULL</code>。
          </p></dd><dt><span class="term"><code class="literal">restart_lsn</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The replication slot's &lt;literal&gt;restart_lsn&lt;/literal&gt;.
</span>
《機械翻訳》レプリケーションスロットの<code class="literal">restart_lsn</code>。
          </p></dd><dt><span class="term"><code class="literal">restart_tli</code> (<code class="type">int8</code>)</span></dt><dd><p>
<span class="original">
           The timeline ID associated with &lt;literal&gt;restart_lsn&lt;/literal&gt;,
           following the current timeline history.
</span>
《機械翻訳》現在のタイムライン履歴に従って、<code class="literal">restart_lsn</code>に関連付けられたタイムラインID。
          </p></dd></dl></div><p>
      </p></dd><dt id="PROTOCOL-REPLICATION-START-REPLICATION"><span class="term"><code class="literal">START_REPLICATION</code> [ <code class="literal">SLOT</code> <em class="replaceable"><code>slot_name</code></em> ] [ <code class="literal">PHYSICAL</code> ] <em class="replaceable"><code>XXX/XXX</code></em> [ <code class="literal">TIMELINE</code> <em class="replaceable"><code>tli</code></em> ]
      <a id="id-1.10.6.10.7.1.7.1.8" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Instructs server to start streaming WAL, starting at
       WAL location &lt;replaceable class="parameter"&gt;XXX/XXX&lt;/replaceable&gt;.
       If &lt;literal&gt;TIMELINE&lt;/literal&gt; option is specified,
       streaming starts on timeline &lt;replaceable class="parameter"&gt;tli&lt;/replaceable&gt;;
       otherwise, the server's current timeline is selected. The server can
       reply with an error, for example if the requested section of WAL has already
       been recycled. On success, the server responds with a CopyBothResponse
       message, and then starts to stream WAL to the frontend.
</span>
サーバに対して、WALのストリーミングを<em class="replaceable"><code>XXX/XXX</code></em> WAL時点から開始するよう指示します。
<code class="literal">TIMELINE</code>オプションが指定された場合、ストリーミングは<em class="replaceable"><code>tli</code></em>のタイムラインから開始されます。
そうでなければ、サーバの現在のタイムラインが選択されます。
サーバが、例えば、要求されたWALの断片がすでに回収されているなど、エラーを返すことがありえます。
成功時サーバはCopyBothResponseメッセージで応答し、フロントエンドに対するWALストリームを開始します。
      </p><p>
<span class="original">
       If a slot's name is provided
       via &lt;replaceable class="parameter"&gt;slot_name&lt;/replaceable&gt;, it will be updated
       as replication progresses so that the server knows which WAL segments,
       and if &lt;varname&gt;hot_standby_feedback&lt;/varname&gt; is on which transactions,
       are still needed by the standby.
</span>
<em class="replaceable"><code>slot_name</code></em>を経由してスロット名が提供された場合、それはレプリケーションの進行として更新されます。
それによってサーバは、どのWALセグメントがまだスタンバイに必要か、<code class="varname">hot_standby_feedback</code>のトランザクションはどれか、を感知します。
      </p><p>
<span class="original">
       If the client requests a timeline that's not the latest but is part of
       the history of the server, the server will stream all the WAL on that
       timeline starting from the requested start point up to the point where
       the server switched to another timeline. If the client requests
       streaming at exactly the end of an old timeline, the server skips COPY
       mode entirely.
</span>
最新ではなくて、サーバの過去のタイムラインをクライアントが要求した場合、サーバは要求された開始時点から他のタイムラインに切り替えるまでの、全てのWALストリームを送付します。
クライアントが旧タイムラインの終点のストリームを要求した場合、サーバはCOPYモード全体をスキップします。
      </p><p>
<span class="original">
       After streaming all the WAL on a timeline that is not the latest one,
       the server will end streaming by exiting the COPY mode. When the client
       acknowledges this by also exiting COPY mode, the server sends a result
       set with one row and two columns, indicating the next timeline in this
       server's history. The first column is the next timeline's ID (type &lt;type&gt;int8&lt;/type&gt;), and the
       second column is the WAL location where the switch happened (type &lt;type&gt;text&lt;/type&gt;). Usually,
       the switch position is the end of the WAL that was streamed, but there
       are corner cases where the server can send some WAL from the old
       timeline that it has not itself replayed before promoting. Finally, the
       server sends two CommandComplete messages (one that ends the CopyData
       and the other ends the &lt;literal&gt;START_REPLICATION&lt;/literal&gt; itself), and
       is ready to accept a new command.
</span>
最新でないタイムラインの全てのWALストリームを送付した後、サーバはCOPYモードを出ることによりストリームを終了します。
クライアントもCOPYモードを出ることにより承認した場合、サーバは2列単一行の結果セットを送付し、サーバにある次のタイムラインを示します。
最初の列は次のタイムラインID(<code class="type">int8</code>型)であり、次の列は切り替えたWALの位置(<code class="type">text</code>型)です。
通常切り替えた位置はWALストリームの終点ですが、昇格する前に再実行されなかった旧タイムラインからWALを送付するというまれな場合もあります。
最後に、サーバは２つのCommandCompleteメッセージ（一方はCopyDataを終了し、もう一方は<code class="literal">START_REPLICATION</code>自体を終了する）を送付し、新規のコマンドを受理できるようになります。
      </p><p>
<span class="original">
       WAL data is sent as a series of CopyData messages.  (This allows
       other information to be intermixed; in particular the server can send
       an ErrorResponse message if it encounters a failure after beginning
       to stream.)  The payload of each CopyData message from server to the
       client contains a message of one of the following formats:
</span>
WALデータはCopyDataメッセージ群として送信されます。
（これにより他の情報を混在させることができます。
具体的にはサーバはストリーム開始後に失敗が起きた場合にErrorResponseメッセージを送信することができます。）
サーバからクライアントへの各CopyDataメッセージのペイロード、は以下の書式のどれかを含みます。
      </p><div class="variablelist"><dl class="variablelist"><dt id="PROTOCOL-REPLICATION-XLOGDATA"><span class="term">XLogData (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('w')</span></dt><dd><p>
<span class="original">
             Identifies the message as WAL data.
</span>
メッセージをWALデータとして識別します。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The starting point of the WAL data in this message.
</span>
このメッセージ内のWALの開始点。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The current end of WAL on the server.
</span>
サーバ上の現在のWAL終了点。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The server's system clock at the time of transmission, as
             microseconds since midnight on 2000-01-01.
</span>
転送時点でのサーバのシステム時刻。
2000年1月1日午前0時からのマイクロ秒。
            </p></dd><dt><span class="term">Byte<em class="replaceable"><code>n</code></em></span></dt><dd><p>
<span class="original">
             A section of the WAL data stream.
</span>
WALデータストリームの断片。
            </p><p>
<span class="original">
             A single WAL record is never split across two XLogData messages.
             When a WAL record crosses a WAL page boundary, and is therefore
             already split using continuation records, it can be split at the page
             boundary. In other words, the first main WAL record and its
             continuation records can be sent in different XLogData messages.
</span>
単一のWALレコードが2つのXLogDataメッセージに分かれることはありません。
しかしWALレコードがWALページ境界を跨る場合、継続レコードを用いてすでに分割されていますので、ページ境界で分割することができます。
言い換えると、先頭の主WALレコードとその継続レコードは、別のXLogDataメッセージとして分かれることがありえます。
            </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-PRIMARY-KEEPALIVE-MESSAGE"><span class="term">Primary keepalive message (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('k')</span></dt><dd><p>
<span class="original">
             Identifies the message as a sender keepalive.
</span>
このメッセージを送信元キープアライブとして識別します。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The current end of WAL on the server.
</span>
サーバ上の現在のWAL終端。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The server's system clock at the time of transmission, as
             microseconds since midnight on 2000-01-01.
</span>
転送時点でのサーバのシステム時刻。
2000年1月1日午前0時からのマイクロ秒。
            </p></dd><dt><span class="term">Byte1</span></dt><dd><p>
<span class="original">
             1 means that the client should reply to this message as soon as
             possible, to avoid a timeout disconnect. 0 otherwise.
</span>
タイムアウトによる切断を避けるため、クライアントがこのメッセージに即時に応答するべき方法の1つ。
0またはその他
            </p></dd></dl></div></dd></dl></div><p>
<span class="original">
       The receiving process can send replies back to the sender at any time,
       using one of the following message formats (also in the payload of a
       CopyData message):
</span>
以下のメッセージ書式の1つ（およびCopyDataメッセージのペイロード中のもの）を使用して、受理プロセスは送信者にいつでも応答できます。
      </p><div class="variablelist"><dl class="variablelist"><dt id="PROTOCOL-REPLICATION-STANDBY-STATUS-UPDATE"><span class="term">Standby status update (F)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('r')</span></dt><dd><p>
<span class="original">
             Identifies the message as a receiver status update.
</span>
メッセージを受信側の状態更新として識別します。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The location of the last WAL byte + 1 received and written to disk
             in the standby.
</span>
スタンバイにおいて受信しディスクに書き込まれた最終WALバイト+1の場所。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The location of the last WAL byte + 1 flushed to disk in
             the standby.
</span>
スタンバイにおいてディスクに吐き出された最終WALバイト+1の場所。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The location of the last WAL byte + 1 applied in the standby.
</span>
スタンバイにおいて適用された最終WALバイト+1の場所。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The client's system clock at the time of transmission, as
             microseconds since midnight on 2000-01-01.
</span>
転送時点でのクライアントのシステム時刻。
2000年1月1日午前0時からのマイクロ秒。
            </p></dd><dt><span class="term">Byte1</span></dt><dd><p>
<span class="original">
             If 1, the client requests the server to reply to this message
             immediately. This can be used to ping the server, to test if
             the connection is still healthy.
</span>
値が1の場合、このメッセージにすぐ応答するように、クライアントはサーバへ要求します。
この方法は、接続がまだ保持されているか検査するために、サーバへのピング送信として使用できます。
            </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-HOT-STANDBY-FEEDBACK-MESSAGE"><span class="term">Hot standby feedback message (F)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('h')</span></dt><dd><p>
<span class="original">
             Identifies the message as a hot standby feedback message.
</span>
《マッチ度[78.947368]》メッセージをホットスタンバイのフィードバックメッセージとして識別します。
            </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
             The client's system clock at the time of transmission, as
             microseconds since midnight on 2000-01-01.
</span>
転送時点でのクライアントのシステム時刻。
2000年1月1日午前0時からのマイクロ秒。
            </p></dd><dt><span class="term">Int32</span></dt><dd><p>
<span class="original">
             The standby's current global xmin, excluding the catalog_xmin from any
             replication slots. If both this value and the following
             catalog_xmin are 0 this is treated as a notification that hot standby
             feedback will no longer be sent on this connection. Later non-zero
             messages may reinitiate the feedback mechanism.
</span>
《マッチ度[83.279743]》スタンバイの現在のグローバルのxminですが、すべてのレプリケーションスロットのcatalog_xminは除きます。
この値と次のcatalog_xminがいずれも0なら、この接続ではホットスタンバイのフィードバックはもう送信されないという通知として扱われます。
後でゼロでないメッセージによりフィードバック機構を再開することができます。
            </p></dd><dt><span class="term">Int32</span></dt><dd><p>
<span class="original">
             The epoch of the global xmin xid on the standby.
</span>
スタンバイのグローバルのxmin xidのエポックです。
            </p></dd><dt><span class="term">Int32</span></dt><dd><p>
<span class="original">
             The lowest catalog_xmin of any replication slots on the standby. Set to 0
             if no catalog_xmin exists on the standby or if hot standby feedback is being
             disabled.
</span>
スタンバイのすべてのレプリケーションスロットのcatalog_xminの最小値です。
スタンバイ上にcatalog_xminが存在しない、あるいはホットスタンバイのフィードバックが無効化されている場合は0に設定します。
            </p></dd><dt><span class="term">Int32</span></dt><dd><p>
<span class="original">
             The epoch of the catalog_xmin xid on the standby.
</span>
スタンバイのcatalog_xmin xidのエポックです。
            </p></dd></dl></div></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-START-REPLICATION-SLOT-LOGICAL"><span class="term"><code class="literal">START_REPLICATION</code> <code class="literal">SLOT</code> <em class="replaceable"><code>slot_name</code></em> <code class="literal">LOGICAL</code> <em class="replaceable"><code>XXX/XXX</code></em> [ ( <em class="replaceable"><code>option_name</code></em> [ <em class="replaceable"><code>option_value</code></em> ] [, ...] ) ]</span></dt><dd><p>
<span class="original">
       Instructs server to start streaming WAL for logical replication,
       starting at either WAL location &lt;replaceable
       class="parameter"&gt;XXX/XXX&lt;/replaceable&gt; or the slot's
       &lt;literal&gt;confirmed_flush_lsn&lt;/literal&gt; (see &lt;xref
       linkend="view-pg-replication-slots"/&gt;), whichever is greater. This
       behavior makes it easier for clients to avoid updating their local LSN
       status when there is no data to process. However, starting at a
       different LSN than requested might not catch certain kinds of client
       errors; so the client may wish to check that
       &lt;literal&gt;confirmed_flush_lsn&lt;/literal&gt; matches its expectations before
       issuing &lt;literal&gt;START_REPLICATION&lt;/literal&gt;.
</span>
《機械翻訳》論理的な複製のためにWALのストリーミングを開始するようサーバに指示します。
WAL位置<em class="replaceable"><code>XXX/XXX</code></em>かスロット<code class="literal">confirmed_flush_lsn</code>(<a class="xref" href="view-pg-replication-slots.html" title="54.19. pg_replication_slots">54.19</a>参照)のどちらか大きい方から開始します。
この動作により、クライアントは処理するデータがないときにローカルLSNステータスを更新しないようにしやすくなります。
しかし、要求されたLSNとは異なるLSNで開始すると、特定の種類のクライアントエラーを検出できない可能性があります。
したがって、クライアントは<code class="literal">START_REPLICATION</code>を発行する前に<code class="literal">confirmed_flush_lsn</code>が期待どおりであることを確認したい場合があります。
      </p><p>
<span class="original">
       The server can reply with an error, for example if the
       slot does not exist. On success, the server responds with a CopyBothResponse
       message, and then starts to stream WAL to the frontend.
</span>
《機械翻訳》サーバは、スロットが存在しない場合などにエラーを返すことができます。
成功すると、サーバはCopyBothResponseメッセージで応答し、フロントエンドへのWALのストリーミングを開始します。
      </p><p>
<span class="original">
       The messages inside the CopyBothResponse messages are of the same format
       documented for &lt;literal&gt;START_REPLICATION ... PHYSICAL&lt;/literal&gt;, including
       two CommandComplete messages.
</span>
CopyBothResponse内部のメッセージは、2つのCommandCompleteメッセージを含めて<code class="literal">START_REPLICATION ... PHYSICAL</code>の記述と同じ書式です。
      </p><p>
<span class="original">
       The output plugin associated with the selected slot is used
       to process the output for streaming.
</span>
選択されたスロットに関連した出力プラグインは、出力ストリームの処理に使用されます。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">SLOT</code> <em class="replaceable"><code>slot_name</code></em></span></dt><dd><p>
<span class="original">
          The name of the slot to stream changes from. This parameter is required,
          and must correspond to an existing logical replication slot created
          with &lt;literal&gt;CREATE_REPLICATION_SLOT&lt;/literal&gt; in
          &lt;literal&gt;LOGICAL&lt;/literal&gt; mode.
</span>
ストリームを変更したスロット名。
このパラメータは必須であり、<code class="literal">LOGICAL</code>モードにおいて<code class="literal">CREATE_REPLICATION_SLOT</code>によって作成された、実在する論理的レプリケーションスロットに対応しなければなりません。
         </p></dd><dt><span class="term"><em class="replaceable"><code>XXX/XXX</code></em></span></dt><dd><p>
<span class="original">
          The WAL location to begin streaming at.
</span>
ストリームを開始するWAL時点。
         </p></dd><dt><span class="term"><em class="replaceable"><code>option_name</code></em></span></dt><dd><p>
<span class="original">
          The name of an option passed to the slot's logical decoding plugin.
</span>
レプリケーションスロットのロジカルデコーディング出力プラグインに渡すオプション名。
         </p></dd><dt><span class="term"><em class="replaceable"><code>option_value</code></em></span></dt><dd><p>
<span class="original">
          Optional value, in the form of a string constant, associated with the
          specified option.
</span>
オプションの値。
文字列定数の形式。
         </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-DROP-REPLICATION-SLOT"><span class="term">
      <code class="literal">DROP_REPLICATION_SLOT</code> <em class="replaceable"><code>slot_name</code></em> [<span class="optional"> <code class="literal">WAIT</code> </span>]
      <a id="id-1.10.6.10.7.1.9.1.4" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Drops a replication slot, freeing any reserved server-side resources.
       If the slot is a logical slot that was created in a database other than
       the database the walsender is connected to, this command fails.
</span>
レプリケーションスロットを削除し、サーバ側で準備した資源を解放します。
このスロットが、walsenderが接続しているデータベース以外のデータベースで作成された論理スロットの場合、このコマンドは失敗します。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>slot_name</code></em></span></dt><dd><p>
<span class="original">
          The name of the slot to drop.
</span>
削除するスロット名。
         </p></dd><dt><span class="term"><code class="literal">WAIT</code></span></dt><dd><p>
<span class="original">
          This option causes the command to wait if the slot is active until
          it becomes inactive, instead of the default behavior of raising an
          error.
</span>
このオプションを使用すると、スロットが使用中の時に、スロットの使用が終わるまでコマンドを待機させます。
デフォルトの動作ではエラーを発生させます。
         </p></dd></dl></div></dd><dt id="PROTOCOL-REPLICATION-BASE-BACKUP"><span class="term"><code class="literal">BASE_BACKUP</code> [ ( <em class="replaceable"><code>option</code></em> [, ...] ) ]
      <a id="id-1.10.6.10.7.1.10.1.3" class="indexterm"></a>
     </span></dt><dd><p>
<span class="original">
       Instructs the server to start streaming a base backup.
       The system will automatically be put in backup mode before the backup
       is started, and taken out of it when the backup is complete. The
       following options are accepted:
</span>
《機械翻訳》ベースバックアップのストリーミングを開始するようにサーバーに指示します。
バックアップが開始される前に、システムは自動的にバックアップモードになり、バックアップが完了するとシステムから削除されます。
次のオプションを使用できます:

       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">LABEL</code> <em class="replaceable"><code>'label'</code></em></span></dt><dd><p>
<span class="original">
           Sets the label of the backup. If none is specified, a backup label
           of &lt;literal&gt;base backup&lt;/literal&gt; will be used. The quoting rules
           for the label are the same as a standard SQL string with
           &lt;xref linkend="guc-standard-conforming-strings"/&gt; turned on.
</span>
《機械翻訳》バックアップのラベルを設定します。
何も指定しない場合は、<code class="literal">ベースバックアップ</code>のバックアップラベルが使用されます。
ラベルの引用符付け規則は、<a class="xref" href="runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS">standard_conforming_strings</a>をオンにした標準SQL文字列と同じです。
          </p></dd><dt><span class="term"><code class="literal">TARGET</code> <em class="replaceable"><code>'target'</code></em></span></dt><dd><p>
<span class="original">
           Tells the server where to send the backup.  If the target is
           &lt;literal&gt;client&lt;/literal&gt;, which is the default, the backup data is
           sent to the client. If it is &lt;literal&gt;server&lt;/literal&gt;, the backup
           data is written to the server at the pathname specified by the
           &lt;literal&gt;TARGET_DETAIL&lt;/literal&gt; option. If it is
           &lt;literal&gt;blackhole&lt;/literal&gt;, the backup data is not sent
           anywhere; it is simply discarded.
</span>
《機械翻訳》バックアップの送信先をサーバーに通知します。
ターゲットが<code class="literal">クライアント</code>の場合、デフォルトでバックアップ・データがクライアントに送信されます。
ターゲットが<code class="literal">サーバー</code>の場合、バックアップ・データはサーバーの<code class="literal">TARGET_DETAIL</code>オプションで指定されたパス名に書き込まれます。
ターゲットが<code class="literal">ブラックホール</code>の場合、バックアップ・データはどこにも送信されず、単に破棄されます。
          </p><p>
<span class="original">
           The &lt;literal&gt;server&lt;/literal&gt; target requires superuser privilege or
           being granted the &lt;literal&gt;pg_write_server_files&lt;/literal&gt; role.
</span>
《機械翻訳》<code class="literal">サーバ</code>ターゲットはスーパーユーザ権限を必要とするか、<code class="literal">pg_write_server_files</code>ロールを与えられている必要があります。
          </p></dd><dt><span class="term"><code class="literal">TARGET_DETAIL</code> <em class="replaceable"><code>'detail'</code></em></span></dt><dd><p>
<span class="original">
           Provides additional information about the backup target.
</span>
《機械翻訳》バックアップ・ターゲットに関する追加情報を提供します。
          </p><p>
<span class="original">
           Currently, this option can only be used when the backup target is
           &lt;literal&gt;server&lt;/literal&gt;. It specifies the server directory
           to which the backup should be written.
</span>
《機械翻訳》現在、このオプションはバックアップ・ターゲットが<code class="literal">サーバー</code>の場合にのみ使用できます。
バックアップを書き込むサーバー・ディレクトリを指定します。
          </p></dd><dt><span class="term"><code class="literal">PROGRESS [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
           If set to true, request information required to generate a progress
           report. This will send back an approximate size in the header of each
           tablespace, which can be used to calculate how far along the stream
           is done. This is calculated by enumerating all the file sizes once
           before the transfer is even started, and might as such have a
           negative impact on the performance.  In particular, it might take
           longer before the first data
           is streamed. Since the database files can change during the backup,
           the size is only approximate and might both grow and shrink between
           the time of approximation and the sending of the actual files.
           The default is false.
</span>
《マッチ度[82.126348]》進行状況の報告を生成するために必要な情報を要求します。
これは、ストリームが完了するまでにどのくらいかかるかを計算するために使用することができる、各テーブル空間のヘッダ内の概算容量を返送します。
これは、転送を始める前のすべてのファイルサイズを１度数え上げることで計算されます。
これ自体が性能に与える悪影響があるかもしれません。
特に最初のデータがストリームされるまでにより多くの時間がかかる可能性があります。
データベースファイルはバックアップの間変更される可能性がありますので、容量は概算に過ぎず、概算時と実ファイルを送信するまでの間に増減される可能性があります。
          </p></dd><dt><span class="term"><code class="literal">CHECKPOINT { 'fast' | 'spread' }</code></span></dt><dd><p>
<span class="original">
           Sets the type of checkpoint to be performed at the beginning of the
           base backup. The default is &lt;literal&gt;spread&lt;/literal&gt;.
</span>
《機械翻訳》ベース・バックアップの開始時に実行されるチェックポイントのタイプを設定します。
デフォルトは<code class="literal">スプレッド</code>です。
          </p></dd><dt><span class="term"><code class="literal">WAL [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
           If set to true, include the necessary WAL segments in the backup.
           This will include all the files between start and stop backup in the
           &lt;filename&gt;pg_wal&lt;/filename&gt; directory of the base directory tar
           file. The default is false.
</span>
《マッチ度[76.548673]》バックアップ内に必要なWALセグメントを含めます。
ベースディレクトリtarファイルの<code class="filename">pg_wal</code>ディレクトリにある、バックアップの開始から終了までのすべてのファイルが含まれます。
          </p></dd><dt><span class="term"><code class="literal">WAIT [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
           If set to true, the backup will wait until the last required WAL
           segment has been archived, or emit a warning if log archiving is
           not enabled. If false, the backup will neither wait nor warn,
           leaving the client responsible for ensuring the required log is
           available. The default is true.
</span>
《マッチ度[54.703833]》デフォルトでは、バックアップは必要な最終WALセグメントがアーカイブされるまで待機します。
ログアーカイブが有効でない場合は警告が発せられます。
<code class="literal">NOWAIT</code>により、必要なログが利用できるようになったことを確認することをクライアント側の責任として、この待機や警告が無効になります。
          </p></dd><dt><span class="term"><code class="literal">COMPRESSION</code> <em class="replaceable"><code>'method'</code></em></span></dt><dd><p>
<span class="original">
           Instructs the server to compress the backup using the specified
           method. Currently, the supported methods are &lt;literal&gt;gzip&lt;/literal&gt;,
           &lt;literal&gt;lz4&lt;/literal&gt;, and &lt;literal&gt;zstd&lt;/literal&gt;.
</span>
《機械翻訳》指定された方法を使用してバックアップを圧縮するようサーバーに指示します。
現在サポートされている方法は、<code class="literal">gzip</code>、<code class="literal">lz4</code>および<code class="literal">zstd</code>です。
          </p></dd><dt><span class="term"><code class="literal">COMPRESSION_DETAIL</code> <em class="replaceable"><code>detail</code></em></span></dt><dd><p>
<span class="original">
           Specifies details for the chosen compression method. This should only
           be used in conjunction with the &lt;literal&gt;COMPRESSION&lt;/literal&gt;
           option.  If the value is an integer, it specifies the compression
           level.  Otherwise, it should be a comma-separated list of items,
           each of the form &lt;replaceable&gt;keyword&lt;/replaceable&gt; or
           &lt;replaceable&gt;keyword=value&lt;/replaceable&gt;. Currently, the supported
           keywords are &lt;literal&gt;level&lt;/literal&gt; and &lt;literal&gt;workers&lt;/literal&gt;.
</span>
《機械翻訳》選択した圧縮方法の詳細を指定します。
これは<code class="literal">COMPRESSION</code>オプションと一緒にのみ使用します。
値が整数の場合は、圧縮レベルを指定します。
それ以外の場合は、カンマで区切られたアイテムのリストであり、それぞれの形式は<em class="replaceable"><code>keyword</code></em>または<em class="replaceable"><code>keyword=value</code></em>です。
現在サポートされているキーワードは<code class="literal">level</code>および<code class="literal">workers</code>です。
          </p><p>
<span class="original">
           The &lt;literal&gt;level&lt;/literal&gt; keyword sets the compression level.
           For &lt;literal&gt;gzip&lt;/literal&gt; the compression level should be an
           integer between &lt;literal&gt;1&lt;/literal&gt; and &lt;literal&gt;9&lt;/literal&gt;
           (default &lt;literal&gt;Z_DEFAULT_COMPRESSION&lt;/literal&gt; or
           &lt;literal&gt;-1&lt;/literal&gt;), for &lt;literal&gt;lz4&lt;/literal&gt; an integer
           between 1 and 12 (default &lt;literal&gt;0&lt;/literal&gt; for fast compression
           mode), and for &lt;literal&gt;zstd&lt;/literal&gt; an integer between
           &lt;literal&gt;ZSTD_minCLevel()&lt;/literal&gt; (usually &lt;literal&gt;-131072&lt;/literal&gt;)
           and &lt;literal&gt;ZSTD_maxCLevel()&lt;/literal&gt; (usually &lt;literal&gt;22&lt;/literal&gt;),
           (default &lt;literal&gt;ZSTD_CLEVEL_DEFAULT&lt;/literal&gt; or
           &lt;literal&gt;3&lt;/literal&gt;).
</span>
《機械翻訳》<code class="literal">level</code>キーワードは圧縮レベルを設定します。
<code class="literal">gzip</code>の場合、圧縮レベルは<code class="literal">1</code>から<code class="literal">9</code>までの整数(デフォルト<code class="literal">Z_DEFAULT_COMPRESSION</code>または<code class="literal">-1</code>)、<code class="literal">lz4</code>の場合は1から12までの整数(高速圧縮モードの場合デフォルト<code class="literal">0</code>)、<code class="literal">zstd</code>の場合は<code class="literal">ZSTD_minCLevel()</code>(通常<code class="literal">-131072</code>)から<code class="literal">ZSTD_maxCLevel()</code>(通常は<code class="literal">22</code>),(デフォルトは<code class="literal">ZSTD_CLEVEL_DEFAULT</code>または<code class="literal">3</code>)までの整数です。
          </p><p>
<span class="original">
           The &lt;literal&gt;workers&lt;/literal&gt; keyword sets the number of threads
           that should be used for parallel compression. Parallel compression
           is supported only for &lt;literal&gt;zstd&lt;/literal&gt;.
</span>
《機械翻訳》<code class="literal">workers</code>キーワードは、並列圧縮に使用するスレッドの数を設定します。
並列圧縮は<code class="literal">zstd</code>でのみサポートされています。
          </p></dd><dt><span class="term"><code class="literal">MAX_RATE</code> <em class="replaceable"><code>rate</code></em></span></dt><dd><p>
<span class="original">
           Limit (throttle) the maximum amount of data transferred from server
           to client per unit of time.  The expected unit is kilobytes per second.
           If this option is specified, the value must either be equal to zero
           or it must fall within the range from 32 kB through 1 GB (inclusive).
           If zero is passed or the option is not specified, no restriction is
           imposed on the transfer.
</span>
サーバからクライアントへ転送する単位時間当たりの最大データ容量を制限します（絞ります）。
予期される単位はkB/s（キロバイト/秒）です。
このオプションが指定された場合、値はゼロまたは32 kB以上1 GB以下でなければなりません。
ゼロが渡されるかオプションが指定されない場合、転送の制約は課されません。
          </p></dd><dt><span class="term"><code class="literal">TABLESPACE_MAP [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
           If true, include information about symbolic links present in the
           directory &lt;filename&gt;pg_tblspc&lt;/filename&gt; in a file named
           &lt;filename&gt;tablespace_map&lt;/filename&gt;. The tablespace map file includes
           each symbolic link name as it exists in the directory
           &lt;filename&gt;pg_tblspc/&lt;/filename&gt; and the full path of that symbolic link.
           The default is false.
</span>
《マッチ度[79.117647]》ディレクトリ<code class="filename">pg_tblspc</code>にあるシンボリックリンクに関する情報を<code class="filename">tablespace_map</code>という名前のファイルに含めます。
テーブル空間マップファイルには、ディレクトリ<code class="filename">pg_tblspc/</code>に存在する各シンボリックリンクの名前とそのシンボリックリンクのフルパスが含まれています。
          </p></dd><dt><span class="term"><code class="literal">VERIFY_CHECKSUMS [ <em class="replaceable"><code>boolean</code></em> ]</code></span></dt><dd><p>
<span class="original">
           If true, checksums are verified during a base backup if they are
           enabled. If false, this is skipped. The default is true.
</span>
《機械翻訳》trueの場合、チェックサムが有効になっていれば、ベース・バックアップ中にチェックサムが検証されます。
falseの場合、スキップされます。
デフォルトはtrueです。
          </p></dd><dt><span class="term"><code class="literal">MANIFEST</code> <em class="replaceable"><code>manifest_option</code></em></span></dt><dd><p>
<span class="original">
           When this option is specified with a value of &lt;literal&gt;yes&lt;/literal&gt;
           or &lt;literal&gt;force-encode&lt;/literal&gt;, a backup manifest is created
           and sent along with the backup.  The manifest is a list of every
           file present in the backup with the exception of any WAL files that
           may be included. It also stores the size, last modification time, and
           optionally a checksum for each file.
           A value of &lt;literal&gt;force-encode&lt;/literal&gt; forces all filenames
           to be hex-encoded; otherwise, this type of encoding is performed only
           for files whose names are non-UTF8 octet sequences.
           &lt;literal&gt;force-encode&lt;/literal&gt; is intended primarily for testing
           purposes, to be sure that clients which read the backup manifest
           can handle this case. For compatibility with previous releases,
           the default is &lt;literal&gt;MANIFEST 'no'&lt;/literal&gt;.
</span>
このオプションを<code class="literal">yes</code>または<code class="literal">force-encode</code>の値で設定すると、バックアップマニフェストが作成され、バックアップとともに送信されます。
マニフェストは、含まれる可能性のあるWALファイルを除きバックアップ内に存在するすべてのファイルのリストです。
また、サイズ、最終更新時刻、オプションでファイル毎のチェックサムも格納します。
<code class="literal">force-encode</code>の値は、全てのファイル名を強制的に16進数でエンコーディングします。
それ以外の場合、このタイプのエンコードは、名前が非UTF-8オクテットシーケンスであるファイルに対してのみ実行されます。
<code class="literal">force-encode</code>は、主にテスト目的で使用されており、バックアップマニュフェストを読み取るクライアントがこのケースを処理できることを確認するために使用されます。
以前のリリースとの互換性を保つため、デフォルトは、<code class="literal">MANIFEST 'no'</code>です。
          </p></dd><dt><span class="term"><code class="literal">MANIFEST_CHECKSUMS</code> <em class="replaceable"><code>checksum_algorithm</code></em></span></dt><dd><p>
<span class="original">
           Specifies the checksum algorithm that should be applied to each file included
           in the backup manifest. Currently, the available
           algorithms are &lt;literal&gt;NONE&lt;/literal&gt;, &lt;literal&gt;CRC32C&lt;/literal&gt;,
           &lt;literal&gt;SHA224&lt;/literal&gt;, &lt;literal&gt;SHA256&lt;/literal&gt;,
           &lt;literal&gt;SHA384&lt;/literal&gt;, and &lt;literal&gt;SHA512&lt;/literal&gt;.
           The default is &lt;literal&gt;CRC32C&lt;/literal&gt;.
</span>
バックアップマニュフェストに含まれている各ファイルに適用するチェックサムアルゴリズムを指定します。
現在使用可能なアルゴリズムは、<code class="literal">NONE</code>、<code class="literal">CRC32C</code>、<code class="literal">SHA224</code>, <code class="literal">SHA256</code>、<code class="literal">SHA384</code>、<code class="literal">SHA512</code>です。
デフォルトは<code class="literal">CRC32C</code>です。
          </p></dd></dl></div><p>
      </p><p>
<span class="original">
       When the backup is started, the server will first send two
       ordinary result sets, followed by one or more CopyOutResponse
       results.
</span>
バックアップを開始する時、サーバはまず２つの通常の結果セットを送信し、続けて１つ以上のCopyOutResponse結果を送信します。
      </p><p>
<span class="original">
       The first ordinary result set contains the starting position of the
       backup, in a single row with two columns. The first column contains
       the start position given in XLogRecPtr format, and the second column
       contains the corresponding timeline ID.
</span>
最初の通常の結果セットには、1行2列という形でバックアップの開始位置が含まれます。
最初の列にはXLogRecPtr書式の開始位置が、2番目の列には対応するタイムラインIDが含まれます。
      </p><p>
<span class="original">
       The second ordinary result set has one row for each tablespace.
       The fields in this row are:
</span>
《機械翻訳》2番目の通常の結果セットには、表領域ごとに1つの行があります。
この行のフィールドは次のとおりです:

       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">spcoid</code> (<code class="type">oid</code>)</span></dt><dd><p>
<span class="original">
           The OID of the tablespace, or null if it's the base
           directory.
</span>
《機械翻訳》表領域のOID。
ベース・ディレクトリの場合はnull。
          </p></dd><dt><span class="term"><code class="literal">spclocation</code> (<code class="type">text</code>)</span></dt><dd><p>
<span class="original">
           The full path of the tablespace directory, or null
           if it's the base directory.
</span>
テーブル空間ディレクトリのフルパスです。
ベースディレクトリの場合はNULLです。
          </p></dd><dt><span class="term"><code class="literal">size</code> (<code class="type">int8</code>)</span></dt><dd><p>
<span class="original">
           The approximate size of the tablespace, in kilobytes (1024 bytes),
           if progress report has been requested; otherwise it's null.
</span>
進行状況の報告が要求された場合は、テーブル空間の概算容量です(キロバイト(1024バイト)単位)。
要求されていない場合はNULLです。
          </p></dd></dl></div><p>
      </p><p>
<span class="original">
       After the second regular result set, a CopyOutResponse will be sent.
       The payload of each CopyData message will contain a message in one of
       the following formats:
</span>
《機械翻訳》2番目の通常の結果セットの後、CopyOutResponseが送信されます。
各CopyDataメッセージのペイロードには、次のいずれかの形式のメッセージが含まれます:
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">new archive (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('n')</span></dt><dd><p>
<span class="original">
            Identifies the message as indicating the start of a new archive.
            There will be one archive for the main data directory and one
            for each additional tablespace; each will use tar format
            (following the &lt;quote&gt;ustar interchange format&lt;/quote&gt; specified
            in the POSIX 1003.1-2008 standard).
</span>
《機械翻訳》新規アーカイブの開始を示すメッセージを識別します。
メイン・データ・ディレクトリ用に1つのアーカイブがあり、追加表領域ごとに1つのアーカイブがあります。
各アーカイブはtarフォーマットを使用します<span class="quote">「<span class="quote">POSIX 1003.1-2008標準で規定されている</span>」</span>。
           </p></dd><dt><span class="term">String</span></dt><dd><p>
<span class="original">
            The file name for this archive.
</span>
《機械翻訳》このアーカイブのファイル名。
           </p></dd><dt><span class="term">String</span></dt><dd><p>
<span class="original">
            For the main data directory, an empty string. For other
            tablespaces, the full path to the directory from which this
            archive was created.
</span>
《機械翻訳》メインデータディレクトリの場合は空の文字列。
その他のテーブルスペースの場合は、このアーカイブが作成されたディレクトリへのフルパス。
           </p></dd></dl></div></dd><dt><span class="term">manifest (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('m')</span></dt><dd><p>
<span class="original">
            Identifies the message as indicating the start of the backup
            manifest.
</span>
《機械翻訳》バックアップマニフェストの開始を示すメッセージを識別します。
           </p></dd></dl></div></dd><dt><span class="term">archive or manifest data (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('d')</span></dt><dd><p>
<span class="original">
            Identifies the message as containing archive or manifest data.
</span>
《機械翻訳》メッセージにアーカイブデータまたはマニフェストデータが含まれていることを識別します。
           </p></dd><dt><span class="term">Byte<em class="replaceable"><code>n</code></em></span></dt><dd><p>
<span class="original">
            Data bytes.
</span>
《機械翻訳》データバイト。
           </p></dd></dl></div></dd><dt><span class="term">progress report (B)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Byte1('p')</span></dt><dd><p>
<span class="original">
            Identifies the message as a progress report.
</span>
《機械翻訳》メッセージが進捗レポートであることを識別します。
           </p></dd><dt><span class="term">Int64</span></dt><dd><p>
<span class="original">
            The number of bytes from the current tablespace for which
            processing has been completed.
</span>
《機械翻訳》処理が完了した現在の表領域のバイト数。
           </p></dd></dl></div></dd></dl></div><p>
<span class="original">
       After the CopyOutResponse, or all such responses, have been sent, a
       final ordinary result set will be sent, containing the WAL end position
       of the backup, in the same format as the start position.
</span>
《機械翻訳》CopyOutResponse、あるいはこのような応答の全てが送信された後に、バックアップのWAL終了位置を含む通常の最終結果セットが開始位置と同じフォーマットで送信されます。
      </p><p>
<span class="original">
       The tar archive for the data directory and each tablespace will contain
       all files in the directories, regardless of whether they are
       &lt;productname&gt;PostgreSQL&lt;/productname&gt; files or other files added to the same
       directory. The only excluded files are:
</span>
《マッチ度[64.285714]》データディレクトリと各テーブル空間のtarアーカイブには、そのディレクトリ内のファイルが<span class="productname">PostgreSQL</span>ファイルかそのディレクトリに追加された他のファイルかに関係なく、すべて含まれます。
以下に除かれるファイルを示します。

       </p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
          <code class="filename">postmaster.pid</code>
         </p></li><li class="listitem" style="list-style-type: disc"><p>
          <code class="filename">postmaster.opts</code>
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          &lt;filename&gt;pg_internal.init&lt;/filename&gt; (found in multiple directories)
</span>
          <code class="filename">pg_internal.init</code>（複数のディレクトリに在ります）
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          Various temporary files and directories created during the operation
          of the PostgreSQL server, such as any file or directory beginning
          with &lt;filename&gt;pgsql_tmp&lt;/filename&gt; and temporary relations.
</span>
PostgreSQLサーバの操作中に作成される種々の一時ファイルおよびディレクトリで、<code class="filename">pgsql_tmp</code>で始まるすべてのファイルおよびディレクトリ、および一時リレーション。
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          Unlogged relations, except for the init fork which is required to
          recreate the (empty) unlogged relation on recovery.
</span>
ログを取らないリレーション。ただし、リカバリでログを取らないリレーションの再作成に必要なinitフォークは除かれない。
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          &lt;filename&gt;pg_wal&lt;/filename&gt;, including subdirectories. If the backup is run
          with WAL files included, a synthesized version of &lt;filename&gt;pg_wal&lt;/filename&gt; will be
          included, but it will only contain the files necessary for the
          backup to work, not the rest of the contents.
</span>
サブディレクトリを含む<code class="filename">pg_wal</code>。
バックアップがwalファイルを含めて実行される場合、合成された版の<code class="filename">pg_wal</code>が含まれます。
これにはバックアップが動作するために必要なファイルのみが含まれ、残りの内容は含まれません。
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          &lt;filename&gt;pg_dynshmem&lt;/filename&gt;, &lt;filename&gt;pg_notify&lt;/filename&gt;,
          &lt;filename&gt;pg_replslot&lt;/filename&gt;, &lt;filename&gt;pg_serial&lt;/filename&gt;,
          &lt;filename&gt;pg_snapshots&lt;/filename&gt;, &lt;filename&gt;pg_stat_tmp&lt;/filename&gt;, and
          &lt;filename&gt;pg_subtrans&lt;/filename&gt; are copied as empty directories (even if
          they are symbolic links).
</span>
<code class="filename">pg_dynshmem</code>、<code class="filename">pg_notify</code>、<code class="filename">pg_replslot</code>、<code class="filename">pg_serial</code>、<code class="filename">pg_snapshots</code>、<code class="filename">pg_stat_tmp</code>、<code class="filename">pg_subtrans</code>は（それがシンボリックリンクであったとしても）空のディレクトリとしてコピーされます。
         </p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="original">
          Files other than regular files and directories, such as symbolic
          links (other than for the directories listed above) and special
          device files, are skipped.  (Symbolic links
          in &lt;filename&gt;pg_tblspc&lt;/filename&gt; are maintained.)
</span>
シンボリックリンク（上記で列挙したディレクトリは除きます）や特殊デバイスファイルなど、通常のファイルとディレクトリ以外のものは省略されます。
（<code class="filename">pg_tblspc</code>中のシンボリックリンクは保持されます。）
         </p></li></ul></div><p>
       Owner, group, and file mode are set if the underlying file system on
       the server supports it.
      </p></dd></dl></div><p>
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sasl-authentication.html" title="55.3. SASL認証">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="protocol.html" title="第55章 フロントエンド/バックエンドプロトコル">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="protocol-logical-replication.html" title="55.5. 論理ストリーミングレプリケーションのプロトコル">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">55.3. SASL認証 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 55.5. 論理ストリーミングレプリケーションのプロトコル</td></tr></table></div></body></html>