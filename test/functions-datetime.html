<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.9. 日付/時刻関数と演算子</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="functions-formatting.html" title="9.8. データ型書式設定関数" /><link rel="next" href="functions-enum.html" title="9.10. 列挙型サポート関数" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15rc2文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="functions.html" title="第9章 関数と演算子">第9章 関数と演算子</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 15rc2 : functions-datetime.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-formatting.html" title="9.8. データ型書式設定関数">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="第9章 関数と演算子">上へ</a></td><td width="60%" align="center">9.9. 日付/時刻関数と演算子</td><td width="20%" align="right"> <a accesskey="n" href="functions-enum.html" title="9.10. 列挙型サポート関数">次へ</a></td></tr></table><hr /></div><div class="sect1" id="FUNCTIONS-DATETIME"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.9. 日付/時刻関数と演算子</h2></div></div></div><span class="original">
   &lt;title&gt;Date/Time Functions and Operators&lt;/title&gt;
</span><p>
<span class="original">
   &lt;xref linkend="functions-datetime-table"/&gt; shows the available
   functions for date/time value processing, with details appearing in
   the following subsections.  &lt;xref
   linkend="operators-datetime-table"/&gt; illustrates the behaviors of
   the basic arithmetic operators (&lt;literal&gt;+&lt;/literal&gt;,
   &lt;literal&gt;*&lt;/literal&gt;, etc.).  For formatting functions, refer to
   &lt;xref linkend="functions-formatting"/&gt;.  You should be familiar with
   the background information on date/time data types from &lt;xref
   linkend="datatype-datetime"/&gt;.
</span>
<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-TABLE" title="表9.33 日付/時刻関数演算子">表 9.33</a>は、日付/時刻型の値の処理で使用可能な関数を示しています。詳細は、以下の副節で説明します。
<a class="xref" href="functions-datetime.html#OPERATORS-DATETIME-TABLE" title="表9.32 日付/時刻演算子">表 9.32</a>は、（<code class="literal">+</code>、<code class="literal">*</code>等の）基本的な算術演算子の振舞いを説明しています。
書式設定関数については<a class="xref" href="functions-formatting.html" title="9.8. データ型書式設定関数">9.8</a>を参照してください。
<a class="xref" href="datatype-datetime.html" title="8.5. 日付/時刻データ型">8.5</a>を参照して、日付/時刻データ型についての背景となっている情報に精通していなければなりません。
  </p><p>
<span class="original">
   In addition, the usual comparison operators shown in
   &lt;xref linkend="functions-comparison-op-table"/&gt; are available for the
   date/time types.  Dates and timestamps (with or without time zone) are
   all comparable, while times (with or without time zone) and intervals
   can only be compared to other values of the same data type.  When
   comparing a timestamp without time zone to a timestamp with time zone,
   the former value is assumed to be given in the time zone specified by
   the &lt;xref linkend="guc-timezone"/&gt; configuration parameter, and is
   rotated to UTC for comparison to the latter value (which is already
   in UTC internally).  Similarly, a date value is assumed to represent
   midnight in the &lt;varname&gt;TimeZone&lt;/varname&gt; zone when comparing it
   to a timestamp.
</span>
加えて<a class="xref" href="functions-comparison.html#FUNCTIONS-COMPARISON-OP-TABLE" title="表9.1 比較演算子">表 9.1</a>で示す通常の比較演算子が日付/時刻型で利用できます。
日付とタイムスタンプ（時間帯付きあるいは時間帯なし）はすべて互換性がありますが、時刻（時間帯付きあるいは時間帯なし）と時間間隔は同じデータ型の値同士だけが比較可能です。
時間帯なしのタイムスタンプと時間帯付きのタイムスタンプを比較する際には、前者の値は<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>設定パラメータで指定された時間帯にあるものと仮定され、後者の値（すでに内部的にはUTCです）と比較するためにUTCに変換されます。
同様に、タイムスタンプと比較する際には、日付の値は<code class="varname">TimeZone</code>時間帯の午前零時であると見なされます。
  </p><p>
<span class="original">
   All the functions and operators described below that take &lt;type&gt;time&lt;/type&gt; or &lt;type&gt;timestamp&lt;/type&gt;
   inputs actually come in two variants: one that takes &lt;type&gt;time with time zone&lt;/type&gt; or &lt;type&gt;timestamp
   with time zone&lt;/type&gt;, and one that takes &lt;type&gt;time without time zone&lt;/type&gt; or &lt;type&gt;timestamp without time zone&lt;/type&gt;.
   For brevity, these variants are not shown separately.  Also, the
   &lt;literal&gt;+&lt;/literal&gt; and &lt;literal&gt;*&lt;/literal&gt; operators come in commutative pairs (for
   example both &lt;type&gt;date&lt;/type&gt; &lt;literal&gt;+&lt;/literal&gt; &lt;type&gt;integer&lt;/type&gt;
   and &lt;type&gt;integer&lt;/type&gt; &lt;literal&gt;+&lt;/literal&gt; &lt;type&gt;date&lt;/type&gt;); we show
   only one of each such pair.
</span>
以下の<code class="type">time</code>もしくは<code class="type">timestamp</code>型の入力を受け取る関数および演算子は全て、実際には2つの種類があります。1つは<code class="type">time with time zone</code>型または<code class="type">timestamp with time zone</code>型を取るもので、もう1つは<code class="type">time without time zone</code>型もしくは<code class="type">timestamp without time zone</code>型を取るものです。
簡略化のため、これらの種類の違いは個別に示していません。
また、<code class="literal">+</code>と<code class="literal">*</code>演算子は可換な2項をとります（例えば<code class="type">date</code> <code class="literal">+</code> <code class="type">integer</code>と<code class="type">integer</code> <code class="literal">+</code> <code class="type">date</code>）。こうした組み合わせは片方のみ示します。
  </p><div class="table" id="OPERATORS-DATETIME-TABLE"><p class="title"><strong>表9.32 日付/時刻演算子</strong></p><div class="table-contents"><span class="original">
     &lt;title&gt;Date/Time Operators&lt;/title&gt;
</span><table class="table" summary="日付/時刻演算子" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<span class="original">
         Operator
</span>
演算子
        </p>
        <p>
<span class="original">
         Description
</span>
説明
        </p>
        <p>
<span class="original">
         Example(s)
</span>
例
        </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">+</code> <code class="type">integer</code>
         → <code class="returnvalue">date</code>
        </p>
        <p>
<span class="original">
         Add a number of days to a date
</span>
日付に日数を加算
        </p>
        <p>
         <code class="literal">date '2001-09-28' + 7</code>
         → <code class="returnvalue">2001-10-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">+</code> <code class="type">interval</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Add an interval to a date
</span>
時刻間隔を日付に加算
        </p>
        <p>
         <code class="literal">date '2001-09-28' + interval '1 hour'</code>
         → <code class="returnvalue">2001-09-28 01:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">+</code> <code class="type">time</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Add a time-of-day to a date
</span>
日付に時刻を加算
        </p>
        <p>
         <code class="literal">date '2001-09-28' + time '03:00'</code>
         → <code class="returnvalue">2001-09-28 03:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">interval</code> <code class="literal">+</code> <code class="type">interval</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Add intervals
</span>
時間間隔を加算
        </p>
        <p>
         <code class="literal">interval '1 day' + interval '1 hour'</code>
         → <code class="returnvalue">1 day 01:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">timestamp</code> <code class="literal">+</code> <code class="type">interval</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Add an interval to a timestamp
</span>
時間間隔をタイムスタンプに加算
        </p>
        <p>
         <code class="literal">timestamp '2001-09-28 01:00' + interval '23 hours'</code>
         → <code class="returnvalue">2001-09-29 00:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">time</code> <code class="literal">+</code> <code class="type">interval</code>
         → <code class="returnvalue">time</code>
        </p>
        <p>
<span class="original">
         Add an interval to a time
</span>
時間間隔を時分に加算
        </p>
        <p>
         <code class="literal">time '01:00' + interval '3 hours'</code>
         → <code class="returnvalue">04:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="literal">-</code> <code class="type">interval</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Negate an interval
</span>
時間間隔の符号を反転
        </p>
        <p>
         <code class="literal">- interval '23 hours'</code>
         → <code class="returnvalue">-23:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">-</code> <code class="type">date</code>
         → <code class="returnvalue">integer</code>
        </p>
        <p>
<span class="original">
         Subtract dates, producing the number of days elapsed
</span>
日付を減算し、経過日数を返す
        </p>
        <p>
         <code class="literal">date '2001-10-01' - date '2001-09-28'</code>
         → <code class="returnvalue">3</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">-</code> <code class="type">integer</code>
         → <code class="returnvalue">date</code>
        </p>
        <p>
<span class="original">
         Subtract a number of days from a date
</span>
日付から日数を減算
        </p>
        <p>
         <code class="literal">date '2001-10-01' - 7</code>
         → <code class="returnvalue">2001-09-24</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">date</code> <code class="literal">-</code> <code class="type">interval</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Subtract an interval from a date
</span>
日付から時間間隔を減算
        </p>
        <p>
         <code class="literal">date '2001-09-28' - interval '1 hour'</code>
         → <code class="returnvalue">2001-09-27 23:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">time</code> <code class="literal">-</code> <code class="type">time</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Subtract times
</span>
時分を減算
        </p>
        <p>
         <code class="literal">time '05:00' - time '03:00'</code>
         → <code class="returnvalue">02:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">time</code> <code class="literal">-</code> <code class="type">interval</code>
         → <code class="returnvalue">time</code>
        </p>
        <p>
<span class="original">
         Subtract an interval from a time
</span>
時分から時刻間隔を減算
        </p>
        <p>
         <code class="literal">time '05:00' - interval '2 hours'</code>
         → <code class="returnvalue">03:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">timestamp</code> <code class="literal">-</code> <code class="type">interval</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Subtract an interval from a timestamp
</span>
タイムスタンプから時刻間隔を減算
        </p>
        <p>
         <code class="literal">timestamp '2001-09-28 23:00' - interval '23 hours'</code>
         → <code class="returnvalue">2001-09-28 00:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">interval</code> <code class="literal">-</code> <code class="type">interval</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Subtract intervals
</span>
時間間隔を減算
        </p>
        <p>
         <code class="literal">interval '1 day' - interval '1 hour'</code>
         → <code class="returnvalue">1 day -01:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">timestamp</code> <code class="literal">-</code> <code class="type">timestamp</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Subtract timestamps (converting 24-hour intervals into days,
         similarly to &lt;function&gt;justify_hours()&lt;/function&gt;)
</span>
タイムスタンプを減算（<code class="function">justify_hours()</code>と同様に24時間間隔を日数に変換）
        </p>
        <p>
         <code class="literal">timestamp '2001-09-29 03:00' - timestamp '2001-07-27 12:00'</code>
         → <code class="returnvalue">63 days 15:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">interval</code> <code class="literal">*</code> <code class="type">double precision</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Multiply an interval by a scalar
</span>
時間間隔にスカラーを乗算
        </p>
        <p>
         <code class="literal">interval '1 second' * 900</code>
         → <code class="returnvalue">00:15:00</code>
        </p>
        <p>
         <code class="literal">interval '1 day' * 21</code>
         → <code class="returnvalue">21 days</code>
        </p>
        <p>
         <code class="literal">interval '1 hour' * 3.5</code>
         → <code class="returnvalue">03:30:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">interval</code> <code class="literal">/</code> <code class="type">double precision</code>
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Divide an interval by a scalar
</span>
時間間隔をスカラーで除算
        </p>
        <p>
         <code class="literal">interval '1 hour' / 1.5</code>
         → <code class="returnvalue">00:40:00</code>
        </p></td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-DATETIME-TABLE"><p class="title"><strong>表9.33 日付/時刻関数演算子</strong></p><div class="table-contents"><span class="original">
     &lt;title&gt;Date/Time Functions&lt;/title&gt;
</span><table class="table" summary="日付/時刻関数演算子" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<span class="original">
         Function
</span>
関数
        </p>
        <p>
<span class="original">
         Description
</span>
説明
        </p>
        <p>
<span class="original">
         Example(s)
</span>
例
        </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.1.1.1.1" class="indexterm"></a>
         <code class="function">age</code> ( <code class="type">timestamp</code>, <code class="type">timestamp</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Subtract arguments, producing a &lt;quote&gt;symbolic&lt;/quote&gt; result that
         uses years and months, rather than just days
</span>
引数間の減算。日数だけでなく年と月を使用した<span class="quote">「<span class="quote">言葉による</span>」</span>結果を生成
        </p>
        <p>
         <code class="literal">age(timestamp '2001-04-10', timestamp '1957-06-13')</code>
         → <code class="returnvalue">43 years 9 mons 27 days</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">age</code> ( <code class="type">timestamp</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Subtract argument from &lt;function&gt;current_date&lt;/function&gt; (at midnight)
</span>
<code class="function">current_date</code>（午前零時時点）から引数を減算
        </p>
        <p>
         <code class="literal">age(timestamp '1957-06-13')</code>
         → <code class="returnvalue">62 years 6 mons 10 days</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.3.1.1.1" class="indexterm"></a>
         <code class="function">clock_timestamp</code> ( )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (changes during statement execution);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（文実行中に変化する）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">clock_timestamp()</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.4.1.1.1" class="indexterm"></a>
         <code class="function">current_date</code>
         → <code class="returnvalue">date</code>
        </p>
        <p>
<span class="original">
         Current date; see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照
        </p>
        <p>
         <code class="literal">current_date</code>
         → <code class="returnvalue">2019-12-23</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.5.1.1.1" class="indexterm"></a>
         <code class="function">current_time</code>
         → <code class="returnvalue">time with time zone</code>
        </p>
        <p>
<span class="original">
         Current time of day; see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の時刻。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">current_time</code>
         → <code class="returnvalue">14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">current_time</code> ( <code class="type">integer</code> )
         → <code class="returnvalue">time with time zone</code>
        </p>
        <p>
<span class="original">
         Current time of day, with limited precision;
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
精度を限定した現在の時刻。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">current_time(2)</code>
         → <code class="returnvalue">14:39:53.66-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.7.1.1.1" class="indexterm"></a>
         <code class="function">current_timestamp</code>
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current transaction);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">current_timestamp</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">current_timestamp</code> ( <code class="type">integer</code> )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current transaction), with limited precision;
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
精度を限定した現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">current_timestamp(0)</code>
         → <code class="returnvalue">2019-12-23 14:39:53-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">date_bin</code> ( <code class="type">interval</code>, <code class="type">timestamp</code>, <code class="type">timestamp</code> )
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Bin input into specified interval aligned with specified origin; see &lt;xref linkend="functions-datetime-bin"/&gt;
</span>
指定した起源に合わせて指定の時間間隔に切り捨てます。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-BIN" title="9.9.3. date_bin">9.9.3</a>を参照してください。
        </p>
        <p>
         <code class="literal">date_bin('15 minutes', timestamp '2001-02-16 20:38:40', timestamp '2001-02-16 20:05:00')</code>
         → <code class="returnvalue">2001-02-16 20:35:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.10.1.1.1" class="indexterm"></a>
         <code class="function">date_part</code> ( <code class="type">text</code>, <code class="type">timestamp</code> )
         → <code class="returnvalue">double precision</code>
        </p>
        <p>
<span class="original">
         Get timestamp subfield (equivalent to &lt;function&gt;extract&lt;/function&gt;);
         see &lt;xref linkend="functions-datetime-extract"/&gt;
</span>
タイムスタンプの部分フィールドの取得（<code class="function">extract</code>と同じ）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part">9.9.1</a>を参照。
        </p>
        <p>
         <code class="literal">date_part('hour', timestamp '2001-02-16 20:38:40')</code>
         → <code class="returnvalue">20</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">date_part</code> ( <code class="type">text</code>, <code class="type">interval</code> )
         → <code class="returnvalue">double precision</code>
        </p>
        <p>
<span class="original">
         Get interval subfield (equivalent to &lt;function&gt;extract&lt;/function&gt;);
         see &lt;xref linkend="functions-datetime-extract"/&gt;
</span>
時間間隔の部分フィールドの取得（<code class="function">extract</code>と同じ）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part">9.9.1</a>を参照。
        </p>
        <p>
         <code class="literal">date_part('month', interval '2 years 3 months')</code>
         → <code class="returnvalue">3</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.12.1.1.1" class="indexterm"></a>
         <code class="function">date_trunc</code> ( <code class="type">text</code>, <code class="type">timestamp</code> )
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Truncate to specified precision; see &lt;xref linkend="functions-datetime-trunc"/&gt;
</span>
指定された精度で切り捨て。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC" title="9.9.2. date_trunc">9.9.2</a>参照。
        </p>
        <p>
         <code class="literal">date_trunc('hour', timestamp '2001-02-16 20:38:40')</code>
         → <code class="returnvalue">2001-02-16 20:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">date_trunc</code> ( <code class="type">text</code>, <code class="type">timestamp with time zone</code>, <code class="type">text</code> )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Truncate to specified precision in the specified time zone; see
         &lt;xref linkend="functions-datetime-trunc"/&gt;
</span>
指定された時間帯において指定された精度で切り捨て。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC" title="9.9.2. date_trunc">9.9.2</a>参照
        </p>
        <p>
         <code class="literal">date_trunc('day', timestamptz '2001-02-16 20:38:40+00', 'Australia/Sydney')</code>
         → <code class="returnvalue">2001-02-16 13:00:00+00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">date_trunc</code> ( <code class="type">text</code>, <code class="type">interval</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Truncate to specified precision; see
         &lt;xref linkend="functions-datetime-trunc"/&gt;
</span>
指定された精度で切り捨て。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC" title="9.9.2. date_trunc">9.9.2</a>参照。
        </p>
        <p>
         <code class="literal">date_trunc('hour', interval '2 days 3 hours 40 minutes')</code>
         → <code class="returnvalue">2 days 03:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.15.1.1.1" class="indexterm"></a>
         <code class="function">extract</code> ( <em class="parameter"><code>field</code></em> <code class="literal">from</code> <code class="type">timestamp</code> )
         → <code class="returnvalue">numeric</code>
        </p>
        <p>
<span class="original">
         Get timestamp subfield; see &lt;xref linkend="functions-datetime-extract"/&gt;
</span>
タイムスタンプの部分フィールドの取得。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part">9.9.1</a>を参照。
        </p>
        <p>
         <code class="literal">extract(hour from timestamp '2001-02-16 20:38:40')</code>
         → <code class="returnvalue">20</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">extract</code> ( <em class="parameter"><code>field</code></em> <code class="literal">from</code> <code class="type">interval</code> )
         → <code class="returnvalue">numeric</code>
        </p>
        <p>
<span class="original">
         Get interval subfield; see &lt;xref linkend="functions-datetime-extract"/&gt;
</span>
時間間隔の部分フィールドの取得。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part">9.9.1</a>を参照。
        </p>
        <p>
         <code class="literal">extract(month from interval '2 years 3 months')</code>
         → <code class="returnvalue">3</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.17.1.1.1" class="indexterm"></a>
         <code class="function">isfinite</code> ( <code class="type">date</code> )
         → <code class="returnvalue">boolean</code>
        </p>
        <p>
<span class="original">
         Test for finite date (not +/-infinity)
</span>
日付が有限（+/-無限でない）かどうかの検査
        </p>
        <p>
         <code class="literal">isfinite(date '2001-02-16')</code>
         → <code class="returnvalue">true</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">isfinite</code> ( <code class="type">timestamp</code> )
         → <code class="returnvalue">boolean</code>
        </p>
        <p>
<span class="original">
         Test for finite timestamp (not +/-infinity)
</span>
タイムスタンプが有限（+/-無限でない）かどうかの検査
        </p>
        <p>
         <code class="literal">isfinite(timestamp 'infinity')</code>
         → <code class="returnvalue">false</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">isfinite</code> ( <code class="type">interval</code> )
         → <code class="returnvalue">boolean</code>
        </p>
        <p>
<span class="original">
         Test for finite interval (currently always true)
</span>
時間間隔が有限かどうかの検査（今の所常に真）
        </p>
        <p>
         <code class="literal">isfinite(interval '4 hours')</code>
         → <code class="returnvalue">true</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.20.1.1.1" class="indexterm"></a>
         <code class="function">justify_days</code> ( <code class="type">interval</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Adjust interval so 30-day time periods are represented as months
</span>
30日周期が1月を表すように時間間隔を調整
        </p>
        <p>
         <code class="literal">justify_days(interval '35 days')</code>
         → <code class="returnvalue">1 mon 5 days</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.21.1.1.1" class="indexterm"></a>
         <code class="function">justify_hours</code> ( <code class="type">interval</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Adjust interval so 24-hour time periods are represented as days
</span>
24時間を1日とする時間間隔の調整
        </p>
        <p>
         <code class="literal">justify_hours(interval '27 hours')</code>
         → <code class="returnvalue">1 day 03:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.22.1.1.1" class="indexterm"></a>
         <code class="function">justify_interval</code> ( <code class="type">interval</code> )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Adjust interval using &lt;function&gt;justify_days&lt;/function&gt;
         and &lt;function&gt;justify_hours&lt;/function&gt;, with additional sign
         adjustments
</span>
<code class="function">justify_days</code>および<code class="function">justify_hours</code>を使用し、さらに符号による調整を行っての時間間隔の調整
        </p>
        <p>
         <code class="literal">justify_interval(interval '1 mon -1 hour')</code>
         → <code class="returnvalue">29 days 23:00:00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.23.1.1.1" class="indexterm"></a>
         <code class="function">localtime</code>
         → <code class="returnvalue">time</code>
        </p>
        <p>
<span class="original">
         Current time of day;
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の時刻。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">localtime</code>
         → <code class="returnvalue">14:39:53.662522</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">localtime</code> ( <code class="type">integer</code> )
         → <code class="returnvalue">time</code>
        </p>
        <p>
<span class="original">
         Current time of day, with limited precision;
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
精度を限定した現在の時刻。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">localtime(0)</code>
         → <code class="returnvalue">14:39:53</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.25.1.1.1" class="indexterm"></a>
         <code class="function">localtimestamp</code>
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current transaction);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">localtimestamp</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="function">localtimestamp</code> ( <code class="type">integer</code> )
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current
         transaction), with limited precision;
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
精度を限定した現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">localtimestamp(2)</code>
         → <code class="returnvalue">2019-12-23 14:39:53.66</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.27.1.1.1" class="indexterm"></a>
         <code class="function">make_date</code> ( <em class="parameter"><code>year</code></em> <code class="type">int</code>,
         <em class="parameter"><code>month</code></em> <code class="type">int</code>,
         <em class="parameter"><code>day</code></em> <code class="type">int</code> )
         → <code class="returnvalue">date</code>
        </p>
        <p>
<span class="original">
         Create date from year, month and day fields
         (negative years signify BC)
</span>
年、月、日フィールドから日付を作成（負の年はBCを意味します）
        </p>
        <p>
         <code class="literal">make_date(2013, 7, 15)</code>
         → <code class="returnvalue">2013-07-15</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.17.6.2.2.28.1.1.1" class="indexterm"></a>
         <code class="function">make_interval</code> ( [<span class="optional"> <em class="parameter"><code>years</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>months</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>weeks</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>days</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>hours</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>mins</code></em> <code class="type">int</code>
         [<span class="optional">, <em class="parameter"><code>secs</code></em> <code class="type">double precision</code>
         </span>]</span>]</span>]</span>]</span>]</span>]</span>] )
         → <code class="returnvalue">interval</code>
        </p>
        <p>
<span class="original">
         Create interval from years, months, weeks, days, hours, minutes and
         seconds fields, each of which can default to zero
</span>
年、月、週、日、時間、分、秒フィールドから時間間隔を作成
        </p>
        <p>
         <code class="literal">make_interval(days =&gt; 10)</code>
         → <code class="returnvalue">10 days</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.29.1.1.1" class="indexterm"></a>
         <code class="function">make_time</code> ( <em class="parameter"><code>hour</code></em> <code class="type">int</code>,
         <em class="parameter"><code>min</code></em> <code class="type">int</code>,
         <em class="parameter"><code>sec</code></em> <code class="type">double precision</code> )
         → <code class="returnvalue">time</code>
        </p>
        <p>
<span class="original">
         Create time from hour, minute and seconds fields
</span>
時、分、秒フィールドから時刻を作成
        </p>
        <p>
         <code class="literal">make_time(8, 15, 23.5)</code>
         → <code class="returnvalue">08:15:23.5</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.30.1.1.1" class="indexterm"></a>
         <code class="function">make_timestamp</code> ( <em class="parameter"><code>year</code></em> <code class="type">int</code>,
         <em class="parameter"><code>month</code></em> <code class="type">int</code>,
         <em class="parameter"><code>day</code></em> <code class="type">int</code>,
         <em class="parameter"><code>hour</code></em> <code class="type">int</code>,
         <em class="parameter"><code>min</code></em> <code class="type">int</code>,
         <em class="parameter"><code>sec</code></em> <code class="type">double precision</code> )
         → <code class="returnvalue">timestamp</code>
        </p>
        <p>
<span class="original">
         Create timestamp from year, month, day, hour, minute and seconds fields
         (negative years signify BC)
</span>
年、月、日、時、分、秒フィールドから時刻を作成（負の年はBCを意味します）
        </p>
        <p>
         <code class="literal">make_timestamp(2013, 7, 15, 8, 15, 23.5)</code>
         → <code class="returnvalue">2013-07-15 08:15:23.5</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.31.1.1.1" class="indexterm"></a>
         <code class="function">make_timestamptz</code> ( <em class="parameter"><code>year</code></em> <code class="type">int</code>,
         <em class="parameter"><code>month</code></em> <code class="type">int</code>,
         <em class="parameter"><code>day</code></em> <code class="type">int</code>,
         <em class="parameter"><code>hour</code></em> <code class="type">int</code>,
         <em class="parameter"><code>min</code></em> <code class="type">int</code>,
         <em class="parameter"><code>sec</code></em> <code class="type">double precision</code>
         [<span class="optional">, <em class="parameter"><code>timezone</code></em> <code class="type">text</code> </span>] )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Create timestamp with time zone from year, month, day, hour, minute
         and seconds fields (negative years signify BC).
         If &lt;parameter&gt;timezone&lt;/parameter&gt; is not
         specified, the current time zone is used; the examples assume the
         session time zone is &lt;literal&gt;Europe/London&lt;/literal&gt;
</span>
年、月、日、時、分、秒フィールドから時間帯付きの時刻を作成（負の年はBCを意味する）。
<em class="parameter"><code>timezone</code></em>が指定されていなければ、現在の時間帯が使われる。
例ではセッションの時間帯が<code class="literal">Europe/London</code>であると仮定。
        </p>
        <p>
         <code class="literal">make_timestamptz(2013, 7, 15, 8, 15, 23.5)</code>
         → <code class="returnvalue">2013-07-15 08:15:23.5+01</code>
        </p>
        <p>
         <code class="literal">make_timestamptz(2013, 7, 15, 8, 15, 23.5, 'America/New_York')</code>
         → <code class="returnvalue">2013-07-15 13:15:23.5+01</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.32.1.1.1" class="indexterm"></a>
         <code class="function">now</code> ( )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current transaction);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">now()</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.33.1.1.1" class="indexterm"></a>
         <code class="function">statement_timestamp</code> ( )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current statement);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（現在の文の開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">statement_timestamp()</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.34.1.1.1" class="indexterm"></a>
         <code class="function">timeofday</code> ( )
         → <code class="returnvalue">text</code>
        </p>
        <p>
<span class="original">
         Current date and time
         (like &lt;function&gt;clock_timestamp&lt;/function&gt;, but as a &lt;type&gt;text&lt;/type&gt; string);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（<code class="function">clock_timestamp</code>と似ているが、<code class="type">text</code>型文字列として返す）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">timeofday()</code>
         → <code class="returnvalue">Mon Dec 23 14:39:53.662522 2019 EST</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.35.1.1.1" class="indexterm"></a>
         <code class="function">transaction_timestamp</code> ( )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Current date and time (start of current transaction);
         see &lt;xref linkend="functions-datetime-current"/&gt;
</span>
現在の日付と時刻（現在のトランザクションの開始時）。<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.5. 現在の日付/時刻">9.9.5</a>を参照。
        </p>
        <p>
         <code class="literal">transaction_timestamp()</code>
         → <code class="returnvalue">2019-12-23 14:39:53.662522-05</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.17.6.2.2.36.1.1.1" class="indexterm"></a>
         <code class="function">to_timestamp</code> ( <code class="type">double precision</code> )
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Convert Unix epoch (seconds since 1970-01-01 00:00:00+00) to
         timestamp with time zone
</span>
Unixエポック時間（1970-01-01 00:00:00+00からの経過秒数）をtimestamp with time zoneに変換
        </p>
        <p>
         <code class="literal">to_timestamp(1284352323)</code>
         → <code class="returnvalue">2010-09-13 04:32:03+00</code>
        </p></td></tr></tbody></table></div></div><br class="table-break" /><p>
    <a id="id-1.5.8.17.7.1" class="indexterm"></a>
<span class="original">
    In addition to these functions, the SQL &lt;literal&gt;OVERLAPS&lt;/literal&gt; operator is
    supported:
</span>
これらの関数に加え、<code class="literal">OVERLAPS</code> SQL演算子がサポートされています。
</p><pre class="synopsis">
(<em class="replaceable"><code>start1</code></em>, <em class="replaceable"><code>end1</code></em>) OVERLAPS (<em class="replaceable"><code>start2</code></em>, <em class="replaceable"><code>end2</code></em>)
(<em class="replaceable"><code>start1</code></em>, <em class="replaceable"><code>length1</code></em>) OVERLAPS (<em class="replaceable"><code>start2</code></em>, <em class="replaceable"><code>length2</code></em>)
</pre><p>
<span class="original">
    This expression yields true when two time periods (defined by their
    endpoints) overlap, false when they do not overlap.  The endpoints
    can be specified as pairs of dates, times, or time stamps; or as
    a date, time, or time stamp followed by an interval.  When a pair
    of values is provided, either the start or the end can be written
    first; &lt;literal&gt;OVERLAPS&lt;/literal&gt; automatically takes the earlier value
    of the pair as the start.  Each time period is considered to
    represent the half-open interval &lt;replaceable&gt;start&lt;/replaceable&gt; &lt;literal&gt;&amp;lt;=&lt;/literal&gt;
    &lt;replaceable&gt;time&lt;/replaceable&gt; &lt;literal&gt;&amp;lt;&lt;/literal&gt; &lt;replaceable&gt;end&lt;/replaceable&gt;, unless
    &lt;replaceable&gt;start&lt;/replaceable&gt; and &lt;replaceable&gt;end&lt;/replaceable&gt; are equal in which case it
    represents that single time instant.  This means for instance that two
    time periods with only an endpoint in common do not overlap.
</span>
この式は、2つの時間間隔（その両端で定義されます）が重なる時に真を返します。重ならない場合は偽を返します。
両端は2つの日付、時刻、タイムスタンプとして、もしくは、日付/時刻/タイムスタンプとそれに続く時間間隔として指定できます。
値の組み合わせで指定する場合、開始と終了のいずれを先に記述しても構いません。<code class="literal">OVERLAPS</code>は与えられた値のうち、早い方を開始として扱います。
各時間間隔は、<em class="replaceable"><code>start</code></em> <code class="literal">&lt;=</code> <em class="replaceable"><code>time</code></em> <code class="literal">&lt;</code> <em class="replaceable"><code>end</code></em>という半開区間として見なされます。ただし、<em class="replaceable"><code>start</code></em>と<em class="replaceable"><code>end</code></em>が同じ値の場合には単一の時間点となります。
これは、例えば端点のみが共通である2つの時間間隔は、重ならないということを意味します。
   </p><pre class="screen">
SELECT (DATE '2001-02-16', DATE '2001-12-21') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">true</code>
SELECT (DATE '2001-02-16', INTERVAL '100 days') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">false</code>
SELECT (DATE '2001-10-29', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">false</code>
SELECT (DATE '2001-10-30', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">true</code>
</pre><p>
<span class="original">
   When adding an &lt;type&gt;interval&lt;/type&gt; value to (or subtracting an
   &lt;type&gt;interval&lt;/type&gt; value from) a &lt;type&gt;timestamp with time zone&lt;/type&gt;
   value, the days component advances or decrements the date of the
   &lt;type&gt;timestamp with time zone&lt;/type&gt; by the indicated number of days,
   keeping the time of day the same.
   Across daylight saving time changes (when the session time zone is set to a
   time zone that recognizes DST), this means &lt;literal&gt;interval '1 day'&lt;/literal&gt;
   does not necessarily equal &lt;literal&gt;interval '24 hours'&lt;/literal&gt;.
   For example, with the session time zone set
   to &lt;literal&gt;America/Denver&lt;/literal&gt;:
&lt;screen&gt;
SELECT timestamp with time zone '2005-04-02 12:00:00-07' + interval '1 day';
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;2005-04-03 12:00:00-06&lt;/computeroutput&gt;
SELECT timestamp with time zone '2005-04-02 12:00:00-07' + interval '24 hours';
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;2005-04-03 13:00:00-06&lt;/computeroutput&gt;
&lt;/screen&gt;
   This happens because an hour was skipped due to a change in daylight saving
   time at &lt;literal&gt;2005-04-03 02:00:00&lt;/literal&gt; in time zone
   &lt;literal&gt;America/Denver&lt;/literal&gt;.
</span>
<code class="type">timestamp with time zone</code>の値に<code class="type">interval</code>の値を加える時（または<code class="type">interval</code>の値を引く時）、日にちの部分は、<code class="type">timestamp with time zone</code>の日付を指定された日数だけ先に進める、もしくは後に戻し、時刻は同じに保ちます。
（セッションの時間帯がDSTを認識する設定の場合）夏時間の移行に跨っての変化に関しては、<code class="literal">interval '1 day'</code>が<code class="literal">interval '24 hours'</code>に等しいとは限りません。
例えば、セッションの時間帯が <code class="literal">America/Denver</code>に設定されている時には以下のようになります。
</p><pre class="screen">
SELECT timestamp with time zone '2005-04-02 12:00:00-07' + interval '1 day';
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">2005-04-03 12:00:00-06</code>
SELECT timestamp with time zone '2005-04-02 12:00:00-07' + interval '24 hours';
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">2005-04-03 13:00:00-06</code>
</pre><p>
その理由は<code class="literal">America/Denver</code>時間帯で<code class="literal">2005-04-03 02:00:00</code>に夏時間への変更があるからです。
  </p><p>
<span class="original">
   Note there can be ambiguity in the &lt;literal&gt;months&lt;/literal&gt; field returned by
   &lt;function&gt;age&lt;/function&gt; because different months have different numbers of
   days.  &lt;productname&gt;PostgreSQL&lt;/productname&gt;'s approach uses the month from the
   earlier of the two dates when calculating partial months.  For example,
   &lt;literal&gt;age('2004-06-01', '2004-04-30')&lt;/literal&gt; uses April to yield
   &lt;literal&gt;1 mon 1 day&lt;/literal&gt;, while using May would yield &lt;literal&gt;1 mon 2
   days&lt;/literal&gt; because May has 31 days, while April has only 30.
</span>
異なる月では日数が異なりますので<code class="function">age</code>で返される<code class="literal">months</code>フィールドにはあいまいさがあります。
<span class="productname">PostgreSQL</span>のやり方は月をまたがる２つの日付の計算において、日付の早いほうの月を使用します。
例えば、<code class="literal">age('2004-06-01', '2004-04-30')</code>は4月を使用して<code class="literal">1 mon 1 day</code>を得ます。5月は31日あり、4月は30日のため、もし5月を使用するなら結果は<code class="literal">1 mon 2 days</code>となるでしょう。
  </p><p>
<span class="original">
   Subtraction of dates and timestamps can also be complex.  One conceptually
   simple way to perform subtraction is to convert each value to a number
   of seconds using &lt;literal&gt;EXTRACT(EPOCH FROM ...)&lt;/literal&gt;, then subtract the
   results; this produces the
   number of &lt;emphasis&gt;seconds&lt;/emphasis&gt; between the two values.  This will adjust
   for the number of days in each month, timezone changes, and daylight
   saving time adjustments.  Subtraction of date or timestamp
   values with the &lt;quote&gt;&lt;literal&gt;-&lt;/literal&gt;&lt;/quote&gt; operator
   returns the number of days (24-hours) and hours/minutes/seconds
   between the values, making the same adjustments.  The &lt;function&gt;age&lt;/function&gt;
   function returns years, months, days, and hours/minutes/seconds,
   performing field-by-field subtraction and then adjusting for negative
   field values.  The following queries illustrate the differences in these
   approaches.  The sample results were produced with &lt;literal&gt;timezone
   = 'US/Eastern'&lt;/literal&gt;; there is a daylight saving time change between the
   two dates used:
</span>
日付とタイムスタンプの引き算は複雑になることがあります。
引き算をする概念的に単純な方法は、それぞれの値を秒数に<code class="literal">EXTRACT(EPOCH FROM ...)</code>で変換してから、結果を引き算する方法です。この結果は2つの値の間の<span class="emphasis"><em>秒</em></span>数になります。
これは各月の日数、時間帯の変更、夏時間の調整に対して調整されるでしょう。
<span class="quote">「<span class="quote"><code class="literal">-</code></span>」</span>演算子での日付やタイムスタンプの引き算は値の間の(24時間の)日数と時間/分/秒を、同様に調整して返します。
<code class="function">age</code>関数は年、月、日、時間/分/秒をフィールド毎に引き算し、負のフィールドの値を調整します。
以下の問い合わせは上の各方法の違いを説明する例です。
例の結果は<code class="literal">timezone = 'US/Eastern'</code>で生成されました。2つの日付の間には夏時間の変更があります。
  </p><pre class="screen">
SELECT EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
       EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00');
<span class="original">
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;10537200&lt;/computeroutput&gt;
</span>
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">10537200</code>
SELECT (EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
        EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00'))
        / 60 / 60 / 24;
<span class="original">
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;121.958333333333&lt;/computeroutput&gt;
</span>
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">121.958333333333</code>
SELECT timestamptz '2013-07-01 12:00:00' - timestamptz '2013-03-01 12:00:00';
<span class="original">
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;121 days 23:00:00&lt;/computeroutput&gt;
</span>
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">121 days 23:00:00</code>
SELECT age(timestamptz '2013-07-01 12:00:00', timestamptz '2013-03-01 12:00:00');
<span class="original">
&lt;lineannotation&gt;Result: &lt;/lineannotation&gt;&lt;computeroutput&gt;4 mons&lt;/computeroutput&gt;
</span>
<em class="lineannotation"><span class="lineannotation">結果: </span></em><code class="computeroutput">4 mons</code>
</pre><div class="sect2" id="FUNCTIONS-DATETIME-EXTRACT"><div class="titlepage"><div><div><h3 class="title">9.9.1. <code class="function">EXTRACT</code>, <code class="function">date_part</code></h3></div></div></div><a id="id-1.5.8.17.13.2" class="indexterm"></a><a id="id-1.5.8.17.13.3" class="indexterm"></a><pre class="synopsis">
EXTRACT(<em class="replaceable"><code>field</code></em> FROM <em class="replaceable"><code>source</code></em>)
</pre><p>
<span class="original">
    The &lt;function&gt;extract&lt;/function&gt; function retrieves subfields
    such as year or hour from date/time values.
    &lt;replaceable&gt;source&lt;/replaceable&gt; must be a value expression of
    type &lt;type&gt;timestamp&lt;/type&gt;, &lt;type&gt;time&lt;/type&gt;, or &lt;type&gt;interval&lt;/type&gt;.
    (Expressions of type &lt;type&gt;date&lt;/type&gt; are
    cast to &lt;type&gt;timestamp&lt;/type&gt; and can therefore be used as
    well.)  &lt;replaceable&gt;field&lt;/replaceable&gt; is an identifier or
    string that selects what field to extract from the source value.
    The &lt;function&gt;extract&lt;/function&gt; function returns values of type
    &lt;type&gt;numeric&lt;/type&gt;.
    The following are valid field names:
</span>
<code class="function">extract</code>関数は、日付/時刻の値から年や時などの部分フィールドを抽出します。
<em class="replaceable"><code>source</code></em>は<code class="type">timestamp</code>型、<code class="type">time</code>型、または<code class="type">interval</code>型の評価式でなければなりません（<code class="type">date</code>型の式は<code class="type">timestamp</code>型にキャストされますので、同様に使用可能です）。
<em class="replaceable"><code>field</code></em>はsourceの値からどのフィールドを抽出するかを選択する識別子もしくは文字列です。
<code class="function">extract</code>関数は<code class="type">numeric</code>型の値を返します。
以下に有効なフィールド名を示します。

    <span class="original"> alphabetical </span>
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">century</code></span></dt><dd><p>
<span class="original">
        The century
</span>
世紀
       </p><pre class="screen">
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2000-12-16 12:21:13');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">20</code>
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">21</code>
</pre><p>
<span class="original">
        The first century starts at 0001-01-01 00:00:00 AD, although
        they did not know it at the time. This definition applies to all
        Gregorian calendar countries. There is no century number 0,
        you go from -1 century to 1 century.

        If you disagree with this, please write your complaint to:
        Pope, Cathedral Saint-Peter of Roma, Vatican.
</span>
当時の人々にはそのような意識はありませんでしたが、最初の世紀は0001-01-01 00:00:00 ADから始まります。
この定義は全てのグレゴリオ暦を使用する国で適用されています。
0という値の世紀はありません。-1世紀の次は1世紀です。

この定義に納得できなければ、苦情をバチカンローマ聖ペテロ大聖堂のローマ法王に伝えてください。
       </p></dd><dt><span class="term"><code class="literal">day</code></span></dt><dd><p>
<span class="original">
        For &lt;type&gt;timestamp&lt;/type&gt; values, the day (of the month) field
        (1&amp;ndash;31) ; for &lt;type&gt;interval&lt;/type&gt; values, the number of days
</span>
<code class="type">timestamp</code>値については、(月内の)日付フィールド(1–31)。<code class="type">interval</code>値については日数。
       </p><pre class="screen">
SELECT EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">16</code>

SELECT EXTRACT(DAY FROM INTERVAL '40 days 1 minute');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">40</code>
</pre></dd><dt><span class="term"><code class="literal">decade</code></span></dt><dd><p>
<span class="original">
        The year field divided by 10
</span>
年フィールドを10で割ったもの
       </p><pre class="screen">
SELECT EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">200</code>
</pre></dd><dt><span class="term"><code class="literal">dow</code></span></dt><dd><p>
<span class="original">
        The day of the week as Sunday (&lt;literal&gt;0&lt;/literal&gt;) to
        Saturday (&lt;literal&gt;6&lt;/literal&gt;)
</span>
日曜日（<code class="literal">0</code>）から土曜日（<code class="literal">6</code>）までの曜日
       </p><pre class="screen">
SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">5</code>
</pre><p>
<span class="original">
        Note that &lt;function&gt;extract&lt;/function&gt;'s day of the week numbering
        differs from that of the &lt;function&gt;to_char(...,
        'D')&lt;/function&gt; function.
</span>
<code class="function">extract</code>関数の曜日番号は<code class="function">to_char(...,'D')</code>関数のそれとは異なる点に注意してください。
       </p></dd><dt><span class="term"><code class="literal">doy</code></span></dt><dd><p>
<span class="original">
        The day of the year (1&amp;ndash;365/366)
</span>
年内での通算日数（1–365/366）
       </p><pre class="screen">
SELECT EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">47</code>
</pre></dd><dt><span class="term"><code class="literal">epoch</code></span></dt><dd><p>
<span class="original">
        For &lt;type&gt;timestamp with time zone&lt;/type&gt; values, the
        number of seconds since 1970-01-01 00:00:00 UTC (negative for
        timestamps before that);
        for &lt;type&gt;date&lt;/type&gt; and &lt;type&gt;timestamp&lt;/type&gt; values, the
        nominal number of seconds since 1970-01-01 00:00:00,
        without regard to timezone or daylight-savings rules;
        for &lt;type&gt;interval&lt;/type&gt; values, the total number
        of seconds in the interval
</span>
<code class="type">timestamp with time zone</code>型の値においては、1970-01-01 00:00:00 UTCからの秒数（負の数はその前）。<code class="type">date</code>と<code class="type">timestamp</code>型の値においては、時間帯と夏時間を考慮しないローカルタイムの1970-01-01 00:00:00からの秒数。<code class="type">interval</code>型の値ではその時間間隔における合計の秒数。
       </p><pre class="screen">
SELECT EXTRACT(EPOCH FROM TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40.12-08');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">982384720.12</code>

SELECT EXTRACT(EPOCH FROM TIMESTAMP '2001-02-16 20:38:40.12');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">982355920.12</code>

SELECT EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">442800</code>
</pre><p>
<span class="original">
        You can convert an epoch value back to a &lt;type&gt;timestamp with time zone&lt;/type&gt;
        with &lt;function&gt;to_timestamp&lt;/function&gt;:
</span>
<code class="function">to_timestamp</code>で経過秒数を<code class="type">timestamp with time zone</code>に変換することができます。
       </p><pre class="screen">
SELECT to_timestamp(982384720.12);
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-17 04:38:40.12+00</code>
</pre><p>
<span class="original">
        Beware that applying &lt;function&gt;to_timestamp&lt;/function&gt; to an epoch
        extracted from a &lt;type&gt;date&lt;/type&gt; or &lt;type&gt;timestamp&lt;/type&gt; value
        could produce a misleading result: the result will effectively
        assume that the original value had been given in UTC, which might
        not be the case.
</span>
<code class="function">to_timestamp</code>を<code class="type">date</code>あるいは<code class="type">timestamp</code>の値から取り出したエポックに適用すると、誤解を招く結果が得られるかもしれないことに注意してください。結果は実質的に元の値がUTCで与えられていると見なしますが、実際は違うかもしれません。
       </p></dd><dt><span class="term"><code class="literal">hour</code></span></dt><dd><p>
<span class="original">
        The hour field (0&amp;ndash;23)
</span>
時フィールド（0–23）
       </p><pre class="screen">
SELECT EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">20</code>
</pre></dd><dt><span class="term"><code class="literal">isodow</code></span></dt><dd><p>
<span class="original">
        The day of the week as Monday (&lt;literal&gt;1&lt;/literal&gt;) to
        Sunday (&lt;literal&gt;7&lt;/literal&gt;)
</span>
月曜日（<code class="literal">1</code>）から日曜日（<code class="literal">7</code>）までの曜日
       </p><pre class="screen">
SELECT EXTRACT(ISODOW FROM TIMESTAMP '2001-02-18 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">7</code>
</pre><p>
<span class="original">
        This is identical to &lt;literal&gt;dow&lt;/literal&gt; except for Sunday.  This
        matches the &lt;acronym&gt;ISO&lt;/acronym&gt; 8601 day of the week numbering.
</span>
日曜日を除き<code class="literal">dow</code>と同一です。
これは<acronym class="acronym">ISO</acronym> 8601曜日番号付けに一致します。
       </p></dd><dt><span class="term"><code class="literal">isoyear</code></span></dt><dd><p>
<span class="original">
        The &lt;acronym&gt;ISO&lt;/acronym&gt; 8601 week-numbering year that the date
        falls in (not applicable to intervals)
</span>
日付に当てはまる<acronym class="acronym">ISO</acronym> 8601週番号年（intervalには適用できない）。
       </p><pre class="screen">
SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-01');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2005</code>
SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-02');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2006</code>
</pre><p>
<span class="original">
        Each &lt;acronym&gt;ISO&lt;/acronym&gt; 8601 week-numbering year begins with the
        Monday of the week containing the 4th of January, so in early
        January or late December the &lt;acronym&gt;ISO&lt;/acronym&gt; year may be
        different from the Gregorian year.  See the &lt;literal&gt;week&lt;/literal&gt;
        field for more information.
</span>
すべての<acronym class="acronym">ISO</acronym> 8601週番号年は1月4日を含む週の月曜日から開始されます。従って、1月上旬、または12月下旬で<acronym class="acronym">ISO</acronym>年がグレゴリオ年と異なる可能性があります。
より詳細は<code class="literal">week</code>フィールドを参照してください。
       </p><p>
<span class="original">
        This field is not available in PostgreSQL releases prior to 8.3.
</span>
このフィールドは8.3より前のPostgreSQLリリースでは有効でありません。
       </p></dd><dt><span class="term"><code class="literal">julian</code></span></dt><dd><p>
<span class="original">
        The &lt;firstterm&gt;Julian Date&lt;/firstterm&gt; corresponding to the
        date or timestamp (not applicable to intervals).  Timestamps
        that are not local midnight result in a fractional value.  See
        &lt;xref linkend="datetime-julian-dates"/&gt; for more information.
</span>
日付あるいタイムスタンプに関連する<em class="firstterm">ユリウス日(Julian Date)</em>（時間間隔には適用されない）。
ローカル午前零時ではないタイムスタンプは小数となります。
詳細は<a class="xref" href="datetime-julian-dates.html" title="B.7. Julian Dates">B.7</a>をご覧ください。
       </p><pre class="screen">
SELECT EXTRACT(JULIAN FROM DATE '2006-01-01');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2453737</code>
SELECT EXTRACT(JULIAN FROM TIMESTAMP '2006-01-01 12:00');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2453737.50000000000000000000</code>
</pre></dd><dt><span class="term"><code class="literal">microseconds</code></span></dt><dd><p>
<span class="original">
        The seconds field, including fractional parts, multiplied by 1
        000 000;  note that this includes full seconds
</span>
端数部分も含む秒フィールドに、1,000,000を乗じた値。秒の整数部を含むことに注意。
       </p><pre class="screen">
SELECT EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">28500000</code>
</pre></dd><dt><span class="term"><code class="literal">millennium</code></span></dt><dd><p>
<span class="original">
        The millennium
</span>
ミレニアム（千年期）
       </p><pre class="screen">
SELECT EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">3</code>
</pre><p>
<span class="original">
        Years in the 1900s are in the second millennium.
        The third millennium started January 1, 2001.
</span>
1900年代の年は第2ミレニアムです。第3ミレニアムは2001年1月1日から始まりました。
       </p></dd><dt><span class="term"><code class="literal">milliseconds</code></span></dt><dd><p>
<span class="original">
        The seconds field, including fractional parts, multiplied by
        1000.  Note that this includes full seconds.
</span>
端数部分も含む秒フィールドに、1000を乗た値。秒の整数部を含むことに注意してください。
       </p><pre class="screen">
SELECT EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">28500</code>
</pre></dd><dt><span class="term"><code class="literal">minute</code></span></dt><dd><p>
<span class="original">
        The minutes field (0&amp;ndash;59)
</span>
分フィールド (0–59)
       </p><pre class="screen">
SELECT EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">38</code>
</pre></dd><dt><span class="term"><code class="literal">month</code></span></dt><dd><p>
<span class="original">
        For &lt;type&gt;timestamp&lt;/type&gt; values, the number of the month
        within the year (1&amp;ndash;12) ; for &lt;type&gt;interval&lt;/type&gt; values,
        the number of months, modulo 12 (0&amp;ndash;11)
</span>
<code class="type">timestamp</code>型の値に対しては年内の月番号（1–12）。<code class="type">interval</code>型の値に対しては月数を12で割った余り（0–11）。
       </p><pre class="screen">
SELECT EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2</code>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 3 months');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">3</code>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 13 months');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">1</code>
</pre></dd><dt><span class="term"><code class="literal">quarter</code></span></dt><dd><p>
<span class="original">
        The quarter of the year (1&amp;ndash;4) that the date is in
</span>
その日付が含まれる年の四半期(1–4)
       </p><pre class="screen">
SELECT EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">1</code>
</pre></dd><dt><span class="term"><code class="literal">second</code></span></dt><dd><p>
<span class="original">
        The seconds field, including any fractional seconds
</span>
端数を含んだ秒フィールド
       </p><pre class="screen">
SELECT EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">40</code>

SELECT EXTRACT(SECOND FROM TIME '17:12:28.5');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">28.5</code>
</pre></dd><dt><span class="term"><code class="literal">timezone</code></span></dt><dd><p>
<span class="original">
        The time zone offset from UTC, measured in seconds.  Positive values
        correspond to time zones east of UTC, negative values to
        zones west of UTC.  (Technically,
        &lt;productname&gt;PostgreSQL&lt;/productname&gt; does not use UTC because
        leap seconds are not handled.)
</span>
秒単位のUTCからの時間帯オフセット。正の値はUTCより東の時間帯に対応し、負の値はUTCより西の時間帯に対応。
(技術的に言えば、<span class="productname">PostgreSQL</span>はうるう秒を制御しないためUTCを使用していない。)
       </p></dd><dt><span class="term"><code class="literal">timezone_hour</code></span></dt><dd><p>
<span class="original">
        The hour component of the time zone offset
</span>
時間帯オフセットの時の成分。
       </p></dd><dt><span class="term"><code class="literal">timezone_minute</code></span></dt><dd><p>
<span class="original">
        The minute component of the time zone offset
</span>
時間帯オフセットの分の成分。
       </p></dd><dt><span class="term"><code class="literal">week</code></span></dt><dd><p>
<span class="original">
        The number of the &lt;acronym&gt;ISO&lt;/acronym&gt; 8601 week-numbering week of
        the year.  By definition, ISO weeks start on Mondays and the first
        week of a year contains January 4 of that year.  In other words, the
        first Thursday of a year is in week 1 of that year.
</span>
<acronym class="acronym">ISO</acronym> 8601週番号。
定義ではISO週は月曜日から始まり、その年の1月4日を含む週をその年の第1週としています。
つまり、年の最初の木曜日がある週がその年の第1週となります。
       </p><p>
<span class="original">
        In the ISO week-numbering system, it is possible for early-January
        dates to be part of the 52nd or 53rd week of the previous year, and for
        late-December dates to be part of the first week of the next year.
        For example, &lt;literal&gt;2005-01-01&lt;/literal&gt; is part of the 53rd week of year
        2004, and &lt;literal&gt;2006-01-01&lt;/literal&gt; is part of the 52nd week of year
        2005, while &lt;literal&gt;2012-12-31&lt;/literal&gt; is part of the first week of 2013.
        It's recommended to use the &lt;literal&gt;isoyear&lt;/literal&gt; field together with
        &lt;literal&gt;week&lt;/literal&gt; to get consistent results.
</span>
ISO週番号システムでは、1月の早い日にちは前年の第52週もしくは第53週となることがあり、12月の遅い日にちには次年の最初の週の一部となることがあります。
例えば、<code class="literal">2005-01-01</code>は2004年の第53週であり、<code class="literal">2006-01-01</code>は2005年の第52週の一部です、一方<code class="literal">2012-12-31</code>は2013年の第1週の一部となります。
整合性のある結果を得るため、<code class="literal">isoyear</code>フィールドと<code class="literal">week</code>を併用することを推奨します。
       </p><pre class="screen">
SELECT EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">7</code>
</pre></dd><dt><span class="term"><code class="literal">year</code></span></dt><dd><p>
<span class="original">
        The year field.  Keep in mind there is no &lt;literal&gt;0 AD&lt;/literal&gt;, so subtracting
        &lt;literal&gt;BC&lt;/literal&gt; years from &lt;literal&gt;AD&lt;/literal&gt; years should be done with care.
</span>
年フィールド。<code class="literal">AD零年</code>が存在しないことは忘れないでください。このため<code class="literal">AD</code>の年から<code class="literal">BC</code>の年を減ずる時には注意が必要です。
       </p><pre class="screen">
SELECT EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001</code>
</pre></dd></dl></div><p>
   </p><div class="note"><h3 class="title">注記</h3><p>
<span class="original">
     When the input value is +/-Infinity, &lt;function&gt;extract&lt;/function&gt; returns
     +/-Infinity for monotonically-increasing fields (&lt;literal&gt;epoch&lt;/literal&gt;,
     &lt;literal&gt;julian&lt;/literal&gt;, &lt;literal&gt;year&lt;/literal&gt;, &lt;literal&gt;isoyear&lt;/literal&gt;,
     &lt;literal&gt;decade&lt;/literal&gt;, &lt;literal&gt;century&lt;/literal&gt;, and &lt;literal&gt;millennium&lt;/literal&gt;).
     For other fields, NULL is returned.  &lt;productname&gt;PostgreSQL&lt;/productname&gt;
     versions before 9.6 returned zero for all cases of infinite input.
</span>
入力値が+/-無限大の場合、<code class="function">extract</code>は単調増加するフィールド（<code class="literal">epoch</code>、<code class="literal">julian</code>、<code class="literal">year</code>、<code class="literal">isoyear</code>、<code class="literal">decade</code>、<code class="literal">century</code>、<code class="literal">millennium</code>）に対し、+/-無限大を返します。
その他のフィールドに対してはNULLが返されます。
<span class="productname">PostgreSQL</span>の9.6より前のバージョンでは、入力が無限大のすべての場合に対してゼロを返していました。
    </p></div><p>
<span class="original">
    The &lt;function&gt;extract&lt;/function&gt; function is primarily intended
    for computational processing.  For formatting date/time values for
    display, see &lt;xref linkend="functions-formatting"/&gt;.
</span>
<code class="function">extract</code>関数は主に演算処理を意図しています。
日付/時刻の値を表示する目的での書式については<a class="xref" href="functions-formatting.html" title="9.8. データ型書式設定関数">9.8</a>を参照してください。
   </p><p>
<span class="original">
    The &lt;function&gt;date_part&lt;/function&gt; function is modeled on the traditional
    &lt;productname&gt;Ingres&lt;/productname&gt; equivalent to the
    &lt;acronym&gt;SQL&lt;/acronym&gt;-standard function &lt;function&gt;extract&lt;/function&gt;:
</span>
<code class="function">date_part</code>関数は伝統的な<span class="productname">Ingres</span>上で設計されたもので、標準<acronym class="acronym">SQL</acronym>の<code class="function">extract</code>関数と等価です。
</p><pre class="synopsis">
date_part('<em class="replaceable"><code>field</code></em>', <em class="replaceable"><code>source</code></em>)
</pre><p>
<span class="original">
    Note that here the &lt;replaceable&gt;field&lt;/replaceable&gt; parameter needs to
    be a string value, not a name.  The valid field names for
    &lt;function&gt;date_part&lt;/function&gt; are the same as for
    &lt;function&gt;extract&lt;/function&gt;.
    For historical reasons, the &lt;function&gt;date_part&lt;/function&gt; function
    returns values of type &lt;type&gt;double precision&lt;/type&gt;.  This can result in
    a loss of precision in certain uses.  Using &lt;function&gt;extract&lt;/function&gt;
    is recommended instead.
</span>
ここで<em class="replaceable"><code>field</code></em>パラメータが名前ではなく文字列値である必要があることに注意してください。
<code class="function">date_part</code>で有効なフィールド名は<code class="function">extract</code>と同じです。
歴史的な理由により、<code class="function">date_part</code>関数は<code class="type">double precision</code>型の結果を返します。
場合によってはこれによって精度が失われることがあります。
<code class="function">extract</code>を代わりに使うことをお勧めします。
   </p><pre class="screen">
SELECT date_part('day', TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">16</code>

SELECT date_part('hour', INTERVAL '4 hours 3 minutes');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">4</code>
</pre></div><div class="sect2" id="FUNCTIONS-DATETIME-TRUNC"><div class="titlepage"><div><div><h3 class="title">9.9.2. <code class="function">date_trunc</code></h3></div></div></div><a id="id-1.5.8.17.14.2" class="indexterm"></a><p>
<span class="original">
    The function &lt;function&gt;date_trunc&lt;/function&gt; is conceptually
    similar to the &lt;function&gt;trunc&lt;/function&gt; function for numbers.
</span>
<code class="function">date_trunc</code>関数は概念的に数値に対する<code class="function">trunc</code>関数と類似しています。
   </p><p>
</p><pre class="synopsis">
date_trunc(<em class="replaceable"><code>field</code></em>, <em class="replaceable"><code>source</code></em> [, <em class="replaceable"><code>time_zone</code></em> ])
</pre><p>
<span class="original">
    &lt;replaceable&gt;source&lt;/replaceable&gt; is a value expression of type
    &lt;type&gt;timestamp&lt;/type&gt;, &lt;type&gt;timestamp with time zone&lt;/type&gt;,
    or &lt;type&gt;interval&lt;/type&gt;.
    (Values of type &lt;type&gt;date&lt;/type&gt; and
    &lt;type&gt;time&lt;/type&gt; are cast automatically to &lt;type&gt;timestamp&lt;/type&gt; or
    &lt;type&gt;interval&lt;/type&gt;, respectively.)
    &lt;replaceable&gt;field&lt;/replaceable&gt; selects to which precision to
    truncate the input value.  The return value is likewise of type
    &lt;type&gt;timestamp&lt;/type&gt;, &lt;type&gt;timestamp with time zone&lt;/type&gt;,
    or &lt;type&gt;interval&lt;/type&gt;,
    and it has all fields that are less significant than the
    selected one set to zero (or one, for day and month).
</span>
<em class="replaceable"><code>source</code></em>は、データ型<code class="type">timestamp</code>、<code class="type">timestamp with time zone</code>もしくは<code class="type">interval</code>の評価式です。
（<code class="type">date</code>型と<code class="type">time</code>型の値はそれぞれ自動的に<code class="type">timestamp</code>もしくは<code class="type">interval</code>にキャストされます。）
<em class="replaceable"><code>field</code></em>は、入力値の値をどの精度で切り捨てるかを選択します。
同様に戻り値は<code class="type">timestamp</code>、<code class="type">timestamp with time zone</code>もしくは<code class="type">interval</code>型で、指定した精度より下のすべてのフィールドがゼロに設定（日と月については1に設定）されます。
   </p><p>
<span class="original">
    Valid values for &lt;replaceable&gt;field&lt;/replaceable&gt; are:
</span>
<em class="replaceable"><code>field</code></em>の有効値には次のものがあります。
    </p><table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">microseconds</code></td></tr><tr><td><code class="literal">milliseconds</code></td></tr><tr><td><code class="literal">second</code></td></tr><tr><td><code class="literal">minute</code></td></tr><tr><td><code class="literal">hour</code></td></tr><tr><td><code class="literal">day</code></td></tr><tr><td><code class="literal">week</code></td></tr><tr><td><code class="literal">month</code></td></tr><tr><td><code class="literal">quarter</code></td></tr><tr><td><code class="literal">year</code></td></tr><tr><td><code class="literal">decade</code></td></tr><tr><td><code class="literal">century</code></td></tr><tr><td><code class="literal">millennium</code></td></tr></table><p>
   </p><p>
<span class="original">
    When the input value is of type &lt;type&gt;timestamp with time zone&lt;/type&gt;,
    the truncation is performed with respect to a particular time zone;
    for example, truncation to &lt;literal&gt;day&lt;/literal&gt; produces a value that
    is midnight in that zone.  By default, truncation is done with respect
    to the current &lt;xref linkend="guc-timezone"/&gt; setting, but the
    optional &lt;replaceable&gt;time_zone&lt;/replaceable&gt; argument can be provided
    to specify a different time zone.  The time zone name can be specified
    in any of the ways described in &lt;xref linkend="datatype-timezones"/&gt;.
</span>
入力値が<code class="type">timestamp with time zone</code>型の値なら、特定の時間帯を考慮して切り捨てが行われます。たとえば、<code class="literal">日</code>を切り捨てると値はその時間帯での真夜中になります。
デフォルトでは切り捨ては現在の<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>の設定に従いますが、別の時間帯を指定することができるようにオプションの<em class="replaceable"><code>time_zone</code></em>引数が提供されています。
時間帯名は<a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. 時間帯">8.5.3</a>に記述されている方法で指定できます。
   </p><p>
<span class="original">
    A time zone cannot be specified when processing &lt;type&gt;timestamp without
    time zone&lt;/type&gt; or &lt;type&gt;interval&lt;/type&gt; inputs.  These are always
    taken at face value.
</span>
<code class="type">timestamp without time zone</code>あるいは<code class="type">interval</code>の入力を処理している間は時間帯は指定できません。
これらは額面通りの値で扱われます。
   </p><p>
<span class="original">
    Examples (assuming the local time zone is &lt;literal&gt;America/New_York&lt;/literal&gt;):
</span>
例（現地タイムゾーンは<code class="literal">America/New_York</code>と仮定します）：
</p><pre class="screen">
SELECT date_trunc('hour', TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 20:00:00</code>

SELECT date_trunc('year', TIMESTAMP '2001-02-16 20:38:40');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-01-01 00:00:00</code>

SELECT date_trunc('day', TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40+00');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 00:00:00-05</code>

SELECT date_trunc('day', TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40+00', 'Australia/Sydney');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 08:00:00-05</code>

SELECT date_trunc('hour', INTERVAL '3 days 02:47:33');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">3 days 02:00:00</code>
</pre><p>
   </p></div><div class="sect2" id="FUNCTIONS-DATETIME-BIN"><div class="titlepage"><div><div><h3 class="title">9.9.3. <code class="function">date_bin</code></h3></div></div></div><a id="id-1.5.8.17.15.2" class="indexterm"></a><p>
<span class="original">
    The function &lt;function&gt;date_bin&lt;/function&gt; &lt;quote&gt;bins&lt;/quote&gt; the input
    timestamp into the specified interval (the &lt;firstterm&gt;stride&lt;/firstterm&gt;)
    aligned with a specified origin.
</span>
関数<code class="function">date_bin</code>は、指定した原点に揃えて入力のタイムスタンプを指定した時間間隔(<em class="firstterm">stride</em>)に<span class="quote">「<span class="quote">分類</span>」</span>します。
   </p><p>
</p><pre class="synopsis">
date_bin(<em class="replaceable"><code>stride</code></em>, <em class="replaceable"><code>source</code></em>, <em class="replaceable"><code>origin</code></em>)
</pre><p>
<span class="original">
    &lt;replaceable&gt;source&lt;/replaceable&gt; is a value expression of type
    &lt;type&gt;timestamp&lt;/type&gt; or &lt;type&gt;timestamp with time zone&lt;/type&gt;.  (Values
    of type &lt;type&gt;date&lt;/type&gt; are cast automatically to
    &lt;type&gt;timestamp&lt;/type&gt;.)  &lt;replaceable&gt;stride&lt;/replaceable&gt; is a value
    expression of type &lt;type&gt;interval&lt;/type&gt;.  The return value is likewise
    of type &lt;type&gt;timestamp&lt;/type&gt; or &lt;type&gt;timestamp with time zone&lt;/type&gt;,
    and it marks the beginning of the bin into which the
    &lt;replaceable&gt;source&lt;/replaceable&gt; is placed.
</span>
<em class="replaceable"><code>source</code></em>は<code class="type">timestamp</code>あるいは<code class="type">timestamp with time zone</code>型の値式です。
（<code class="type">date</code>型の値は<code class="type">timestamp</code>に自動キャストされます。）
<em class="replaceable"><code>stride</code></em>は<code class="type">interval</code>型の値式です。
戻り値は同様に、<code class="type">timestamp</code>あるいは<code class="type">timestamp with time zone</code>型で、<em class="replaceable"><code>source</code></em>が置かれた箱の開始位置に印を付けています。
   </p><p>
<span class="original">
    Examples:
</span>
例を示します。
</p><pre class="screen">
SELECT date_bin('15 minutes', TIMESTAMP '2020-02-11 15:44:17', TIMESTAMP '2001-01-01');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2020-02-11 15:30:00</code>

SELECT date_bin('15 minutes', TIMESTAMP '2020-02-11 15:44:17', TIMESTAMP '2001-01-01 00:02:30');
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2020-02-11 15:32:30</code>
</pre><p>
   </p><p>
<span class="original">
    In the case of full units (1 minute, 1 hour, etc.), it gives the same result as
    the analogous &lt;function&gt;date_trunc&lt;/function&gt; call, but the difference is
    that &lt;function&gt;date_bin&lt;/function&gt; can truncate to an arbitrary interval.
</span>
完全な単位(1分、1時間など)の場合は、これは類似の<code class="function">date_trunc</code>の呼び出しと同じ結果を与えます。
違いは、<code class="function">date_bin</code>は任意の間隔へと切り捨てられることです。
   </p><p>
<span class="original">
    The &lt;parameter&gt;stride&lt;/parameter&gt; interval must be greater than zero and
    cannot contain units of month or larger.
</span>
<em class="parameter"><code>stride</code></em>間隔はゼロより大きくなければならず、かつ月単位あるいはそれよりも大きくてはいけません。
   </p></div><div class="sect2" id="FUNCTIONS-DATETIME-ZONECONVERT"><div class="titlepage"><div><div><h3 class="title">9.9.4. <code class="literal">AT TIME ZONE</code></h3></div></div></div><a id="id-1.5.8.17.16.2" class="indexterm"></a><a id="id-1.5.8.17.16.3" class="indexterm"></a><a id="id-1.5.8.17.16.4" class="indexterm"></a><p>
<span class="original">
    The &lt;literal&gt;AT TIME ZONE&lt;/literal&gt; operator converts time
    stamp &lt;emphasis&gt;without&lt;/emphasis&gt; time zone to/from
    time stamp &lt;emphasis&gt;with&lt;/emphasis&gt; time zone, and
    &lt;type&gt;time with time zone&lt;/type&gt; values to different time
    zones. &lt;xref linkend="functions-datetime-zoneconvert-table"/&gt; shows its
    variants.
</span>
<code class="literal">AT TIME ZONE</code>構文を使用することにより、time stamp <span class="emphasis"><em>without</em></span> time zoneからtime stamp <span class="emphasis"><em>with</em></span> time zoneへ、あるいは<code class="type">time with time zone</code>の値を異なる時間帯に変換することができます。
<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT-TABLE" title="表9.34 AT TIME ZONEの種類">表 9.34</a>にその種類を示します。
   </p><div class="table" id="FUNCTIONS-DATETIME-ZONECONVERT-TABLE"><p class="title"><strong>表9.34 <code class="literal">AT TIME ZONE</code>の種類</strong></p><div class="table-contents"><span class="original">
     &lt;title&gt;&lt;literal&gt;AT TIME ZONE&lt;/literal&gt; Variants&lt;/title&gt;
</span><table class="table" summary="AT TIME ZONEの種類" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">
<span class="original">
         Operator
</span>
演算子
        </p>
        <p>
<span class="original">
         Description
</span>
説明
        </p>
        <p>
<span class="original">
         Example(s)
</span>
例
        </p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">timestamp without time zone</code> <code class="literal">AT TIME ZONE</code> <em class="replaceable"><code>zone</code></em>
         → <code class="returnvalue">timestamp with time zone</code>
        </p>
        <p>
<span class="original">
         Converts given time stamp &lt;emphasis&gt;without&lt;/emphasis&gt; time zone to
         time stamp &lt;emphasis&gt;with&lt;/emphasis&gt; time zone, assuming the given
         value is in the named time zone.
</span>
与えられた<span class="emphasis"><em>時間帯なし</em></span>タイムスタンプを指定された時間帯にあるとして<span class="emphasis"><em>時間帯あり</em></span>タイムスタンプに変換します。
        </p>
        <p>
         <code class="literal">timestamp '2001-02-16 20:38:40' at time zone 'America/Denver'</code>
         → <code class="returnvalue">2001-02-17 03:38:40+00</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">timestamp with time zone</code> <code class="literal">AT TIME ZONE</code> <em class="replaceable"><code>zone</code></em>
         → <code class="returnvalue">timestamp without time zone</code>
        </p>
        <p>
<span class="original">
         Converts given time stamp &lt;emphasis&gt;with&lt;/emphasis&gt; time zone to
         time stamp &lt;emphasis&gt;without&lt;/emphasis&gt; time zone, as the time would
         appear in that zone.
</span>
与えられた<span class="emphasis"><em>時間帯付き</em></span>時刻を、時刻がその時間帯にあるものとして<span class="emphasis"><em>時間帯なし</em></span>タイムスタンプに変換します。
        </p>
        <p>
         <code class="literal">timestamp with time zone '2001-02-16 20:38:40-05' at time zone 'America/Denver'</code>
         → <code class="returnvalue">2001-02-16 18:38:40</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">time with time zone</code> <code class="literal">AT TIME ZONE</code> <em class="replaceable"><code>zone</code></em>
         → <code class="returnvalue">time with time zone</code>
        </p>
        <p>
<span class="original">
         Converts given time &lt;emphasis&gt;with&lt;/emphasis&gt; time zone to a new time
         zone.  Since no date is supplied, this uses the currently active UTC
         offset for the named destination zone.
</span>
与えられた時刻<span class="emphasis"><em>with</em></span> time zoneを新しい時間帯に変換します。
判断するためのデータがないので、現在の有効なUTCオフセットを目的の時間帯のために使用します。
        </p>
        <p>
         <code class="literal">time with time zone '05:34:17-05' at time zone 'UTC'</code>
         → <code class="returnvalue">10:34:17+00</code>
        </p></td></tr></tbody></table></div></div><br class="table-break" /><p>
<span class="original">
    In these expressions, the desired time zone &lt;replaceable&gt;zone&lt;/replaceable&gt; can be
    specified either as a text value (e.g., &lt;literal&gt;'America/Los_Angeles'&lt;/literal&gt;)
    or as an interval (e.g., &lt;literal&gt;INTERVAL '-08:00'&lt;/literal&gt;).
    In the text case, a time zone name can be specified in any of the ways
    described in &lt;xref linkend="datatype-timezones"/&gt;.
    The interval case is only useful for zones that have fixed offsets from
    UTC, so it is not very common in practice.
</span>
これらの式では、設定する時間帯<em class="replaceable"><code>zone</code></em>は、（<code class="literal">'America/Los_Angeles'</code>のような）テキスト値、または（<code class="literal">INTERVAL '-08:00'</code>のような）時間間隔で指定することができます。
テキストの場合、<a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. 時間帯">8.5.3</a>に示した方法で時間帯名称を指定することができます。
時間間隔を使うのはUTCからの固定のオフセットを持つ時間帯でのみ有用なので、一般的に非常に有用であるとは言えません。
   </p><p>
<span class="original">
    Examples (assuming the current &lt;xref linkend="guc-timezone"/&gt; setting
    is &lt;literal&gt;America/Los_Angeles&lt;/literal&gt;):
</span>
以下に例を示します（現在の時間帯（<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>）を<code class="literal">America/Los_Angeles</code>と想定しています）。
</p><pre class="screen">
SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'America/Denver';
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 19:38:40-08</code>

SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'America/Denver';
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 18:38:40</code>

SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'Asia/Tokyo' AT TIME ZONE 'America/Chicago';
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2001-02-16 05:38:40</code>
</pre><p>
<span class="original">
    The first example adds a time zone to a value that lacks it, and
    displays the value using the current &lt;varname&gt;TimeZone&lt;/varname&gt;
    setting.  The second example shifts the time stamp with time zone value
    to the specified time zone, and returns the value without a time zone.
    This allows storage and display of values different from the current
    &lt;varname&gt;TimeZone&lt;/varname&gt; setting.  The third example converts
    Tokyo time to Chicago time.
</span>
最初の例は、時間帯のない値に時間帯を追加し、現在の<code class="varname">TimeZone</code>設定を使ってその値を表示します。
2番目の例は、time stamp with time zone値を指定した時間帯に変換し、その値をwithout a time zoneで返しています。
これは、<code class="varname">TimeZone</code>設定とは異なる値の格納と表示を可能にします。
3番目の例は、東京時間をシカゴ時間に変換します。
   </p><p>
<span class="original">
    The function &lt;literal&gt;&lt;function&gt;timezone&lt;/function&gt;(&lt;replaceable&gt;zone&lt;/replaceable&gt;,
    &lt;replaceable&gt;timestamp&lt;/replaceable&gt;)&lt;/literal&gt; is equivalent to the SQL-conforming construct
    &lt;literal&gt;&lt;replaceable&gt;timestamp&lt;/replaceable&gt; AT TIME ZONE
    &lt;replaceable&gt;zone&lt;/replaceable&gt;&lt;/literal&gt;.
</span>
関数<code class="literal"><code class="function">timezone</code>(<em class="replaceable"><code>zone</code></em>, <em class="replaceable"><code>timestamp</code></em>)</code>は、SQL準拠の構文<code class="literal"><em class="replaceable"><code>timestamp</code></em> AT TIME ZONE <em class="replaceable"><code>zone</code></em></code>と等価です。
   </p></div><div class="sect2" id="FUNCTIONS-DATETIME-CURRENT"><div class="titlepage"><div><div><h3 class="title">9.9.5. 現在の日付/時刻</h3></div></div></div><span class="original">
   &lt;title&gt;Current Date/Time&lt;/title&gt;
</span><a id="id-1.5.8.17.17.2" class="indexterm"></a><a id="id-1.5.8.17.17.3" class="indexterm"></a><a id="id-1.5.8.17.17.4" class="indexterm"></a><a id="id-1.5.8.17.17.5" class="indexterm"></a><p>
<span class="original">
    &lt;productname&gt;PostgreSQL&lt;/productname&gt; provides a number of functions
    that return values related to the current date and time.  These
    SQL-standard functions all return values based on the start time of
    the current transaction:
</span>
<span class="productname">PostgreSQL</span>は、現在の日付時刻に関した値を返す多くの関数を提供します。
これらの標準SQL関数はすべて、現在のトランザクションの開始時刻に基づいた値を返します。
</p><pre class="synopsis">
CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_TIME(<em class="replaceable"><code>precision</code></em>)
CURRENT_TIMESTAMP(<em class="replaceable"><code>precision</code></em>)
LOCALTIME
LOCALTIMESTAMP
LOCALTIME(<em class="replaceable"><code>precision</code></em>)
LOCALTIMESTAMP(<em class="replaceable"><code>precision</code></em>)
</pre><p>
    </p><p>
<span class="original">
     &lt;function&gt;CURRENT_TIME&lt;/function&gt; and
     &lt;function&gt;CURRENT_TIMESTAMP&lt;/function&gt; deliver values with time zone;
     &lt;function&gt;LOCALTIME&lt;/function&gt; and
     &lt;function&gt;LOCALTIMESTAMP&lt;/function&gt; deliver values without time zone.
</span>
<code class="function">CURRENT_TIME</code>および<code class="function">CURRENT_TIMESTAMP</code>関数では、時間帯を伴う値を扱います。一方、<code class="function">LOCALTIME</code>および<code class="function">LOCALTIMESTAMP</code>関数では、時間帯を伴わない値を扱います。
    </p><p>
<span class="original">
     &lt;function&gt;CURRENT_TIME&lt;/function&gt;,
     &lt;function&gt;CURRENT_TIMESTAMP&lt;/function&gt;,
     &lt;function&gt;LOCALTIME&lt;/function&gt;, and
     &lt;function&gt;LOCALTIMESTAMP&lt;/function&gt;
     can optionally take
     a precision parameter, which causes the result to be rounded
     to that many fractional digits in the seconds field.  Without a precision parameter,
     the result is given to the full available precision.
</span>
<code class="function">CURRENT_TIME</code>、<code class="function">CURRENT_TIMESTAMP</code>、<code class="function">LOCALTIME</code>、および<code class="function">LOCALTIMESTAMP</code>関数では、精度のパラメータをオプションで取ることができ、それに合わせて秒フィールドの端数桁を丸める結果をもたらします。
精度のパラメータがない場合、結果は使用可能な最大精度で出力されます。
    </p><p>
<span class="original">
    Some examples:
</span>
例：
</p><pre class="screen">
SELECT CURRENT_TIME;
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">14:39:53.662522-05</code>

SELECT CURRENT_DATE;
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2019-12-23</code>

SELECT CURRENT_TIMESTAMP;
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2019-12-23 14:39:53.662522-05</code>

SELECT CURRENT_TIMESTAMP(2);
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2019-12-23 14:39:53.66-05</code>

SELECT LOCALTIMESTAMP;
<em class="lineannotation"><span class="lineannotation">Result: </span></em><code class="computeroutput">2019-12-23 14:39:53.662522</code>
</pre><p>
   </p><p>
<span class="original">
    Since these functions return
    the start time of the current transaction, their values do not
    change during the transaction. This is considered a feature:
    the intent is to allow a single transaction to have a consistent
    notion of the &lt;quote&gt;current&lt;/quote&gt; time, so that multiple
    modifications within the same transaction bear the same
    time stamp.
</span>
これらの関数は現在のトランザクションの開始時刻を返すため、その値はトランザクションが実行されている間は変化しません。
これは仕様であると考えられており、その意図は、単一のトランザクションが一貫性のある<span class="quote">「<span class="quote">現在</span>」</span>時刻の概念を持ち、同一トランザクション内の複数の変更が同一のタイムスタンプを持つようにすることにあります。
   </p><div class="note"><h3 class="title">注記</h3><p>
<span class="original">
     Other database systems might advance these values more
     frequently.
</span>
他のデータベースシステムでは、これらの値をより頻繁に増加させることがあります。
    </p></div><p>
<span class="original">
    &lt;productname&gt;PostgreSQL&lt;/productname&gt; also provides functions that
    return the start time of the current statement, as well as the actual
    current time at the instant the function is called.  The complete list
    of non-SQL-standard time functions is:
</span>
<span class="productname">PostgreSQL</span>はまた、関数を呼び出した時の実際の現在時刻や現在の文の開始時刻を返す関数も提供します。
非標準SQLの時間関数の全一覧を以下に示します。
</p><pre class="synopsis">
transaction_timestamp()
statement_timestamp()
clock_timestamp()
timeofday()
now()
</pre><p>
   </p><p>
<span class="original">
    &lt;function&gt;transaction_timestamp()&lt;/function&gt; is equivalent to
    &lt;function&gt;CURRENT_TIMESTAMP&lt;/function&gt;, but is named to clearly reflect
    what it returns.
    &lt;function&gt;statement_timestamp()&lt;/function&gt; returns the start time of the current
    statement (more specifically, the time of receipt of the latest command
    message from the client).
    &lt;function&gt;statement_timestamp()&lt;/function&gt; and &lt;function&gt;transaction_timestamp()&lt;/function&gt;
    return the same value during the first command of a transaction, but might
    differ during subsequent commands.
    &lt;function&gt;clock_timestamp()&lt;/function&gt; returns the actual current time, and
    therefore its value changes even within a single SQL command.
    &lt;function&gt;timeofday()&lt;/function&gt; is a historical
    &lt;productname&gt;PostgreSQL&lt;/productname&gt; function.  Like
    &lt;function&gt;clock_timestamp()&lt;/function&gt;, it returns the actual current time,
    but as a formatted &lt;type&gt;text&lt;/type&gt; string rather than a &lt;type&gt;timestamp
    with time zone&lt;/type&gt; value.
    &lt;function&gt;now()&lt;/function&gt; is a traditional &lt;productname&gt;PostgreSQL&lt;/productname&gt;
    equivalent to &lt;function&gt;transaction_timestamp()&lt;/function&gt;.
</span>
<code class="function">transaction_timestamp()</code>は<code class="function">CURRENT_TIMESTAMP</code>と等価ですが、明確に何を返すかを反映する名前になっています。
<code class="function">statement_timestamp()</code>は現在の文の実行開始時刻を返すものです（より具体的にいうと、直前のコマンドメッセージをクライアントから受け取った時刻です）。
<code class="function">statement_timestamp()</code>および<code class="function">transaction_timestamp()</code>はトランザクションの最初のコマンドでは同じ値を返しますが、その後に引き続くコマンドでは異なる可能性があります。
<code class="function">clock_timestamp()</code>は実際の現在時刻を返しますので、その値は単一のSQLコマンドであっても異なります。
<code class="function">timeofday()</code>は<span class="productname">PostgreSQL</span>の歴史的な関数です。
<code class="function">clock_timestamp()</code>同様、実際の現在時刻を返しますが、<code class="type">timestamp with time zone</code>型の値ではなく、整形された<code class="type">text</code>文字列を返します。<code class="function">now()</code>は<code class="function">transaction_timestamp()</code>と同じもので、伝統的な<span class="productname">PostgreSQL</span>関数です。
   </p><p>
<span class="original">
    All the date/time data types also accept the special literal value
    &lt;literal&gt;now&lt;/literal&gt; to specify the current date and time (again,
    interpreted as the transaction start time).  Thus,
    the following three all return the same result:
</span>
すべての日付/時刻型はまた、特殊なリテラル値 <code class="literal">now</code>を受け付け、これは現在の日付と時刻（ここでも、トランザクションの開始時刻として解釈されます）を表します。
したがって、下記の３つの実行結果は全て同じものとなります。
</p><pre class="programlisting">
SELECT CURRENT_TIMESTAMP;
SELECT now();
SELECT TIMESTAMP 'now';  -- but see tip below
</pre><p>
   </p><div class="tip"><h3 class="title">ヒント</h3><p>
<span class="original">
      Do not use the third form when specifying a value to be evaluated later,
      for example in a &lt;literal&gt;DEFAULT&lt;/literal&gt; clause for a table column.
      The system will convert &lt;literal&gt;now&lt;/literal&gt;
      to a &lt;type&gt;timestamp&lt;/type&gt; as soon as the constant is parsed, so that when
      the default value is needed,
      the time of the table creation would be used!  The first two
      forms will not be evaluated until the default value is used,
      because they are function calls.  Thus they will give the desired
      behavior of defaulting to the time of row insertion.
      (See also &lt;xref linkend="datatype-datetime-special-values"/&gt;.)
</span>
たとえばテーブルの列に<code class="literal">DEFAULT</code>句を指定するのに、後から評価される値を指定する際に3番目の形式は使わないでください。
システムは<code class="literal">now</code>という定数を解析すると、すぐにそれを<code class="type">timestamp</code>に変換するので、デフォルト値が必要が時には、テーブルが作成された時刻が使われます。
最初の2つの形式は関数呼び出しなので、デフォルト値が使用されるまで評価されません。
ですから、これらの関数は列の挿入時間をデフォルトとする、望ましい振舞いをします。
（<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-SPECIAL-VALUES" title="8.5.1.4. 特別な値">8.5.1.4</a>も見てください。）
     </p></div></div><div class="sect2" id="FUNCTIONS-DATETIME-DELAY"><div class="titlepage"><div><div><h3 class="title">9.9.6. 遅延実行</h3></div></div></div><span class="original">
   &lt;title&gt;Delaying Execution&lt;/title&gt;
</span><a id="id-1.5.8.17.18.2" class="indexterm"></a><a id="id-1.5.8.17.18.3" class="indexterm"></a><a id="id-1.5.8.17.18.4" class="indexterm"></a><a id="id-1.5.8.17.18.5" class="indexterm"></a><a id="id-1.5.8.17.18.6" class="indexterm"></a><a id="id-1.5.8.17.18.7" class="indexterm"></a><a id="id-1.5.8.17.18.8" class="indexterm"></a><p>
<span class="original">
    The following functions are available to delay execution of the server
    process:
</span>
以下の関数は、サーバプロセスの実行を遅延させるために使用可能です。
</p><pre class="synopsis">
pg_sleep ( <code class="type">double precision</code> )
pg_sleep_for ( <code class="type">interval</code> )
pg_sleep_until ( <code class="type">timestamp with time zone</code> )
</pre><p>

<span class="original">
    &lt;function&gt;pg_sleep&lt;/function&gt; makes the current session's process
    sleep until the given number of seconds have
    elapsed.  Fractional-second delays can be specified.
    &lt;function&gt;pg_sleep_for&lt;/function&gt; is a convenience function to
    allow the sleep time to be specified as an &lt;type&gt;interval&lt;/type&gt;.
    &lt;function&gt;pg_sleep_until&lt;/function&gt; is a convenience function for when
    a specific wake-up time is desired.
    For example:
</span>
<code class="function">pg_sleep</code>は、指定された秒数が経過するまで、現在のセッションのプロセスを休止させます。
<code class="function">pg_sleep_for</code>は<code class="type">interval</code>でより長い休止時間を指定する便利な関数です。
<code class="function">pg_sleep_until</code>は特定の起床時刻が望まれる場合に便利な関数です。
以下に例を示します。

</p><pre class="programlisting">
SELECT pg_sleep(1.5);
SELECT pg_sleep_for('5 minutes');
SELECT pg_sleep_until('tomorrow 03:00');
</pre><p>
   </p><div class="note"><h3 class="title">注記</h3><p>
<span class="original">
      The effective resolution of the sleep interval is platform-specific;
      0.01 seconds is a common value.  The sleep delay will be at least as long
      as specified. It might be longer depending on factors such as server load.
      In particular, &lt;function&gt;pg_sleep_until&lt;/function&gt; is not guaranteed to
      wake up exactly at the specified time, but it will not wake up any earlier.
</span>
休止時間の有効な分解能はプラットフォームに依存します。0.01秒が一般的な値です。
休止による遅延は最短で指定した時間と同じになります。
サーバの負荷などが要因となり、より長くなる可能性があります。
特に、<code class="function">pg_sleep_until</code>は指定した時刻ちょうどに起床する保証はありませんが、それより早く起床することはありません。
     </p></div><div class="warning"><h3 class="title">警告</h3><p>
<span class="original">
      Make sure that your session does not hold more locks than necessary
      when calling &lt;function&gt;pg_sleep&lt;/function&gt; or its variants.  Otherwise
      other sessions might have to wait for your sleeping process, slowing down
      the entire system.
</span>
<code class="function">pg_sleep</code>またはその亜種を呼び出す時、セッションが必要以上のロックを保持していないことを確実にしてください。
さもないと、他のセッションが休止中のプロセスを待機しなければならないかもしれません。そのためシステム全体の速度が低下することになるかもしれません。
     </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-formatting.html" title="9.8. データ型書式設定関数">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html" title="第9章 関数と演算子">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-enum.html" title="9.10. 列挙型サポート関数">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">9.8. データ型書式設定関数 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15rc2文書">ホーム</a></td><td width="40%" align="right" valign="top"> 9.10. 列挙型サポート関数</td></tr></table></div></body></html>