<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.3. 接続と認証</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="runtime-config-file-locations.html" title="20.2. ファイルの場所" /><link rel="next" href="runtime-config-resource.html" title="20.4. 資源の消費" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 16.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="runtime-config.html" title="第20章 サーバの設定">第20章 サーバの設定</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-file-locations.html" title="20.2. ファイルの場所">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="第20章 サーバの設定">上へ</a></td><td width="60%" align="center">20.3. 接続と認証</td><td width="20%" align="right"> <a accesskey="n" href="runtime-config-resource.html" title="20.4. 資源の消費">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RUNTIME-CONFIG-CONNECTION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.3. 接続と認証 <a href="#RUNTIME-CONFIG-CONNECTION" class="id_link">#</a></h2></div></div></div><!--
    <title>Connections and Authentication</title>
--><div class="sect2" id="RUNTIME-CONFIG-CONNECTION-SETTINGS"><div class="titlepage"><div><div><h3 class="title">20.3.1. 接続設定 <a href="#RUNTIME-CONFIG-CONNECTION-SETTINGS" class="id_link">#</a></h3></div></div></div><!--
     <title>Connection Settings</title>
--><div class="variablelist"><dl class="variablelist"><dt id="GUC-LISTEN-ADDRESSES"><span class="term"><code class="varname">listen_addresses</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.2.2.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.1.1.4" class="indexterm"></a>
      </span> <a href="#GUC-LISTEN-ADDRESSES" class="id_link">#</a></dt><dd><p>
<!--
         Specifies the TCP/IP address(es) on which the server is
         to listen for connections from client applications.
         The value takes the form of a comma-separated list of host names
         and/or numeric IP addresses.  The special entry <literal>*</literal>
         corresponds to all available IP interfaces.  The entry
         <literal>0.0.0.0</literal> allows listening for all IPv4 addresses and
         <literal>::</literal> allows listening for all IPv6 addresses.
         If the list is empty, the server does not listen on any IP interface
         at all, in which case only Unix-domain sockets can be used to connect
         to it.
         The default value is <systemitem class="systemname">localhost</systemitem>,
         which allows only local TCP/IP <quote>loopback</quote> connections to be
         made.  While client authentication (<xref
         linkend="client-authentication"/>) allows fine-grained control
         over who can access the server, <varname>listen_addresses</varname>
         controls which interfaces accept connection attempts, which
         can help prevent repeated malicious connection requests on
         insecure network interfaces.  This parameter can only be set
         at server start.
-->
クライアントアプリケーションからの接続をサーバが監視する TCP/IP アドレスを指定します。
この値は、ホスト名をコンマで区切ったリスト、そして/もしくは、数値によるIPアドレスです。
<code class="literal">*</code>という特別なエントリは利用可能な全てのIPインタフェースに対応します。
エントリ<code class="literal">0.0.0.0</code>は全てのIPv4アドレスの監視を、そしてエントリ<code class="literal">::</code>は全てのIPv6アドレスの監視を許容します。
リストが空の場合、サーバはいかなるIPインタフェースも全く監視しないで、Unixドメインソケットのみを使用して接続が行われます。
デフォルトの値は<span class="systemitem">localhost</span>で、ローカルなTCP/IP <span class="quote">「<span class="quote">loopback</span>」</span>接続のみ許可します。
クライアント認証 (<a class="xref" href="client-authentication.html" title="第21章 クライアント認証">第21章</a>)は誰がサーバにアクセス可能かをきめ細かく制御するのに対し、<code class="varname">listen_addresses</code>はどのインタフェースが接続を試みるかを制御します。
これにより、安全でないネットワークインタフェース上において繰り返して行われる悪意のある接続要求の防止に役立ちます。
このパラメータはサーバ起動時のみ設定可能です。
       </p></dd><dt id="GUC-PORT"><span class="term"><code class="varname">port</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.2.2.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.2.1.4" class="indexterm"></a>
      </span> <a href="#GUC-PORT" class="id_link">#</a></dt><dd><p>
<!--
        The TCP port the server listens on; 5432 by default.  Note that the
        same port number is used for all IP addresses the server listens on.
        This parameter can only be set at server start.
-->
サーバが監視するTCPポートで、デフォルトは 5432です。
サーバが監視する全てのIPアドレスに対し、同じポート番号が使用されることを覚えておいてください。
このパラメータはサーバ起動時のみ設定可能です。
       </p></dd><dt id="GUC-MAX-CONNECTIONS"><span class="term"><code class="varname">max_connections</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.2.2.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.3.1.4" class="indexterm"></a>
      </span> <a href="#GUC-MAX-CONNECTIONS" class="id_link">#</a></dt><dd><p>
<!--
        Determines the maximum number of concurrent connections to the
        database server. The default is typically 100 connections, but
        might be less if your kernel settings will not support it (as
        determined during <application>initdb</application>).  This parameter can
        only be set at server start.
-->
データベースサーバに同時接続する最大数を決定します。
デフォルトは典型的に100接続ですが、カーネルの設定が（<span class="application">initdb</span>の過程で）それをサポートしていない場合、もっと少なくなることがあります。
このパラメータはサーバ起動時のみに設定可能です。
       </p><p>
<!--
        When running a standby server, you must set this parameter to the
        same or higher value than on the primary server. Otherwise, queries
        will not be allowed in the standby server.
-->
スタンバイサーバを運用している場合、このパラメータはプライマリサーバでの設定と同じ、もしくはより高い値に設定しなければなりません。そうしないと問い合わせがスタンバイサーバ内で受け入れられません。
       </p></dd><dt id="GUC-RESERVED-CONNECTIONS"><span class="term"><code class="varname">reserved_connections</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.2.2.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.4.1.4" class="indexterm"></a>
      </span> <a href="#GUC-RESERVED-CONNECTIONS" class="id_link">#</a></dt><dd><p>
<!--
        Determines the number of connection <quote>slots</quote> that are
        reserved for connections by roles with privileges of the
        <link linkend="predefined-roles-table"><literal>pg_use_reserved_connections</literal></link>
        role.  Whenever the number of free connection slots is greater than
        <xref linkend="guc-superuser-reserved-connections"/> but less than or
        equal to the sum of <varname>superuser_reserved_connections</varname>
        and <varname>reserved_connections</varname>, new connections will be
        accepted only for superusers and roles with privileges of
        <literal>pg_use_reserved_connections</literal>.  If
        <varname>superuser_reserved_connections</varname> or fewer connection
        slots are available, new connections will be accepted only for
        superusers.
-->
<a class="link" href="predefined-roles.html#PREDEFINED-ROLES-TABLE" title="表22.1 定義済みロール"><code class="literal">pg_use_reserved_connections</code></a>権限を持つロールによる接続のために予約される接続<span class="quote">「<span class="quote">スロット</span>」</span>の数を決定します。
空き接続スロットの数が<a class="xref" href="runtime-config-connection.html#GUC-SUPERUSER-RESERVED-CONNECTIONS">superuser_reserved_connections</a>より大きく、かつ<code class="varname">superuser_reserved_connections</code>と<code class="varname">reserved_connections</code>の合計以下の場合は常に、新しい接続はスーパーユーザあるいは<code class="literal">pg_use_reserved_connections</code>権限を持つロールに対してのみ受け入れられます。
<code class="varname">superuser_reserved_connections</code>以下の接続スロットが利用可能な場合、新しい接続はスーパーユーザに対してのみ受け入れられます。
       </p><p>
<!--
        The default value is zero connections.  The value must be less than
        <varname>max_connections</varname> minus
        <varname>superuser_reserved_connections</varname>.  This parameter can
        only be set at server start.
-->
デフォルトの値は0接続です。
この値は <code class="varname">max_connections</code> - <code class="varname">superuser_reserved_connections</code>より小さくなくてはなりません。
このパラメータはサーバ起動時のみ設定可能です。
       </p></dd><dt id="GUC-SUPERUSER-RESERVED-CONNECTIONS"><span class="term"><code class="varname">superuser_reserved_connections</code>
      (<code class="type">integer</code>)
      <a id="id-1.6.7.7.2.2.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.5.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SUPERUSER-RESERVED-CONNECTIONS" class="id_link">#</a></dt><dd><p>
<!--
        Determines the number of connection <quote>slots</quote> that
        are reserved for connections by <productname>PostgreSQL</productname>
        superusers.  At most <xref linkend="guc-max-connections"/>
        connections can ever be active simultaneously.  Whenever the
        number of active concurrent connections is at least
        <varname>max_connections</varname> minus
        <varname>superuser_reserved_connections</varname>, new
        connections will be accepted only for superusers.  The connection slots
        reserved by this parameter are intended as final reserve for emergency
        use after the slots reserved by
        <xref linkend="guc-reserved-connections"/> have been exhausted.
-->
<span class="productname">PostgreSQL</span>のスーパーユーザによる接続のために予約されている接続<span class="quote">「<span class="quote">スロット</span>」</span>の数を決定します。
最大、<a class="xref" href="runtime-config-connection.html#GUC-MAX-CONNECTIONS">max_connections</a>の数までの接続を同時に有効にすることができます。
有効な同時接続数が<code class="varname">max_connections</code>から<code class="varname">superuser_reserved_connections</code>を差し引いた数以上のときは、新規接続はスーパーユーザのみが許可されます。
このパラメータによる接続スロット予約は、<a class="xref" href="runtime-config-connection.html#GUC-RESERVED-CONNECTIONS">reserved_connections</a>によるスロット予約が使い果たされた後の緊急使用のための最終的な予備を意図しています。
       </p><p>
<!--
        The default value is three connections. The value must be less
        than <varname>max_connections</varname> minus
        <varname>reserved_connections</varname>.
        This parameter can only be set at server start.
-->
デフォルトの値は3接続です。
この値は <code class="varname">max_connections</code>から<code class="varname">reserved_connections</code>を引いたものより小さくなくてはなりません。
このパラメータはサーバ起動時のみ設定可能です。
       </p></dd><dt id="GUC-UNIX-SOCKET-DIRECTORIES"><span class="term"><code class="varname">unix_socket_directories</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.2.2.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.6.1.4" class="indexterm"></a>
      </span> <a href="#GUC-UNIX-SOCKET-DIRECTORIES" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the directory of the Unix-domain socket(s) on which the
        server is to listen for connections from client applications.
        Multiple sockets can be created by listing multiple directories
        separated by commas.  Whitespace between entries is
        ignored; surround a directory name with double quotes if you need
        to include whitespace or commas in the name.
        An empty value
        specifies not listening on any Unix-domain sockets, in which case
        only TCP/IP sockets can be used to connect to the server.
-->
クライアントアプリケーションからの接続をlistenするサーバ上のUnixドメインソケットのディレクトリを指定します。
複数のディレクトリをカンマで区切って指定することにより、複数のソケットを作ることができます。
項目の間の空白は無視されます。
名前の中に空白かカンマが必要なら、ディレクトリ名を二重引用符で囲ってください。
空の値はUnixドメインソケットをlistenしないことを意味します。
この場合、TCP/IPソケットを使ってサーバに接続することだけが可能になります。
       </p><p>
<!--
        A value that starts with <literal>@</literal> specifies that a
        Unix-domain socket in the abstract namespace should be created
        (currently supported on Linux only).  In that case, this value
        does not specify a <quote>directory</quote> but a prefix from which
        the actual socket name is computed in the same manner as for the
        file-system namespace.  While the abstract socket name prefix can be
        chosen freely, since it is not a file-system location, the convention
        is to nonetheless use file-system-like values such as
        <literal>@/tmp</literal>.
-->
<code class="literal">@</code>で始まる値は、抽象名前空間にUnixドメインソケットを作ることを指定します（今の所これはLinuxでのみサポートされています）。
この場合、この値は<span class="quote">「<span class="quote">ディレクトリ</span>」</span>ではなくファイルシステムの名前空間と同様の方法で、実際のソケット名の接頭辞が求められます。
ファイルシステムの位置ではないため、抽象ソケット名接頭辞は自由に選択できますが、それにもかかわらず<code class="literal">@/tmp</code>のようなファイルシステム的な値を使うのが慣例です。
       </p><p>
<!--
        The default value is normally
        <filename>/tmp</filename>, but that can be changed at build time.
        On Windows, the default is empty, which means no Unix-domain socket is
        created by default.
        This parameter can only be set at server start.
-->
デフォルト値は通常<code class="filename">/tmp</code>ですが、ビルド時に変更できます。
Windowsではデフォルトは空文字で、これはつまりUnixドメインソケットがデフォルトでは作成されないことを意味します。
このパラメータはサーバ起動時のみ設定可能です。
       </p><p>
<!--
        In addition to the socket file itself, which is named
        <literal>.s.PGSQL.<replaceable>nnnn</replaceable></literal> where
        <replaceable>nnnn</replaceable> is the server's port number, an ordinary file
        named <literal>.s.PGSQL.<replaceable>nnnn</replaceable>.lock</literal> will be
        created in each of the <varname>unix_socket_directories</varname> directories.
        Neither file should ever be removed manually.
        For sockets in the abstract namespace, no lock file is created.
-->
<code class="literal">.s.PGSQL.<em class="replaceable"><code>nnnn</code></em></code>という名前のソケットファイル（<em class="replaceable"><code>nnnn</code></em>はポート番号）のほかに、<code class="literal">.s.PGSQL.<em class="replaceable"><code>nnnn</code></em>.lock</code>という通常ファイルがそれぞれの<code class="varname">unix_socket_directories</code>ディレクトリの中に作成されます。
いずれのファイルも手作業で削除してはいけません。
抽象名前空間にあるソケットにはロックファイルは作成されません。
       </p></dd><dt id="GUC-UNIX-SOCKET-GROUP"><span class="term"><code class="varname">unix_socket_group</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.2.2.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.7.1.4" class="indexterm"></a>
      </span> <a href="#GUC-UNIX-SOCKET-GROUP" class="id_link">#</a></dt><dd><p>
<!--
        Sets the owning group of the Unix-domain socket(s).  (The owning
        user of the sockets is always the user that starts the
        server.)  In combination with the parameter
        <varname>unix_socket_permissions</varname> this can be used as
        an additional access control mechanism for Unix-domain connections.
        By default this is the empty string, which uses the default
        group of the server user.  This parameter can only be set at
        server start.
-->
Unixドメインソケット（複数も）を所有するグループを設定します（ソケットを所有するユーザは常にサーバを起動するユーザです）。
<code class="varname">unix_socket_permissions</code>パラメータとの組合せで、Unixドメインソケット接続の追加的アクセス管理機構として使うことができます。
デフォルトでは空文字列で、サーバユーザのデフォルトグループを使用します。
このパラメータはサーバ起動時のみ設定可能です。
       </p><p>
<!--
        This parameter is not supported on Windows.  Any setting will be
        ignored.  Also, sockets in the abstract namespace have no file owner,
        so this setting is also ignored in that case.
-->
このパラメータはWindowsではサポートされていません。
すべての設定は無視されます。
また、抽象名前空間にあるソケットはファイル所有者を持たないので、この場合も設定は無視されます。
       </p></dd><dt id="GUC-UNIX-SOCKET-PERMISSIONS"><span class="term"><code class="varname">unix_socket_permissions</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.2.2.8.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.8.1.4" class="indexterm"></a>
      </span> <a href="#GUC-UNIX-SOCKET-PERMISSIONS" class="id_link">#</a></dt><dd><p>
<!--
        Sets the access permissions of the Unix-domain socket(s).  Unix-domain
        sockets use the usual Unix file system permission set.
        The parameter value is expected to be a numeric mode
        specified in the format accepted by the
        <function>chmod</function> and <function>umask</function>
        system calls.  (To use the customary octal format the number
        must start with a <literal>0</literal> (zero).)
-->
Unixドメインソケット（複数も）のアクセスパーミッションを設定します。
Unixドメインソケットは通常のUnixファイルシステムパーミッション設定の一式を使用します。
パラメータ値は、<code class="function">chmod</code>および<code class="function">umask</code>システムコールが受け付ける数値形式での指定を想定しています。
（通常使われる8進数形式を使用するのであれば、<code class="literal">0</code>（ゼロ）で始まらなければなりません。）
       </p><p>
<!--
        The default permissions are <literal>0777</literal>, meaning
        anyone can connect. Reasonable alternatives are
        <literal>0770</literal> (only user and group, see also
        <varname>unix_socket_group</varname>) and <literal>0700</literal>
        (only user). (Note that for a Unix-domain socket, only write
        permission matters, so there is no point in setting or revoking
        read or execute permissions.)
-->
デフォルトのパーミッションは、誰でも接続できる<code class="literal">0777</code>になっています。
変更するならば<code class="literal">0770</code>（ユーザとグループのみです。<code class="varname">unix_socket_group</code>も参照してください）や<code class="literal">0700</code>（ユーザのみ）が適切です。
（Unixドメインソケットでは書き込み権限だけが問題になるため、読み込みや実行のパーミッションを設定または解除する意味はありません。）
       </p><p>
<!--
        This access control mechanism is independent of the one
        described in <xref linkend="client-authentication"/>.
-->
このアクセス制御機構は <a class="xref" href="client-authentication.html" title="第21章 クライアント認証">第21章</a>で記述されたものとは別個のものです。
       </p><p>
<!--
        This parameter can only be set at server start.
-->
このパラメータはサーバ起動時のみ設定可能です。
       </p><p>
<!--
        This parameter is irrelevant on systems, notably Solaris as of Solaris
        10, that ignore socket permissions entirely.  There, one can achieve a
        similar effect by pointing <varname>unix_socket_directories</varname> to a
        directory having search permission limited to the desired audience.
-->
このパラメータはSolaris 10の時点でのSolarisなど、ソケットのパーミッションを完全に無視するシステムでは無関係です。
こうしたシステムでは、許可したいユーザだけが検索パーミッションを持つディレクトリを<code class="varname">unix_socket_directories</code>で指すようにすることによって同じような効果を得ることができます。
       </p><p>
<!--
        Sockets in the abstract namespace have no file permissions, so this
        setting is also ignored in that case.
-->
抽象名前空間にあるソケットはパーミッションを持たないので、この設定も無視されます。
       </p></dd><dt id="GUC-BONJOUR"><span class="term"><code class="varname">bonjour</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.2.2.9.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.9.1.4" class="indexterm"></a>
      </span> <a href="#GUC-BONJOUR" class="id_link">#</a></dt><dd><p>
<!--
        Enables advertising the server's existence via
        <productname>Bonjour</productname>.  The default is off.
        This parameter can only be set at server start.
-->
<span class="productname">Bonjour</span>によりサーバの存在を公表することを可能にします。デフォルトはoffです。このパラメータはサーバ起動時のみ設定可能です。
       </p></dd><dt id="GUC-BONJOUR-NAME"><span class="term"><code class="varname">bonjour_name</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.2.2.10.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.2.2.10.1.4" class="indexterm"></a>
      </span> <a href="#GUC-BONJOUR-NAME" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the <productname>Bonjour</productname> service
        name.  The computer name is used if this parameter is set to the
        empty string <literal>''</literal> (which is the default).  This parameter is
        ignored if the server was not compiled with
        <productname>Bonjour</productname> support.
        This parameter can only be set at server start.
-->
<span class="productname">Bonjour</span>サービス名を指定します。
このパラメータが空文字列<code class="literal">''</code>（デフォルトです）に設定されていると、コンピュータ名が使用されます。
サーバが<span class="productname">Bonjour</span>サポート付でコンパイルでされていない場合は無視されます。
このオプションはサーバ起動時のみに設定可能です。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-TCP-SETTINGS"><div class="titlepage"><div><div><h3 class="title">20.3.2. TCP Settings <a href="#RUNTIME-CONFIG-TCP-SETTINGS" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-TCP-KEEPALIVES-IDLE"><span class="term"><code class="varname">tcp_keepalives_idle</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.3.2.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.3.2.1.1.4" class="indexterm"></a>
      </span> <a href="#GUC-TCP-KEEPALIVES-IDLE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the amount of time with no network activity after which
        the operating system should send a TCP keepalive message to the client.
        If this value is specified without units, it is taken as seconds.
        A value of 0 (the default) selects the operating system's default.
        On Windows, setting a value of 0 will set this parameter to 2 hours,
        since Windows does not provide a way to read the system default value.
        This parameter is supported only on systems that support
        <symbol>TCP_KEEPIDLE</symbol> or an equivalent socket option, and on
        Windows; on other systems, it must be zero.
        In sessions connected via a Unix-domain socket, this parameter is
        ignored and always reads as zero.
-->
クライアントとのやり取りがなくなった後、オペレーティングシステムがTCPのkeepaliveパケットをクライアントに送信するまでの時間を指定します。
この値が単位なしで指定された場合は、秒単位であるとみなします。
0（デフォルトです）の場合はオペレーティングシステムのデフォルト値を使用します。
Windowsでは、システムのデフォルト値を読み取る方法がないため、値0を設定すると、このパラメータは2時間に設定されます。
このパラメータは<code class="symbol">TCP_KEEPIDLE</code>または同等のソケットオプションをサポートするシステムと、Windowsでのみサポートされます。
その他のシステムではゼロでなければなりません。
Unixドメインソケット経由で接続されたセッションでは、このパラメータは無視され、常にゼロとして読み取られます。
       </p></dd><dt id="GUC-TCP-KEEPALIVES-INTERVAL"><span class="term"><code class="varname">tcp_keepalives_interval</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.3.2.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.3.2.2.1.4" class="indexterm"></a>
      </span> <a href="#GUC-TCP-KEEPALIVES-INTERVAL" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the amount of time after which a TCP keepalive message
        that has not been acknowledged by the client should be retransmitted.
        If this value is specified without units, it is taken as seconds.
        A value of 0 (the default) selects the operating system's default.
        On Windows, setting a value of 0 will set this parameter to 1 second,
        since Windows does not provide a way to read the system default value.
        This parameter is supported only on systems that support
        <symbol>TCP_KEEPINTVL</symbol> or an equivalent socket option, and on
        Windows; on other systems, it must be zero.
        In sessions connected via a Unix-domain socket, this parameter is
        ignored and always reads as zero.
-->
TCPのkeepaliveメッセージに対してクライアントから応答がない場合に、再送を行うまでの時間を指定します。
この値が単位なしで指定された場合は、秒単位であるとみなします。
0（デフォルトです）の場合はシステムのデフォルト値を使用します。
Windowsでは、システムのデフォルト値を読み取る方法がないため、値0を設定すると、このパラメータが1秒に設定されます。
このパラメータは<code class="symbol">TCP_KEEPINTVL</code>または同等のソケットオプションをサポートするシステムと、Windowsでのみサポートされます。
その他のシステムではゼロでなければなりません。
Unixドメインソケット経由で接続されたセッションでは、このパラメータは無視され、常にゼロとして読み取られます。
       </p></dd><dt id="GUC-TCP-KEEPALIVES-COUNT"><span class="term"><code class="varname">tcp_keepalives_count</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.3.2.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.3.2.3.1.4" class="indexterm"></a>
      </span> <a href="#GUC-TCP-KEEPALIVES-COUNT" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the number of TCP keepalive messages that can be lost before
        the server's connection to the client is considered dead.
        A value of 0 (the default) selects the operating system's default.
        This parameter is supported only on systems that support
        <symbol>TCP_KEEPCNT</symbol> or an equivalent socket option (which does not include Windows);
        on other systems, it must be zero.
        In sessions connected via a Unix-domain socket, this parameter is
        ignored and always reads as zero.
-->
サーバのクライアントへの接続が切れたと判断されるまでのTCP keepaliveメッセージの数を指定します。
0（デフォルトです）の場合はオペレーティングシステムのデフォルト値を使用します。
このパラメータは<code class="symbol">TCP_KEEPCNT</code>または同等のソケットオプションをサポートするシステムでのみサポートされます（Windowsは含みません）。
その他のシステムではゼロでなければなりません。
Unixドメインソケット経由で接続されたセッションでは、このパラメータは無視され、常にゼロとして読み取られます。
       </p></dd><dt id="GUC-TCP-USER-TIMEOUT"><span class="term"><code class="varname">tcp_user_timeout</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.3.2.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.3.2.4.1.4" class="indexterm"></a>
      </span> <a href="#GUC-TCP-USER-TIMEOUT" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the amount of time that transmitted data may
        remain unacknowledged before the TCP connection is forcibly closed.
        If this value is specified without units, it is taken as milliseconds.
        A value of 0 (the default) selects the operating system's default.
        This parameter is supported only on systems that support
        <symbol>TCP_USER_TIMEOUT</symbol> (which does not include Windows); on other systems, it must be zero.
        In sessions connected via a Unix-domain socket, this parameter is
        ignored and always reads as zero.
-->
未応答の送信データが残ったままの接続が強制的に閉じられるまでの時間を指定します。
この値が単位なしで指定された場合は、ミリ秒単位であるとみなします。
0（デフォルトです）の場合はオペレーティングシステムのデフォルト値を使用します。
このパラメータは、<code class="symbol">TCP_USER_TIMEOUT</code>をサポートするシステム（Windowsは含みません）でのみ使用できます。他のシステムでは、0にする必要があります。
UNIXドメインソケットで接続しているセッションではこのパラメータは無視され、常に0として扱われます。
       </p></dd><dt id="GUC-CLIENT-CONNECTION-CHECK-INTERVAL"><span class="term"><code class="varname">client_connection_check_interval</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.3.2.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.3.2.5.1.4" class="indexterm"></a>
      </span> <a href="#GUC-CLIENT-CONNECTION-CHECK-INTERVAL" class="id_link">#</a></dt><dd><p>
<!--
        Sets the time interval between optional checks that the client is still
        connected, while running queries.  The check is performed by polling
        the socket, and allows long running queries to be aborted sooner if
        the kernel reports that the connection is closed.
-->
問い合わせを実行中に、クライアントがまだ接続しているどうかの追加のチェックを行う時間間隔を指定します。
このチェックはソケットをポーリングすることによって行われ、その接続がクローズされていることをカーネルが報告することによって、長時間実行中の問い合わせをより早くアボートさせることができます。
       </p><p>
<!--
        This option relies on kernel events exposed by Linux, macOS, illumos
        and the BSD family of operating systems, and is not currently available
        on other systems.
-->
このオプションは、Linux、macOS、illumos、BSDファミリーのオペレーティングシステムによって公開されるカーネルイベントに依存しており、現在他のシステムでは利用できません。
       </p><p>
<!--
        If the value is specified without units, it is taken as milliseconds.
        The default value is <literal>0</literal>, which disables connection
        checks.  Without connection checks, the server will detect the loss of
        the connection only at the next interaction with the socket, when it
        waits for, receives or sends data.
-->
値が単位なしに指定されると、ミリ秒であるとみなされます。
デフォルト値は<code class="literal">0</code>で、接続のチェックは無効になります。
接続チェックがない場合、サーバは接続が失われたことを、次のソケットへのアクセス、すなわちソケットの待受、データの受信、送信のときにだけ検出します。
       </p><p>
<!--
        For the kernel itself to detect lost TCP connections reliably and within
        a known timeframe in all scenarios including network failure, it may
        also be necessary to adjust the TCP keepalive settings of the operating
        system, or the <xref linkend="guc-tcp-keepalives-idle"/>,
        <xref linkend="guc-tcp-keepalives-interval"/> and
        <xref linkend="guc-tcp-keepalives-count"/> settings of
        <productname>PostgreSQL</productname>.
-->
ネットワーク障害を含めて、TCP接続が失われたことをすべてのシナリオにおいて既知のタイムフレームの中で確実にカーネルが検出するためには、オペレーティングシステムのTCP keepalive設定、あるいは<span class="productname">PostgreSQL</span>の<a class="xref" href="runtime-config-connection.html#GUC-TCP-KEEPALIVES-IDLE">tcp_keepalives_idle</a>、<a class="xref" href="runtime-config-connection.html#GUC-TCP-KEEPALIVES-INTERVAL">tcp_keepalives_interval</a>、<a class="xref" href="runtime-config-connection.html#GUC-TCP-KEEPALIVES-COUNT">tcp_keepalives_count</a>設定を調整することが必要になるかもしれません。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-CONNECTION-AUTHENTICATION"><div class="titlepage"><div><div><h3 class="title">20.3.3. 認証 <a href="#RUNTIME-CONFIG-CONNECTION-AUTHENTICATION" class="id_link">#</a></h3></div></div></div><!--
     <title>Authentication</title>
--><div class="variablelist"><dl class="variablelist"><dt id="GUC-AUTHENTICATION-TIMEOUT"><span class="term"><code class="varname">authentication_timeout</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.4.2.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.1.1.4" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.1.1.5" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.1.1.6" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.1.1.7" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.1.1.8" class="indexterm"></a>
      </span> <a href="#GUC-AUTHENTICATION-TIMEOUT" class="id_link">#</a></dt><dd><p>
<!--
        Maximum amount of time allowed to complete client authentication. If a
        would-be client has not completed the authentication protocol in
        this much time, the server closes the connection. This prevents
        hung clients from occupying a connection indefinitely.
        If this value is specified without units, it is taken as seconds.
        The default is one minute (<literal>1m</literal>).
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
クライアント認証を完了するまでの最大時間です。
もし、この時間内に自称クライアントが認証プロトコルを完了しない場合、サーバは接続を閉じます。
これはハングしたクライアントが接続を永久に占有することを防ぎます。
この値が単位なしで指定された場合は、秒単位であるとみなします。
デフォルトは1分（<code class="literal">1m</code>）です。
このパラメータは<code class="filename">postgresql.conf</code>ファイル、またはサーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-PASSWORD-ENCRYPTION"><span class="term"><code class="varname">password_encryption</code> (<code class="type">enum</code>)
      <a id="id-1.6.7.7.4.2.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.2.1.4" class="indexterm"></a>
      </span> <a href="#GUC-PASSWORD-ENCRYPTION" class="id_link">#</a></dt><dd><p>
<!--
        When a password is specified in <xref linkend="sql-createrole"/> or
        <xref linkend="sql-alterrole"/>, this parameter determines the
        algorithm to use to encrypt the password.  Possible values are
        <literal>scram-sha-256</literal>, which will encrypt the password with
        SCRAM-SHA-256, and <literal>md5</literal>, which stores the password
        as an MD5 hash.  The default is <literal>scram-sha-256</literal>.
-->
<a class="xref" href="sql-createrole.html" title="CREATE ROLE"><span class="refentrytitle">CREATE ROLE</span></a>あるいは<a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>でパスワードを設定する際に、このパラメータはパスワードを暗号化するアルゴリズムを指定します。
可能な値は、SCRAM-SHA-256でパスワードを暗号化する<code class="literal">scram-sha-256</code>とパスワードをMD5ハッシュとして格納する<code class="literal">md5</code>です。
デフォルト値は<code class="literal">scram-sha-256</code>です。
       </p><p>
<!--
        Note that older clients might lack support for the SCRAM authentication
        mechanism, and hence not work with passwords encrypted with
        SCRAM-SHA-256.  See <xref linkend="auth-password"/> for more details.
-->
古いクライアントはSCRAM認証機構をサポートしていない可能性があり、したがってSCRAM-SHA-256による暗号化は動作しないかもしれないことに注意してください。
さらなる詳細については<a class="xref" href="auth-password.html" title="21.5. パスワード認証">21.5</a>をご覧ください。
       </p></dd><dt id="GUC-SCRAM-ITERATIONS"><span class="term"><code class="varname">scram_iterations</code> (<code class="type">integer</code>)
      <a id="id-1.6.7.7.4.2.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.3.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SCRAM-ITERATIONS" class="id_link">#</a></dt><dd><p>
<!--
        The number of computational iterations to be performed when encrypting
        a password using SCRAM-SHA-256. The default is <literal>4096</literal>.
        A higher number of iterations provides additional protection against
        brute-force attacks on stored passwords, but makes authentication
        slower. Changing the value has no effect on existing passwords
        encrypted with SCRAM-SHA-256 as the iteration count is fixed at the
        time of encryption. In order to make use of a changed value, a new
        password must be set.
-->
SCRAM-SHA-256を使用してパスワードを暗号化するときに実行される計算の反復回数です。
デフォルトは<code class="literal">4096</code>です。
反復回数が多いほど、格納されたパスワードに対するブルートフォース攻撃に対する保護が強化されますが、認証の速度は低下します。
反復カウントは暗号化時に固定されるため、値を変更してもSCRAM-SHA-256で暗号化された既存のパスワードには影響しません。
変更された値を有効にするには、新しいパスワードを設定する必要があります。
       </p></dd><dt id="GUC-KRB-SERVER-KEYFILE"><span class="term"><code class="varname">krb_server_keyfile</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.4.2.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.4.1.4" class="indexterm"></a>
      </span> <a href="#GUC-KRB-SERVER-KEYFILE" class="id_link">#</a></dt><dd><p>
<!--
        Sets the location of the server's Kerberos key file.  The default is
        <filename>FILE:/usr/local/pgsql/etc/krb5.keytab</filename>
        (where the directory part is whatever was specified
        as <varname>sysconfdir</varname> at build time; use
        <literal>pg_config &#45;-sysconfdir</literal> to determine that).
        If this parameter is set to an empty string, it is ignored and a
        system-dependent default is used.
        This parameter can only be set in the
        <filename>postgresql.conf</filename> file or on the server command line.
        See <xref linkend="gssapi-auth"/> for more information.
-->
Kerberosサーバーキーファイルの場所を設定します。
デフォルトは<code class="filename">FILE:/usr/local/pgsql/etc/krb5.keytab</code>です。
（ディレクトリ部分は構築時に<code class="varname">sysconfdir</code>で指定されたものです。
<code class="literal">pg_config --sysconfdir</code>を使って確認してください。）
このパラメータが空文字列に設定されると、それは無視されてシステム依存のデフォルトが使用されます。
このパラメータは<code class="filename">postgresql.conf</code>ファイル、またはサーバのコマンドラインでのみ設定可能です。
詳細は<a class="xref" href="gssapi-auth.html" title="21.6. GSSAPI認証">21.6</a>をご覧ください。
       </p></dd><dt id="GUC-KRB-CASEINS-USERS"><span class="term"><code class="varname">krb_caseins_users</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.4.2.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.5.1.4" class="indexterm"></a>
      </span> <a href="#GUC-KRB-CASEINS-USERS" class="id_link">#</a></dt><dd><p>
<!--
        Sets whether GSSAPI user names should be treated
        case-insensitively.
        The default is <literal>off</literal> (case sensitive). This parameter can only be
        set in the <filename>postgresql.conf</filename> file or on the server command line.
-->
GSSAPIユーザ名を大文字小文字の区別なく取り扱うかどうかを設定します。
デフォルトは<code class="literal">off</code>（大文字小文字を区別する）です。
このパラメータは<code class="filename">postgresql.conf</code>ファイル、またはサーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-GSS-ACCEPT-DELEGATION"><span class="term"><code class="varname">gss_accept_delegation</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.4.2.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.6.1.4" class="indexterm"></a>
      </span> <a href="#GUC-GSS-ACCEPT-DELEGATION" class="id_link">#</a></dt><dd><p>
<!--
        Sets whether GSSAPI delegation should be accepted from the client.
        The default is <literal>off</literal> meaning credentials from the client will
        <emphasis>not</emphasis> be accepted.  Changing this to <literal>on</literal> will make the server
        accept credentials delegated to it from the client. This parameter can only be
        set in the <filename>postgresql.conf</filename> file or on the server command line.
-->
クライアントからのGSSAPI委任を受け入れるかどうかを設定します。
デフォルトは<code class="literal">off</code>です。
これは、クライアントからの資格証明が受け入れ<span class="emphasis"><em>られない</em></span>ことを意味します。
これを<code class="literal">on</code>に変更すると、サーバは、クライアントから委任された資格証明を受け入れます。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルまたはサーバコマンドラインでのみ設定できます。
       </p></dd><dt id="GUC-DB-USER-NAMESPACE"><span class="term"><code class="varname">db_user_namespace</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.4.2.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.4.2.7.1.4" class="indexterm"></a>
      </span> <a href="#GUC-DB-USER-NAMESPACE" class="id_link">#</a></dt><dd><p>
<!--
        This parameter enables per-database user names.  It is off by default.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータはデータベース毎のユーザ名を可能にします。
デフォルトはオフです。
このパラメータは<code class="filename">postgresql.conf</code>ファイル、またはサーバのコマンドラインでのみ設定可能です。
       </p><p>
<!--
        If this is on, you should create users as <replaceable>username@dbname</replaceable>.
        When <replaceable>username</replaceable> is passed by a connecting client,
        <literal>@</literal> and the database name are appended to the user
        name and that database-specific user name is looked up by the
        server. Note that when you create users with names containing
        <literal>@</literal> within the SQL environment, you will need to
        quote the user name.
-->
これがオンの場合、<em class="replaceable"><code>username@dbname</code></em>の様にしてユーザを作成しなければなりません。
<em class="replaceable"><code>username</code></em>が接続中のクライアントより渡された時、 <code class="literal">@</code>およびデータベース名がユーザ名に付加され、そのデータベース特有のユーザ名をサーバが見に行きます。
SQL環境下で<code class="literal">@</code>を含む名前のユーザを作成する場合、そのユーザ名は引用符で括られなければならないことに注意してください。
       </p><p>
<!--
        With this parameter enabled, you can still create ordinary global
        users.  Simply append <literal>@</literal> when specifying the user
        name in the client, e.g., <literal>joe@</literal>.  The <literal>@</literal>
        will be stripped off before the user name is looked up by the
        server.
-->
このパラメータを有効にしていても通常の広域ユーザを作成することができます。
クライアントにユーザ名を指定する時に、たとえば<code class="literal">joe@</code>のように単に<code class="literal">@</code>を付け加えてください。
<code class="literal">@</code>はサーバがユーザ名を検索する以前に取り去られます。
       </p><p>
<!--
        <varname>db_user_namespace</varname> causes the client's and
        server's user name representation to differ.
        Authentication checks are always done with the server's user name
        so authentication methods must be configured for the
        server's user name, not the client's.  Because
        <literal>md5</literal> uses the user name as salt on both the
        client and server, <literal>md5</literal> cannot be used with
        <varname>db_user_namespace</varname>.
-->
<code class="varname">db_user_namespace</code>はクライアントとサーバのユーザ名の表示を区別することができます。
認証検査は常にサーバのユーザ名で行われるので、認証方式はクライアントのではなくサーバのユーザ名で構成されなければなりません。
<code class="literal">md5</code>では、クライアントおよびサーバの両方でユーザ名をソルトとして使用するので、<code class="literal">md5</code>を<code class="varname">db_user_namespace</code>と一緒に使用することはできません。
       </p><div class="note"><h3 class="title">注記</h3><p>
<!--
         This feature is intended as a temporary measure until a
         complete solution is found.  At that time, this option will
         be removed.
-->
この機能は完全な解決方法が見つかるまでの一時的なものです。
完全な解決方法が見つかったら、このオプションは削除される予定です。
        </p></div></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-CONNECTION-SSL"><div class="titlepage"><div><div><h3 class="title">20.3.4. SSL <a href="#RUNTIME-CONFIG-CONNECTION-SSL" class="id_link">#</a></h3></div></div></div><p>
<!--
      See <xref linkend="ssl-tcp"/> for more information about setting up
      <acronym>SSL</acronym>. The configuration parameters for controlling
      transfer encryption using <acronym>TLS</acronym> protocols are named
      <literal>ssl</literal> for historic reasons, even though support for
      the <acronym>SSL</acronym> protocol has been deprecated.
      <acronym>SSL</acronym> is in this context used interchangeably with
      <acronym>TLS</acronym>.
-->
<acronym class="acronym">SSL</acronym>の設定の詳細は、<a class="xref" href="ssl-tcp.html" title="19.9. SSLによる安全なTCP/IP接続">19.9</a>を参照してください。
<acronym class="acronym">TLS</acronym>プロトコルを使用した転送暗号化を制御するための構成パラメータは、<acronym class="acronym">SSL</acronym>プロトコルのサポートが推奨されていないにもかかわらず、歴史的な理由から<code class="literal">ssl</code>と名付けられています。
<acronym class="acronym">SSL</acronym>はこの文脈で<acronym class="acronym">TLS</acronym>と同じ意味で使用されます。
     </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-SSL"><span class="term"><code class="varname">ssl</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.5.3.1.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.1.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL" class="id_link">#</a></dt><dd><p>
<!--
        Enables <acronym>SSL</acronym> connections.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is <literal>off</literal>.
-->
<acronym class="acronym">SSL</acronym>による接続を有効にします。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは<code class="literal">off</code>です。
       </p></dd><dt id="GUC-SSL-CA-FILE"><span class="term"><code class="varname">ssl_ca_file</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.2.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.2.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-CA-FILE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the file containing the SSL server certificate
        authority (CA).
        Relative paths are relative to the data directory.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is empty, meaning no CA file is loaded,
        and client certificate verification is not performed.
-->
SSLサーバ認証局（CA）が入っているファイル名を設定します。
相対パスの場合は、データディレクトリからの相対パスになります。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは空で、この場合CAファイルは読み込まれず、クライアントのサーバ検証は行われません。
       </p></dd><dt id="GUC-SSL-CERT-FILE"><span class="term"><code class="varname">ssl_cert_file</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.3.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.3.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-CERT-FILE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the file containing the SSL server certificate.
        Relative paths are relative to the data directory.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is <filename>server.crt</filename>.
-->
SSLサーバ証明書が入っているファイル名を設定します。
相対パスの場合は、データディレクトリからの相対パスになります。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは <code class="filename">server.crt</code> です。
       </p></dd><dt id="GUC-SSL-CRL-FILE"><span class="term"><code class="varname">ssl_crl_file</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.4.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.4.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-CRL-FILE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the file containing the SSL client certificate
        revocation list (CRL).
        Relative paths are relative to the data directory.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is empty, meaning no CRL file is loaded (unless
        <xref linkend="guc-ssl-crl-dir"/> is set).
-->
SSLクライアント証明書失効リスト（CRL）が入っているファイル名を設定します。
相対パスの場合は、データディレクトリからの相対パスになります。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは空で、この場合CRLファイルは読み込まれません（<a class="xref" href="runtime-config-connection.html#GUC-SSL-CRL-DIR">ssl_crl_dir</a>が設定されていない限り）。
       </p></dd><dt id="GUC-SSL-CRL-DIR"><span class="term"><code class="varname">ssl_crl_dir</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.5.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.5.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-CRL-DIR" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the directory containing the SSL client
        certificate revocation list (CRL).  Relative paths are relative to the
        data directory.  This parameter can only be set in
        the <filename>postgresql.conf</filename> file or on the server command
        line.  The default is empty, meaning no CRLs are used (unless
        <xref linkend="guc-ssl-crl-file"/> is set).
-->
SSLクライアント証明書失効リスト（CRL）が入っているディレクトリ名を設定します。
相対パスの場合は、データディレクトリからの相対パスになります。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは空で、この場合CRLファイルは読み込まれません（<a class="xref" href="runtime-config-connection.html#GUC-SSL-CRL-FILE">ssl_crl_file</a>が設定されていない限り）。
       </p><p>
<!--
        The directory needs to be prepared with the
        <productname>OpenSSL</productname> command
        <literal>openssl rehash</literal> or <literal>c_rehash</literal>.  See
        its documentation for details.
-->
このディレクトリは<span class="productname">OpenSSL</span>コマンドの<code class="literal">openssl rehash</code>あるいは<code class="literal">c_rehash</code>で準備されなければなりません。
詳細はそれらのドキュメントをご覧ください。
       </p><p>
<!--
        When using this setting, CRLs in the specified directory are loaded
        on-demand at connection time.  New CRLs can be added to the directory
        and will be used immediately.  This is unlike <xref
        linkend="guc-ssl-crl-file"/>, which causes the CRL in the file to be
        loaded at server start time or when the configuration is reloaded.
        Both settings can be used together.
-->
この設定を使用すると、指定したディレクトリ内のCRLが接続時に必要に応じて読み込まれます。
新しいCRLをこのディレクトリに追加することが可能で、即座に使用されます。
サーバが起動されるとき、あるいは設定が再読込されるときに読み込まれる<a class="xref" href="runtime-config-connection.html#GUC-SSL-CRL-FILE">ssl_crl_file</a>とは異なります。
両方の設定は一緒に使用できます。
       </p></dd><dt id="GUC-SSL-KEY-FILE"><span class="term"><code class="varname">ssl_key_file</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.6.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.6.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-KEY-FILE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the file containing the SSL server private key.
        Relative paths are relative to the data directory.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is <filename>server.key</filename>.
-->
SSLサーバの秘密鍵が入っているファイル名を設定します。
相対パスの場合は、データディレクトリからの相対パスになります。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは <code class="filename">server.key</code> です。
       </p></dd><dt id="GUC-SSL-CIPHERS"><span class="term"><code class="varname">ssl_ciphers</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.7.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.7.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-CIPHERS" class="id_link">#</a></dt><dd><p>
<!--
        Specifies a list of <acronym>SSL</acronym> cipher suites that are
        allowed to be used by SSL connections.  See the
        <citerefentry><refentrytitle>ciphers</refentrytitle></citerefentry>
        manual page in the <productname>OpenSSL</productname> package for the
        syntax of this setting and a list of supported values.  Only
        connections using TLS version 1.2 and lower are affected.  There is
        currently no setting that controls the cipher choices used by TLS
        version 1.3 connections.  The default value is
        <literal>HIGH:MEDIUM:+3DES:!aNULL</literal>.  The default is usually a
        reasonable choice unless you have specific security requirements.
-->
SSL接続で使うことのできる<acronym class="acronym">SSL</acronym>暗号スイートのリストを指定します。
設定構文と使用可能な値のリストについては<span class="productname">OpenSSL</span>パッケージの
<span class="citerefentry"><span class="refentrytitle">ciphers</span></span>マニュアルをご覧ください。
TLSバージョン1.2あるいはそれ以下のバージョンを使用する接続のみが影響を受けます。
今の所、TLSバージョン1.3接続で使用される暗号の選択を制御する設定はありません。
デフォルト値は<code class="literal">HIGH:MEDIUM:+3DES:!aNULL</code>です。
特別なセキュリティ要件でなければ通常これが適当です。
       </p><p>
<!--
        This parameter can only be set in the
        <filename>postgresql.conf</filename> file or on the server command
        line.
-->
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
       </p><p>
<!--
        Explanation of the default value:
-->
デフォルト値の説明:
        </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-SSL-CIPHERS-HIGH"><span class="term"><code class="literal">HIGH</code></span> <a href="#GUC-SSL-CIPHERS-HIGH" class="id_link">#</a></dt><dd><p>
<!--
            Cipher suites that use ciphers from <literal>HIGH</literal> group (e.g.,
            AES, Camellia, 3DES)
-->
<code class="literal">HIGH</code>グループ(たとえばAES, Camellia, 3DES)を使用する暗号スイート
           </p></dd><dt id="GUC-SSL-CIPHERS-MEDIUM"><span class="term"><code class="literal">MEDIUM</code></span> <a href="#GUC-SSL-CIPHERS-MEDIUM" class="id_link">#</a></dt><dd><p>
<!--
            Cipher suites that use ciphers from <literal>MEDIUM</literal> group
            (e.g., RC4, SEED)
-->
<code class="literal">MEDIUM</code>グループ(たとえば RC4, SEED)を使用する暗号スイート
           </p></dd><dt id="GUC-SSL-CIPHERS-PLUS-3DES"><span class="term"><code class="literal">+3DES</code></span> <a href="#GUC-SSL-CIPHERS-PLUS-3DES" class="id_link">#</a></dt><dd><p>
<!--
            The <productname>OpenSSL</productname> default order for
            <literal>HIGH</literal> is problematic because it orders 3DES
            higher than AES128.  This is wrong because 3DES offers less
            security than AES128, and it is also much slower.
            <literal>+3DES</literal> reorders it after all other
            <literal>HIGH</literal> and <literal>MEDIUM</literal> ciphers.
-->
<span class="productname">OpenSSL</span>の<code class="literal">HIGH</code>に対するデフォルトの並び順には問題があります。
3DESがAES128より高いとしているからです。
3DESはAES128よりもセキュアではなく、またずっと遅いので、これは間違っています。
<code class="literal">+3DES</code>ではそれを他のすべての<code class="literal">HIGH</code>と<code class="literal">MEDIUM</code>暗号よりも後に位置づけます。
           </p></dd><dt id="GUC-SSL-CIPHERS-NOT-ANULL"><span class="term"><code class="literal">!aNULL</code></span> <a href="#GUC-SSL-CIPHERS-NOT-ANULL" class="id_link">#</a></dt><dd><p>
<!--
            Disables anonymous cipher suites that do no authentication.  Such
            cipher suites are vulnerable to <acronym>MITM</acronym> attacks and
            therefore should not be used.
-->
認証を行わない匿名暗号スイートを無効にします。
そういった暗号スイートは<acronym class="acronym">MITM</acronym>攻撃に対して脆弱で、使用すべきではありません。
           </p></dd></dl></div><p>
       </p><p>
<!--
        Available cipher suite details will vary across
        <productname>OpenSSL</productname> versions.  Use the command
        <literal>openssl ciphers -v 'HIGH:MEDIUM:+3DES:!aNULL'</literal> to
        see actual details for the currently installed
        <productname>OpenSSL</productname> version.  Note that this list is
        filtered at run time based on the server key type.
-->
<span class="productname">OpenSSL</span>のバージョンにより、利用可能な暗号スイートの詳細は異なります。
<code class="literal">openssl ciphers -v 'HIGH:MEDIUM:+3DES:!aNULL'</code>
コマンドを使って現在インストールされている<span class="productname">OpenSSL</span>のバージョンに関する詳細情報を得てください。
ここで得られるリストは、サーバキータイプにより実行時にフィルターされることに注意してください。
       </p></dd><dt id="GUC-SSL-PREFER-SERVER-CIPHERS"><span class="term"><code class="varname">ssl_prefer_server_ciphers</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.5.3.8.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.8.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-PREFER-SERVER-CIPHERS" class="id_link">#</a></dt><dd><p>
<!--
        Specifies whether to use the server's SSL cipher preferences, rather
        than the client's.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is <literal>on</literal>.
-->
サーバのSSL暗号設定をクライアントに優先して使うかどうかを指定します。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルトは<code class="literal">on</code>です。
       </p><p>
<!--
        Older PostgreSQL versions do not have this setting and always use the
        client's preferences.  This setting is mainly for backward
        compatibility with those versions.  Using the server's preferences is
        usually better because it is more likely that the server is appropriately
        configured.
-->
古いバージョンのPostgreSQLにはこの設定がなく、常にクライアントの設定を使います。
この設定は、主に古いバージョンとの互換性のために設けられています。
通常サーバの設定に従うほうが良いです。大抵の場合、サーバはより適切に設定されているからです。
       </p></dd><dt id="GUC-SSL-ECDH-CURVE"><span class="term"><code class="varname">ssl_ecdh_curve</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.9.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.9.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-ECDH-CURVE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the curve to use in <acronym>ECDH</acronym> key
        exchange.  It needs to be supported by all clients that connect.
        It does not need to be the same curve used by the server's Elliptic
        Curve key.
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
        The default is <literal>prime256v1</literal>.
-->
<acronym class="acronym">ECDH</acronym>キー交換で使われる曲線の名前を指定します。
接続するすべてのクライアントがこの設定をサポートしている必要があります。
サーバの楕円曲線キーで使用されるのと同じ曲線である必要はありません。
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
デフォルト値は<code class="literal">prime256v1</code>です。
       </p><p>
<!--
        <productname>OpenSSL</productname> names for the most common curves
        are:
-->
<span class="productname">OpenSSL</span>はよく使われる曲線に名前を付けています。
        <code class="literal">prime256v1</code> (NIST P-256),
        <code class="literal">secp384r1</code> (NIST P-384),
        <code class="literal">secp521r1</code> (NIST P-521).
<!--
        The full list of available curves can be shown with the command
        <command>openssl ecparam -list_curves</command>.  Not all of them
        are usable in <acronym>TLS</acronym> though.
-->
利用できる曲線の完全なリストは<code class="command">openssl ecparam -list_curves</code>で得られます。ただし、<acronym class="acronym">TLS</acronym>ではこのすべてが利用できるわけではありません。
       </p></dd><dt id="GUC-SSL-MIN-PROTOCOL-VERSION"><span class="term"><code class="varname">ssl_min_protocol_version</code> (<code class="type">enum</code>)
      <a id="id-1.6.7.7.5.3.10.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.10.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-MIN-PROTOCOL-VERSION" class="id_link">#</a></dt><dd><p>
<!--
        Sets the minimum SSL/TLS protocol version to use.  Valid values are
        currently: <literal>TLSv1</literal>, <literal>TLSv1.1</literal>,
        <literal>TLSv1.2</literal>, <literal>TLSv1.3</literal>.  Older
        versions of the <productname>OpenSSL</productname> library do not
        support all values; an error will be raised if an unsupported setting
        is chosen.  Protocol versions before TLS 1.0, namely SSL version 2 and
        3, are always disabled.
-->
使用するSSL/TLSプロトコルバージョンの最小値を設定します。
今の所使用できる値は<code class="literal">TLSv1</code>、<code class="literal">TLSv1.1</code>、<code class="literal">TLSv1.2</code>、<code class="literal">TLSv1.3</code>です。
古いバージョンの<span class="productname">OpenSSL</span>ライブラリはすべての値をサポートしません。
サポートしていない値が設定されるとエラーが発生します。
TLS 1.0より前のプロトコルバージョン、すなわちSSLバージョン2あるいは3は常に無効となります。
       </p><p>
<!--
        The default is <literal>TLSv1.2</literal>, which satisfies industry
        best practices as of this writing.
-->
デフォルトは<code class="literal">TLSv1.2</code>で、本稿執筆時点では業界のベストプラクティスを満たしています。
       </p><p>
<!--
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-SSL-MAX-PROTOCOL-VERSION"><span class="term"><code class="varname">ssl_max_protocol_version</code> (<code class="type">enum</code>)
      <a id="id-1.6.7.7.5.3.11.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.11.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-MAX-PROTOCOL-VERSION" class="id_link">#</a></dt><dd><p>
<!--
        Sets the maximum SSL/TLS protocol version to use.  Valid values are as
        for <xref linkend="guc-ssl-min-protocol-version"/>, with addition of
        an empty string, which allows any protocol version.  The default is to
        allow any version.  Setting the maximum protocol version is mainly
        useful for testing or if some component has issues working with a
        newer protocol.
-->
使用するSSL/TLSプロトコルバージョンの最大値を設定します。
使用できる値は<a class="xref" href="runtime-config-connection.html#GUC-SSL-MIN-PROTOCOL-VERSION">ssl_min_protocol_version</a>と、すべてのプロトコルバージョンを許可する空文字です。
デフォルトはすべてのプロトコルバージョンを許可する設定です。
最大プロトコルバージョンの設定は主にテスト、あるいは新しいプロトコルを使った時にコンポーネントのどこかに問題がある時に有用です。
       </p><p>
<!--
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-SSL-DH-PARAMS-FILE"><span class="term"><code class="varname">ssl_dh_params_file</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.12.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.12.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-DH-PARAMS-FILE" class="id_link">#</a></dt><dd><p>
<!--
        Specifies the name of the file containing Diffie-Hellman parameters
        used for so-called ephemeral DH family of SSL ciphers. The default is
        empty, in which case compiled-in default DH parameters used. Using
        custom DH parameters reduces the exposure if an attacker manages to
        crack the well-known compiled-in DH parameters. You can create your own
        DH parameters file with the command
        <command>openssl dhparam -out dhparams.pem 2048</command>.
-->
いわゆる短命DH系SSL暗号で使用するディフィー・ヘルマンパラメータを格納するファイル名を指定します。
デフォルトは空で、この場合はコンパイル時に決められたデフォルトのDHパラメータが使用されます。
攻撃者が、よく知られたコンパイル時設定のDHパラメータを解読しようとしている場合には、カスタムDHパラメータを使うことでその危険性を低減できます。
<code class="command">openssl dhparam -out dhparams.pem 2048</code>を使って、独自のDHパラメータファイルを作ることができます。
       </p><p>
<!--
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータは、<code class="filename">postgresql.conf</code>ファイルか、サーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-SSL-PASSPHRASE-COMMAND"><span class="term"><code class="varname">ssl_passphrase_command</code> (<code class="type">string</code>)
      <a id="id-1.6.7.7.5.3.13.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.13.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-PASSPHRASE-COMMAND" class="id_link">#</a></dt><dd><p>
<!--
        Sets an external command to be invoked when a passphrase for
        decrypting an SSL file such as a private key needs to be obtained.  By
        default, this parameter is empty, which means the built-in prompting
        mechanism is used.
-->
秘密鍵などのSSLファイルを復号する際に、パスフレーズの入手が必要な時に起動される外部コマンドを設定します。
デフォルトではこのパラメータは空文字で、組み込みのプロンプト機構が使用されます。
       </p><p>
<!--
        The command must print the passphrase to the standard output and exit
        with code 0.  In the parameter value, <literal>%p</literal> is
        replaced by a prompt string.  (Write <literal>%%</literal> for a
        literal <literal>%</literal>.)  Note that the prompt string will
        probably contain whitespace, so be sure to quote adequately.  A single
        newline is stripped from the end of the output if present.
-->
このコマンドは、パスフレーズを標準出力に書き出し、コード0で終了しなければなりません。
パラメータの値の<code class="literal">%p</code>はプロンプト文字列に置き換えられます。
（<code class="literal">%</code>を使いたい場合は<code class="literal">%%</code>としてください。）
プロンプト文字列はおそらく空白文字を含むので、適切に引用符付けするように注意してください。
出力の最後に一個の改行があれば、削除されます。
       </p><p>
<!--
        The command does not actually have to prompt the user for a
        passphrase.  It can read it from a file, obtain it from a keychain
        facility, or similar.  It is up to the user to make sure the chosen
        mechanism is adequately secure.
-->
このコマンドは実際にはパスフレーズ用にユーザにプロンプトを表示する必要はありません。
ファイルからパスフレーズが読めるなら、キーチェーン機構やその他から取得します。
選択された仕組みが適切にセキュアかどうかを確認するのはユーザ次第です。
       </p><p>
<!--
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータは<code class="filename">postgresql.conf</code>ファイル内、またはサーバのコマンドラインのみで設定可能です。
       </p></dd><dt id="GUC-SSL-PASSPHRASE-COMMAND-SUPPORTS-RELOAD"><span class="term"><code class="varname">ssl_passphrase_command_supports_reload</code> (<code class="type">boolean</code>)
      <a id="id-1.6.7.7.5.3.14.1.3" class="indexterm"></a>
      <a id="id-1.6.7.7.5.3.14.1.4" class="indexterm"></a>
      </span> <a href="#GUC-SSL-PASSPHRASE-COMMAND-SUPPORTS-RELOAD" class="id_link">#</a></dt><dd><p>
<!--
        This parameter determines whether the passphrase command set by
        <varname>ssl_passphrase_command</varname> will also be called during a
        configuration reload if a key file needs a passphrase.  If this
        parameter is off (the default), then
        <varname>ssl_passphrase_command</varname> will be ignored during a
        reload and the SSL configuration will not be reloaded if a passphrase
        is needed.  That setting is appropriate for a command that requires a
        TTY for prompting, which might not be available when the server is
        running.  Setting this parameter to on might be appropriate if the
        passphrase is obtained from a file, for example.
-->
このパラメータは、キーにパスフレーズが必要な場合、設定ファイルの再読み込み中に<code class="varname">ssl_passphrase_command</code>で設定されたパスフレーズコマンドも呼び出されるかどうかを設定します。
このパラメータがoff（デフォルト）なら、<code class="varname">ssl_passphrase_command</code>は再読込の際に無視され、パスフレーズが必要な場合、SSL設定は再読込されません。
この設定は、サーバ実行中は存在しないかもしれないTTYがプロンプトに必要なコマンドに適しています。
たとえばパスフレーズがファイルから読み込める場合には、この設定をonにするのが適切です。
       </p><p>
<!--
        This parameter can only be set in the <filename>postgresql.conf</filename>
        file or on the server command line.
-->
このパラメータは<code class="filename">postgresql.conf</code>ファイル内、またはサーバのコマンドラインのみで設定可能です。
       </p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-file-locations.html" title="20.2. ファイルの場所">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html" title="第20章 サーバの設定">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-resource.html" title="20.4. 資源の消費">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">20.2. ファイルの場所 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 16.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 20.4. 資源の消費</td></tr></table></div></body></html>