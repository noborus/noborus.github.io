<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>nginx on Noboru Saito's page</title><link>https://noborus.github.io/tags/nginx/</link><description>Recent content in nginx on Noboru Saito's page</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Mon, 30 Dec 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://noborus.github.io/tags/nginx/index.xml" rel="self" type="application/rss+xml"/><item><title>trdsql convert log</title><link>https://noborus.github.io/blog/30_convert_log/</link><pubDate>Mon, 30 Dec 2019 00:00:00 +0000</pubDate><guid>https://noborus.github.io/blog/30_convert_log/</guid><description>既存のログをLTSVに変換する 既存のログをLTSVに変換にしてみます。
mingrammer/flog を使用するとフェイクのログが簡単に出力できるので、 これで出力されるログをLTSV形式に変換する方法を紹介します。
Apache common log 以下のコマンドにより apache_common形式のログをaccess.common.logとして保存します。
flog -f apache_common -t log -o access.common.log 内容は、以下のようになります。
92.129.44.198 - metz3917 [30/Dec/2019:17:02:27 +0900] &amp;quot;DELETE /infomediaries/e-markets HTTP/2.0&amp;quot; 500 24843 246.54.243.199 - - [30/Dec/2019:17:02:27 +0900] &amp;quot;POST /24%2f7 HTTP/1.1&amp;quot; 302 8879 9.172.27.159 - - [30/Dec/2019:17:02:27 +0900] &amp;quot;DELETE /convergence/best-of-breed HTTP/1.1&amp;quot; 203 3252 49.129.77.219 - kozey2248 [30/Dec/2019:17:02:27 +0900] &amp;quot;PUT /embrace HTTP/1.1&amp;quot; 301 2812 216.42.120.216 - - [30/Dec/2019:17:02:27 +0900] &amp;quot;HEAD /infomediaries HTTP/2.0&amp;quot; 204 12516 これを trdsqlの -id &amp;quot; &amp;quot; によりスペース区切りで解析すると c4とc5でタイムが分かれてしまいますが、それ以外は問題無さそうです。</description></item></channel></rss>