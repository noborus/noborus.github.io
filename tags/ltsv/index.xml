<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ltsv on Noboru Saito&#39;s page</title>
    <link>https://noborus.github.io/tags/ltsv/index.html</link>
    <description>Recent content in Ltsv on Noboru Saito&#39;s page</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 30 Dec 2019 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://noborus.github.io/tags/ltsv/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>trdsql Log aggregation</title>
      <link>https://noborus.github.io/trdsql/08_log/index.html</link>
      <pubDate>Sun, 08 Dec 2019 00:00:00 +0000</pubDate>
      <guid>https://noborus.github.io/trdsql/08_log/index.html</guid>
      <description>Log aggregation Apache and nginx Log are also becoming established in the way of outputting in LTSV format.
An example of analyzing such Log with trdsql.
The output side customizes the apache LogFormat setting to the following custom format.
LogFormat &amp;#34;host:%h\tident:%l\tuser:%u\ttime:%t\treq:%r\tstatus:%&amp;gt;s\tsize:%b\treferer:\%{Referer}i\tua:%{User-Agent}i&amp;#34; combined_ltsvThe items host, ident, user, time, req, status, size, referer, ua are output.
The actual Log looks like this.
host:176.99.192.42	ident:-	user:-	time:[21/Oct/2019:21:33:53 +0900]	req:GET /category/software HTTP/1.1	status:200	size:138	referer:-	ua:Mozilla/5.</description>
    </item>
    <item>
      <title>trdsql convert log</title>
      <link>https://noborus.github.io/trdsql/30_convert_log/index.html</link>
      <pubDate>Mon, 30 Dec 2019 00:00:00 +0000</pubDate>
      <guid>https://noborus.github.io/trdsql/30_convert_log/index.html</guid>
      <description>既存のログをLTSVに変換する 既存のログをLTSVに変換にしてみます。
mingrammer/flog を使用するとフェイクのログが簡単に出力できるので、 これで出力されるログをLTSV形式に変換する方法を紹介します。
Apache common log 以下のコマンドにより apache_common形式のログをaccess.common.logとして保存します。
flog -f apache_common -t log -o access.common.log 内容は、以下のようになります。
92.129.44.198 - metz3917 [30/Dec/2019:17:02:27 +0900] &amp;#34;DELETE /infomediaries/e-markets HTTP/2.0&amp;#34; 500 24843 246.54.243.199 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;POST /24%2f7 HTTP/1.1&amp;#34; 302 8879 9.172.27.159 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;DELETE /convergence/best-of-breed HTTP/1.1&amp;#34; 203 3252 49.129.77.219 - kozey2248 [30/Dec/2019:17:02:27 +0900] &amp;#34;PUT /embrace HTTP/1.1&amp;#34; 301 2812 216.42.120.216 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;HEAD /infomediaries HTTP/2.0&amp;#34; 204 12516これを trdsqlの -id &amp;quot; &amp;quot; によりスペース区切りで解析すると c4とc5でタイムが分かれてしまいますが、それ以外は問題無さそうです。</description>
    </item>
    <item>
      <title>trdsql convert log</title>
      <link>https://noborus.github.io/blog/30_convert_log/index.html</link>
      <pubDate>Mon, 30 Dec 2019 00:00:00 +0000</pubDate>
      <guid>https://noborus.github.io/blog/30_convert_log/index.html</guid>
      <description>既存のログをLTSVに変換する 既存のログをLTSVに変換にしてみます。
mingrammer/flog を使用するとフェイクのログが簡単に出力できるので、 これで出力されるログをLTSV形式に変換する方法を紹介します。
Apache common log 以下のコマンドにより apache_common形式のログをaccess.common.logとして保存します。
flog -f apache_common -t log -o access.common.log 内容は、以下のようになります。
92.129.44.198 - metz3917 [30/Dec/2019:17:02:27 +0900] &amp;#34;DELETE /infomediaries/e-markets HTTP/2.0&amp;#34; 500 24843 246.54.243.199 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;POST /24%2f7 HTTP/1.1&amp;#34; 302 8879 9.172.27.159 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;DELETE /convergence/best-of-breed HTTP/1.1&amp;#34; 203 3252 49.129.77.219 - kozey2248 [30/Dec/2019:17:02:27 +0900] &amp;#34;PUT /embrace HTTP/1.1&amp;#34; 301 2812 216.42.120.216 - - [30/Dec/2019:17:02:27 +0900] &amp;#34;HEAD /infomediaries HTTP/2.0&amp;#34; 204 12516これを trdsqlの -id &amp;quot; &amp;quot; によりスペース区切りで解析すると c4とc5でタイムが分かれてしまいますが、それ以外は問題無さそうです。</description>
    </item>
    <item>
      <title>trdsql Log集計</title>
      <link>https://noborus.github.io/blog/08_log/index.html</link>
      <pubDate>Sun, 08 Dec 2019 00:00:00 +0000</pubDate>
      <guid>https://noborus.github.io/blog/08_log/index.html</guid>
      <description>Log集計 ApacheやnginxなどのLogをLTSVフォーマットで出力する方法も定着してきました。
そのようなLogをtrdsqlで解析する例です。
出力する側は、apacheのLogFormatの設定を以下のようにカスタマイズフォーマットにします。
LogFormat &amp;#34;host:%h\tident:%l\tuser:%u\ttime:%t\treq:%r\tstatus:%&amp;gt;s\tsize:%b\treferer:\%{Referer}i\tua:%{User-Agent}i&amp;#34; combined_ltsvhost,ident,user,time,req,status,size,referer,uaの項目が出力されます。
実際のLogは以下のようになります。
host:176.99.192.42	ident:-	user:-	time:[21/Oct/2019:21:33:53 +0900]	req:GET /category/software HTTP/1.1	status:200	size:138	referer:-	ua:Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0) host:192.54.157.102	ident:-	user:-	time:[21/Oct/2019:21:33:53 +0900]	req:GET /item/electronics/4478 HTTP/1.1	status:200	size:60	referer:/category/sports	ua:Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:9.0.1) Gecko/20100101 Firefox/9.0.1 host:88.60.137.115	ident:-	user:-	time:[21/Oct/2019:21:33:53 +0900]	req:POST /search/?c=Games+Electronics HTTP/1.1	status:200	size:98	referer:/item/networking/929	ua:Mozilla/5.0 (iPhone; CPU iPhone OS 5_0_1 like Mac OS X) AppleWebKit/534.</description>
    </item>
  </channel>
</rss>