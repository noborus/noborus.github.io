<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>pg_isready</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="app-pg-dumpall.html" title="pg_dumpall" /><link rel="next" href="app-pgreceivewal.html" title="pg_receivewal" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 11.3文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="reference-client.html" title="PostgreSQLクライアントアプリケーション">PostgreSQLクライアントアプリケーション</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?title=version 11.3 &#10;                      app-pg-isready.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-pg-dumpall.html" title="pg_dumpall">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-client.html" title="PostgreSQLクライアントアプリケーション">上へ</a></td><td width="60%" align="center"><span class="application">pg_isready</span></td><td width="20%" align="right"> <a accesskey="n" href="app-pgreceivewal.html" title="pg_receivewal">次へ</a></td></tr></table><hr /></div><div class="refentry" id="APP-PG-ISREADY"><div class="titlepage"></div><a id="id-1.9.4.14.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">pg_isready</span></span></h2><p>pg_isready<span class="original">
  &lt;refpurpose&gt;check the connection status of a &lt;productname&gt;PostgreSQL&lt;/productname&gt; server&lt;/refpurpose&gt;
</span> — <span class="productname">PostgreSQL</span>サーバの接続状態を検査する</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="cmdsynopsis"><p id="id-1.9.4.14.4.1"><code class="command">pg_isready</code> [<em class="replaceable"><code>connection-option</code></em>...] [<em class="replaceable"><code>option</code></em>...]</p></div></div><div class="refsect1" id="APP-PG-ISREADY-DESCRIPTION"><h2>説明</h2><span class="original">
  &lt;title&gt;Description&lt;/title&gt;
</span><p>
<span class="original">
   &lt;application&gt;pg_isready&lt;/application&gt; is a utility for checking the connection
   status of a &lt;productname&gt;PostgreSQL&lt;/productname&gt; database server. The exit
   status specifies the result of the connection check.
</span>
<span class="application">pg_isready</span>は<span class="productname">PostgreSQL</span>データベースサーバの接続状態を検査するためのユーティリティです。
終了ステータスが接続検査の結果を示します。
  </p></div><div class="refsect1" id="APP-PG-ISREADY-OPTIONS"><h2>オプション</h2><span class="original">
  &lt;title&gt;Options&lt;/title&gt;
</span><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-d <em class="replaceable"><code>dbname</code></em></code><br /></span><span class="term"><code class="option">--dbname=<em class="replaceable"><code>dbname</code></em></code></span></dt><dd><p>
<span class="original">
       Specifies the name of the database to connect to.
</span>
接続するデータベースの名前を指定します。
      </p><p>
<span class="original">
       If this parameter contains an &lt;symbol&gt;=&lt;/symbol&gt; sign or starts
       with a valid &lt;acronym&gt;URI&lt;/acronym&gt; prefix
       (&lt;literal&gt;postgresql://&lt;/literal&gt;
       or &lt;literal&gt;postgres://&lt;/literal&gt;), it is treated as a
       &lt;parameter&gt;conninfo&lt;/parameter&gt; string. See &lt;xref
       linkend="libpq-connstring"/&gt; for more information.
</span>
このパラメータに<code class="symbol">=</code>記号が含まれる場合、または、有効な<acronym class="acronym">URI</acronym>接頭辞（<code class="literal">postgresql://</code>または<code class="literal">postgres://</code>）から始まる場合、<em class="parameter"><code>conninfo</code></em>文字列として扱われます。
詳細については<a class="xref" href="libpq-connect.html#LIBPQ-CONNSTRING" title="34.1.1. 接続文字列">34.1.1</a>を参照してください。
      </p></dd><dt><span class="term"><code class="option">-h <em class="replaceable"><code>hostname</code></em></code><br /></span><span class="term"><code class="option">--host=<em class="replaceable"><code>hostname</code></em></code></span></dt><dd><p>
<span class="original">
       Specifies the host name of the machine on which the
       server is running. If the value begins
       with a slash, it is used as the directory for the Unix-domain
       socket.
</span>
サーバが稼働しているマシンのホスト名を指定します。
値がスラッシュから始まる場合は、Unixドメインソケット用のディレクトリとして使用されます。
       </p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>port</code></em></code><br /></span><span class="term"><code class="option">--port=<em class="replaceable"><code>port</code></em></code></span></dt><dd><p>
<span class="original">
       Specifies the TCP port or the local Unix-domain
       socket file extension on which the server is listening for
       connections. Defaults to the value of the &lt;envar&gt;PGPORT&lt;/envar&gt;
       environment variable or, if not set, to the port specified at
       compile time, usually 5432.
</span>
サーバが接続を監視しているTCPポートまたはUnixドメインソケットファイルの拡張子を指定します。
デフォルトは環境変数<code class="envar">PGPORT</code>の値、もし設定されていなければ、コンパイル時に指定したポート、通常は5432です。
       </p></dd><dt><span class="term"><code class="option">-q</code><br /></span><span class="term"><code class="option">--quiet</code></span></dt><dd><p>
<span class="original">
        Do not display status message. This is useful when scripting.
</span>
状態メッセージを表示しません。
これはスクリプト処理の際に有用です。
       </p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>seconds</code></em></code><br /></span><span class="term"><code class="option">--timeout=<em class="replaceable"><code>seconds</code></em></code></span></dt><dd><p>
<span class="original">
        The maximum number of seconds to wait when attempting connection before
        returning that the server is not responding. Setting to 0 disables. The
        default is 3 seconds.
</span>
サーバが応答しないことを返す前に、接続試行時に待機する最大秒数です。
ゼロに設定すると無効になります。
デフォルトは3秒です。
       </p></dd><dt><span class="term"><code class="option">-U <em class="replaceable"><code>username</code></em></code><br /></span><span class="term"><code class="option">--username=<em class="replaceable"><code>username</code></em></code></span></dt><dd><p>
<span class="original">
       Connect to the database as the user &lt;replaceable
       class="parameter"&gt;username&lt;/replaceable&gt; instead of the default.
</span>
デフォルトではなく<em class="replaceable"><code>username</code></em>ユーザとしてデータベースに接続します。
       </p></dd><dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span></dt><dd><p>
<span class="original">
         Print the &lt;application&gt;pg_isready&lt;/application&gt; version and exit.
</span>
<span class="application">pg_isready</span>のバージョンを表示し終了します。
        </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p>
<span class="original">
        Show help about &lt;application&gt;pg_isready&lt;/application&gt; command line
        arguments, and exit.
</span>
<span class="application">pg_isready</span>のコマンドライン引数に関する説明を表示し終了します。
       </p></dd></dl></div></div><div class="refsect1" id="id-1.9.4.14.7"><h2>終了ステータス</h2><span class="original">
  &lt;title&gt;Exit Status&lt;/title&gt;
</span><p>
<span class="original">
   &lt;application&gt;pg_isready&lt;/application&gt; returns &lt;literal&gt;0&lt;/literal&gt; to the shell if the server
   is accepting connections normally, &lt;literal&gt;1&lt;/literal&gt; if the server is rejecting
   connections (for example during startup), &lt;literal&gt;2&lt;/literal&gt; if there was no response to the
   connection attempt, and &lt;literal&gt;3&lt;/literal&gt; if no attempt was made (for example due to invalid
   parameters).
</span>
<span class="application">pg_isready</span>は、サーバが通常通り接続を受け付けている場合は<code class="literal">0</code>を、サーバが接続を拒絶している（例えば起動時）場合は<code class="literal">1</code>を、接続試行に対する応答がない場合は<code class="literal">2</code>を、試行が行われなかった（例えば無効なパラメータが原因）場合は<code class="literal">3</code>をシェルに返します。
  </p></div><div class="refsect1" id="id-1.9.4.14.8"><h2>環境</h2><span class="original">
  &lt;title&gt;Environment&lt;/title&gt;
</span><p>
<span class="original">
   &lt;command&gt;pg_isready&lt;/command&gt;, like most other &lt;productname&gt;PostgreSQL&lt;/productname&gt;
   utilities,
   also uses the environment variables supported by &lt;application&gt;libpq&lt;/application&gt;
   (see &lt;xref linkend="libpq-envars"/&gt;).
</span>
他のほとんどの<span class="productname">PostgreSQL</span>ユーティリティと同様、<code class="command">pg_isready</code>は<span class="application">libpq</span>によってサポートされる環境変数（<a class="xref" href="libpq-envars.html" title="34.14. 環境変数">34.14</a>参照）を使用します。
  </p></div><div class="refsect1" id="APP-PG-ISREADY-NOTES"><h2>注釈</h2><span class="original">
  &lt;title&gt;Notes&lt;/title&gt;
</span><p>
<span class="original">
   It is not necessary to supply correct user name, password, or database
   name values to obtain the server status; however, if incorrect values
   are provided, the server will log a failed connection attempt.
</span>
サーバの状態を取得するのに、正しいユーザ名、パスワード、データベース名の値を使う必要はありません。
しかし、正しくない値が使われた場合、サーバは接続試行に失敗したことをログに記録します。
  </p></div><div class="refsect1" id="APP-PG-ISREADY-EXAMPLES"><h2>例</h2><span class="original">
  &lt;title&gt;Examples&lt;/title&gt;
</span><p>
<span class="original">
   Standard Usage:
</span>
標準的な使用方法を示します。
</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_isready</code></strong>
<code class="computeroutput">/tmp:5432 - accepting connections</code>
<code class="prompt">$</code> <strong class="userinput"><code>echo $?</code></strong>
<code class="computeroutput">0</code>
</pre><p>
  </p><p>
<span class="original">
   Running with connection parameters to a &lt;productname&gt;PostgreSQL&lt;/productname&gt; cluster in startup:
</span>
起動中の<span class="productname">PostgreSQL</span>クラスタに対して接続パラメータを付けて実行します。
</p><pre class="screen">
<code class="prompt">$ </code><strong class="userinput"><code>pg_isready -h localhost -p 5433</code></strong>
<code class="computeroutput">localhost:5433 - rejecting connections</code>
<code class="prompt">$</code> <strong class="userinput"><code>echo $?</code></strong>
<code class="computeroutput">1</code>
</pre><p>
  </p><p>
<span class="original">
   Running with connection parameters to a non-responsive &lt;productname&gt;PostgreSQL&lt;/productname&gt; cluster:
</span>
応答しない<span class="productname">PostgreSQL</span>クラスタに対して接続パラメータを付けて実行します。
</p><pre class="screen">
<code class="prompt">$ </code><strong class="userinput"><code>pg_isready -h someremotehost</code></strong>
<code class="computeroutput">someremotehost:5432 - no response</code>
<code class="prompt">$</code> <strong class="userinput"><code>echo $?</code></strong>
<code class="computeroutput">2</code>
</pre><p>
  </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-pg-dumpall.html">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-client.html">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pgreceivewal.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">pg_dumpall</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> pg_receivewal</td></tr></table></div></body></html>