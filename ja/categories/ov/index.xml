<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ov on 斉藤登のページ</title><link>https://noborus.github.io/ja/categories/ov/index.html</link><description>Recent content in ov on 斉藤登のページ</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 24 Sep 2023 09:00:00 +0900</lastBuildDate><atom:link href="https://noborus.github.io/ja/categories/ov/index.xml" rel="self" type="application/rss+xml"/><item><title>psql</title><link>https://noborus.github.io/ja/ov/psql/index.html</link><pubDate>Fri, 21 Jul 2023 09:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/psql/index.html</guid><description>PostgreSQLのクライアントツールであるpsqlは結果を表示するときにPAGERを利用できます。 PSQLのPAGERを設定するも参照してください。
psql psqlは、結果を表示するときに最初の行にヘッダーとして列名が表示され、その下に列が|で区切られて表示されます。 ovを利用すると、ヘッダーと列を指定することで、より見やすく表示できます。
以下はPSQL_PAGER の推奨設定例です。 ヘッダー1を指定(-H1)、列の区切りに&amp;quot;|&amp;ldquo;を指定(-d &amp;quot;|&amp;quot;)、カラムモード(-C)を設定します。 画面に収まる場合は、ページャーを終了します(-F)。 列の色を変える(--column-rainbow)のもおすすめです。
PSQL_PAGER &amp;#39;ov -F -C -d &amp;#34;|&amp;#34; -H1 --column-rainbow&amp;#39; 画面ではデフォルトから色を変えてconfig.yamlで以下の設定をしています。
StyleHeader: Background: &amp;#34;#23274f&amp;#34; Bold: true StyleColumnHighlight: Foreground: &amp;#34;lightcyan&amp;#34; Reverse: true StyleAlternate: Background: &amp;#34;#2a2a2a&amp;#34; watch(PostgreSQL 15) PostgreSQL 15からはwatchが利用できます。 PSQL_WATCH_PAGER には以下の設定を推奨します。 これにより空行で区切られた最後のセクションを表示し続けます。
PSQL_WATCH_PAGER=&amp;#39;ov --follow-section --section-delimiter &amp;#34;^$&amp;#34;&amp;#39; expanded output (\x) 拡張出力(\x)で表示のときには、レコード区切りをセクション区切りとして扱うと、レコード区切りでスクロールするため、見やすくなります。
PAGER &amp;#39;ov -F --section-delimiter &amp;#34;^-&amp;#34;&amp;#39; (\x)と\watchを組み合わせることもできます。
unaligned (\a) アラインメントなし（列を揃えない）表示でも、列ハイライトを利用することで、快適に表示されます。 以下のように、PAGERの指定は変更しません。
PSQL_PAGER=&amp;#39;ov -F -C -d &amp;#34;|&amp;#34; -H1&amp;#39;.</description></item><item><title>git</title><link>https://noborus.github.io/ja/ov/git/index.html</link><pubDate>Fri, 21 Jul 2023 09:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/git/index.html</guid><description>ovでgitのlogを見やすくする gitのlogを見やすくする工夫はいろんなところで紹介されていますが、gitの設定等により表示を変更する方法にとどまります。 gitの出力をセクション区切りで分割することで、より使いやすくなります。 また、それに合わせてjump-targetを&amp;quot;section&amp;quot;しておくことをおすすめします。 以下はgitの推奨設定例です。
[pager] diff = ov -F --section-delimiter &amp;#34;^diff&amp;#34; --jump-target &amp;#34;section&amp;#34; log = ov -F --section-delimiter &amp;#34;^commit&amp;#34; --jump-target &amp;#34;section&amp;#34; git log git logはcommit毎に区切られます。 上記の設定によりcommit毎に移動できます。
git diff git diffはdiffまたはファイル毎に区切られます。 上記の設定によりdiff毎に移動できます。
検索 上記の設定により検索したときの移動がコミット単位で表示するようになります。 通常は検索結果が一番上に表示するため、途中の行であった場合はさかのぼる必要がありますが、コミットの先頭から表示されます。</description></item><item><title>mysql</title><link>https://noborus.github.io/ja/ov/mysql/index.html</link><pubDate>Fri, 30 Jun 2023 09:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/mysql/index.html</guid><description>ov はmysqlクライアントやMySQL Shellのページャーとしても使用できます。 mysqlクライアントは--pagerオプションで指定できます。
mysql --pager=&amp;#39;ov -w=f -H3 -F -C -d &amp;#34;|&amp;#34;&amp;#39; ~/.my.cnf設定ファイルに以下を書くことでも使用できます。
[client] pager=ov -w=f -H3 -F -C -d &amp;#34;|&amp;#34; mysqlのヘッダーは3行なので、-H3で指定していますが、うち2行は区切りの線です。 もし区切りの線を常に表示しておかなくてもよいのであれば、-H1を指定して、さらに--skip-lines 1で1行目をスキップするようにします。
ov -w=f --skip-lines 1 -H1 -F -C -d &amp;#34;|&amp;#34;&amp;#39; mysqlshでは、--pagerオプションを使うか、mysqlshが起動している間に設定します。 例えば、jsモードでは、以下のコマンドで永続的に設定できます。
shell.options.setPersist(&amp;#34;pager&amp;#34;,&amp;#34;ov -H1 --skip-lines 1 -C -w=false -d&amp;#39;|&amp;#39; -F&amp;#34;) 日本語：SQLモードとPythonモードでは、以下のように設定します。
```console \option --persist pager &amp;#34;ov -w=f -H1 --skip-lines 1 -F -C -d &amp;#39;|&amp;#39;&amp;#34;</description></item><item><title>pgcli</title><link>https://noborus.github.io/ja/ov/pgcli/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/pgcli/index.html</guid><description>ovはpgcliのページャーとしても使用可能です。
~/.config/pgcli/config に以下のように設定します。
pager = &amp;#39;ov -C -d &amp;#34;|&amp;#34; --skip-lines 1 -H1&amp;#39;</description></item><item><title>mycli</title><link>https://noborus.github.io/ja/ov/mycli/index.html</link><pubDate>Sat, 08 Jul 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/mycli/index.html</guid><description>ovはmycliのページャーとしても使用できます。
mycliはmysqlの~/.my.cnfファイルを使用して設定できます。 https://www.mycli.net/configを参照してください。
[client] pager=&amp;#34;ov -C --skip-lines 1 --header 1 -d&amp;#39;|&amp;#39;&amp;#34;</description></item><item><title>ps</title><link>https://noborus.github.io/ja/ov/ps/index.html</link><pubDate>Sat, 08 Jul 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/ps/index.html</guid><description>psの出力を列区切りで表示できます。 --column-widthを使用するとスペース区切りよりも賢く列を認識できます。
ps aux | ov --column-width --column-rainbow -H1</description></item><item><title>man</title><link>https://noborus.github.io/ja/ov/man/index.html</link><pubDate>Fri, 30 Jun 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/man/index.html</guid><description>ovはmanページを表示するページャーとしても使えます。 環境変数MANPAGERにovを設定してください。
MANPAGER=ov manページでカラフルに表示したいときはStyleOverStrikeとStyleOverLineスタイルによりカスタマイズできます。
StyleOverStrike: Foreground: &amp;#34;aqua&amp;#34; Bold: true StyleOverLine: Foreground: &amp;#34;red&amp;#34; Underline: true</description></item><item><title>procs</title><link>https://noborus.github.io/ja/ov/procs/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/procs/index.html</guid><description>procs のページャーとしても使用可能です。
configuration file に以下のように設定します。 ヘッダー行を1または2で設定すると便利です。
[pager] command = &amp;#34;ov -H=1 -w=false -d=│&amp;#34;</description></item><item><title>top</title><link>https://noborus.github.io/ja/ov/top/index.html</link><pubDate>Sat, 08 Jul 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/top/index.html</guid><description>top works fine when started in batch mode (it doesn&amp;rsquo;t work as-is when started normally because it steals keystrokes). topコマンドは自前で画面に合わせて描画するためページャーは必要ありませんが(通常起動するとキーストロークを奪ってしまうためそのままでは動作しません)、 現在の状態を表示するだけで、履歴を表示することはできません。 バッチモードで起動すると表示を繰り返すため、それをページャーで受け取って表示すれば履歴を表示できます。
topを-bバッチモードで起動すると先頭が&amp;quot;top&amp;quot;から始まる出力で繰り返し出力されます。その出力をovで受け取り、--follow-sectionで繰り返し表示します。 そうするとfollow section modeが動作しているときには、最新が表示され、とめればさかのぼって履歴を表示できます。
top -b -c -w512|ov --column-delimiter &amp;#34;/\s+/&amp;#34; --section-delimiter &amp;#34;^top&amp;#34; --column-mode --column-rainbow --follow-section -w=false</description></item><item><title>ovでファイル監視（ウォッチ）</title><link>https://noborus.github.io/ja/ov/watch/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/watch/index.html</guid><description>ovはウォッチモードをサポートしています。ウォッチモードは一定間隔でファイルを読み込みます。 ファイルは指定した時間ごとに追加されます。
ov --watch 1 /proc/meminfo 日本語：その時、EOFの代わりにformfeed(\f)を追加します。 ウォッチモードは自動的にfollow-section &amp;ldquo;\f&amp;quot;を設定します。</description></item><item><title>bat</title><link>https://noborus.github.io/ja/ov/bat/index.html</link><pubDate>Fri, 30 Jun 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/bat/index.html</guid><description>bat のページャーとしてもサポートしています。
環境変数PAGERまたはBAT_PAGERにovを設定してください。
export BAT_PAGER=&amp;#34;ov -F -H3&amp;#34; bat を使用するときには折り返さない(--wrap=never)で使用することをおすすめします。 batで折り返してしまうと、折り返さない表示に切り替えることができません。 ovの方で折り返しを行ったほうが、ovの機能を活用できます。
bat --wrap=never README.md</description></item><item><title>csvの表示</title><link>https://noborus.github.io/ja/ov/csv/index.html</link><pubDate>Fri, 30 Jun 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/csv/index.html</guid><description>ovをCSVビューアとして使うことができます。 ヘッダーの有無や区切りも文字を指定できます。
ov -H1 -C -d&amp;#39;,&amp;#39; -c --column-rainbow MOCK_DATA.csv</description></item><item><title>markdown表示</title><link>https://noborus.github.io/ja/ov/markdown/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/markdown/index.html</guid><description>ovはmarkdownビューアとしても使えます。 セクション区切りとしてmarkdownのヘッダを指定することで、次のセクションに移動しやすくなります。
ov --section-delimiter &amp;#34;^#&amp;#34; README.md</description></item><item><title>複数ファイル</title><link>https://noborus.github.io/ja/ov/multifile/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/multifile/index.html</guid><description>ovは複数ファイルを指定可能です。
] キーで次のドキュメントを表示します。 [ キーで前のドキュメントを表示します。 (デフォルトキー設定)
ov *.go</description></item><item><title>複数の単語を複数の色でハイライト</title><link>https://noborus.github.io/ja/ov/multicolor/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/multicolor/index.html</guid><description>ovは複数の単語を複数の色でハイライトできます。
ov --multi-color &amp;#34;ERROR.*,WARN,INFO,DEBUG,not,^.{24}&amp;#34; access.log 入力方法 正規表現をスペースで区切って入力します。 スペースを含む場合は、引用符で囲みます。
.（デフォルトキー） でmulticolorの入力モードになります。 ERROR.* WARN &amp;#34;error is&amp;#34; カスタマイズ 色（スタイル）はカスタマイズ可能です。 github customizeを参照してください。
StyleMultiColorHighlight: - Foreground: &amp;#34;red&amp;#34; - Foreground: &amp;#34;aqua&amp;#34; - Foreground: &amp;#34;yellow&amp;#34; - Foreground: &amp;#34;fuchsia&amp;#34; - Foreground: &amp;#34;lime&amp;#34; - Foreground: &amp;#34;blue&amp;#34; - Foreground: &amp;#34;grey&amp;#34;</description></item><item><title>大きなファイルを開く速度</title><link>https://noborus.github.io/ja/ov/speed/index.html</link><pubDate>Thu, 10 Aug 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/speed/index.html</guid><description>多くのページャーはファイルを全部読み込む前に表示を開始するため、単純な速度比較は難しいですが、最後尾に移動したり行数が必要な処理（行番号の表示等）をする場合は、ファイル全体を読む必要があり速度に差が出ます。
ovは、大きなファイルを読み込むときには、ファイルの先頭以外は行数と位置を記録して後で読み直せるようにするため、メモリ使用量を抑えて、速度も速く動作します。 また、ファイル操作は別のゴルーチンがおこなうため、ファイルの読み込みが発生しても操作がブロックされることはありません。
そのため、大きなファイルを開いても操作によって待たされることが無いようになっています。
lessと比較してみます。
ovは、大きなファイルではメモリに読み込まずにカウントと記録だけおこなうため、全行数のカウントが早く終わります。行数が把握できるとそこからすぐに最後尾に移動できるため操作が止まることはありません。
また、全行数を読み込む前であってもlessのように最後尾に移動する場合は、先に最後尾に移動してからカウントを再開するため、最後尾に移動するのも即座に可能です。</description></item><item><title>コマンド実行</title><link>https://noborus.github.io/ja/ov/exec/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/exec/index.html</guid><description>通常ページャーは実行した出力をパイプでovに渡しますが、stdoutとstderrをどちらか、または両方を混在させて表示することになります。
make |ov make 2&amp;gt;&amp;amp;1 |ov Execモードはovからコマンドを実行します。 ovから実行することで、stdoutとstderrを別々のドキュメントとして表示できます。
さらに--follow-allと同時に使うことで、最後に出力された方を表示できます。
つまり、makeの標準出力とエラー出力を別々に表示しながら、エラーがあれば画面を切り替えできます。
ov --follow-all --exec -- make</description></item><item><title>フォローモードの使い方</title><link>https://noborus.github.io/ja/ov/tail/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/tail/index.html</guid><description>出力されたデータを追加して、最下行に移動します（tail -fのように）。
ovはfollowモードで入力検索などの操作が可能です（インクリメンタルサーチも！）。
docker run chentex/random-logger:latest 100 400 |ov --follow-mode</description></item><item><title>セクションの使い方</title><link>https://noborus.github.io/ja/ov/section/index.html</link><pubDate>Fri, 21 Jul 2023 06:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/ov/section/index.html</guid><description>ovは複数行のブロックをセクションとして表示できます。 セクションのブロックはセクション区切り行で区切られます。 セクション区切り行はStyleSectionLineのスタイル(背景色緑)で表示されます。
The section delimiter is optionally specified as a regular expression string at startup. セクション区切りは、起動時に正規表現文字列としてオプションで指定できます。
ov --section-delimiter &amp;#34;^$&amp;#34; 起動後は、セクション区切りを入力モードで入力することで設定できます。 セクション区切りの入力モードは、section_delimiterのキーバインディング(alt + d)で入力できます。
Section delimiter: ^$ セクション区切りが不要な場合(空行など)は、--section-start 1を使うことで次の行から表示できます。
--follow-sectionは、フォローモードの行の代わりにセクションを使用します。
\watch of psqlとの併用に適しています。</description></item><item><title>ov v0.32.0</title><link>https://noborus.github.io/ja/blog/ov_032_0/index.html</link><pubDate>Sun, 24 Sep 2023 09:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_032_0/index.html</guid><description>ov v0.32.0をリリースしました Terminal PAGER releases ov v0.32.0
起動時に検索する--pattern オプションを追加 --pattern は起動時に検索する文字列を指定することができます。 先頭から/検索文字列で検索する場合と同じです。
lessの--patternオプション相当です。
圧縮ファイルの伸長を行わない--skip-extractオプションを追加 --skip-extract は圧縮ファイルの伸長をしないオプションです。 ovでは先頭の数バイトから圧縮ファイルの判定を指定します。 そのため、パイプ等で1文字2文字しか渡されない場合は、必要なバイト数に達するまで表示されません。 --skip-extract を指定すると、圧縮ファイルの判定をおこなわないので即座に表示します。
バッファの保存を追加 通常ファイルではないパイプ等の入力のときに現在のバッファを保存できるようになりました。 lessのsアクションと同じです。 デフォルトではS（大文字キー）で保存します。
ctrl+hにキー割り当てが可能になりました ctrl+hは端末によりbackspaceと区別できませんが、端末により動くが変わっており、押したキーを設定で割り当てることができない場合が多くありました。
ctrl+hはbackspaceを必ず同一にすることにより割り当て可能にしました。
そのため ctrl+hとbackspaceとctrl+backspaceは区別せずにbackspaceになります。 Backspace2が別に割り当てられるような記述がありましたが、これは廃止しました。
section-headerオプションを追加 --section-header はセクションのヘッダーを表示するかどうかを指定するオプションです。
例えば~/.gitconfigに以下のように設定するとgit diffではファイル単位でセクションとして扱い、スクロールしてもファイル名がヘッダーとして表示されるようになります。
[pager] diff = ov -F --section-delimiter &amp;#34;^diff&amp;#34; --section-header log = ov -F --section-delimiter &amp;#34;^commit&amp;#34; --section-header 過去のバージョン v0.32.0 section-headerオプションを追加 v0.31.0 検索にsmartcaseオプションを追加 v0.30.0 すべてをメモリにロードしないように変更 v0.15.0 パフォーマンス、メモリ効率改善 v0.14.2 キーボード、マウスの改善 v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.</description></item><item><title>ov v0.31.0</title><link>https://noborus.github.io/ja/blog/ov_031_0/index.html</link><pubDate>Thu, 20 Jul 2023 12:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_031_0/index.html</guid><description>ov v0.31.0をリリースしました Terminal PAGER releases ov v0.31.0
検索にsmartcaseオプションを追加 大文字・小文字を区別するかどうかのオプションに加えてsmartcaseを追加しました。 smartcaseでは最初の文字が大文字だった場合は大文字小文字を区別します。それ以外は区別しません。
列のカーソル移動を改善 列のカーソル移動を改善しました。驚きが少ないような動きになりました。
列のカーソル移動をサイクル対応にしました。左右の端までいくと反対側の端に移動します。 横へのカーソル移動のとき画面からはみ出すような列では次の列に移動せずに列の残りの内容を表示するように移動します。 列モードを終了したり、再度列モードにしたときにカーソルが現在の表示を尊重して表示するようになりました。 カーソルが画面外にあって、いきなり飛ぶような動きがなくなりました。 jump-targetにsectionを指定できるようにした デフォルトでは、検索すると一番上の対象行が表示されますが、jump-targetを指定するとその分ずらして表示します。 jump-targetには、数字と「.」または「%」による割合指定ができました。 例えば --jump-target 1 であれば1行下にずらします。 --jump-target 50% または --jump-target .5 であれば、画面の半分の位置にずらします。
これに加えて文字列で sectionが指定可能になりました。--jump-target section とすると、 検索結果がセクションの先頭から表示される場合はセクションの先頭から表示しつつ、検索がヒットした行を表示します。
例えば~/.gitconfigに以下のように設定するとgit logではコミット単位をサクションとして表示して、検索するとコミットの先頭から表示できるようになります。
[pager] diff = ov -F --section-delimiter &amp;#34;^diff&amp;#34; --jump-target &amp;#34;section&amp;#34; log = ov -F --section-delimiter &amp;#34;^commit&amp;#34; --jump-target &amp;#34;section&amp;#34; 過去のバージョン v0.31.0 検索にsmartcaseオプションを追加 v0.30.0 すべてをメモリにロードしないように変更 v0.15.0 パフォーマンス、メモリ効率改善 v0.14.2 キーボード、マウスの改善 v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.</description></item><item><title>ov v0.30.0</title><link>https://noborus.github.io/ja/blog/ov_030_0/index.html</link><pubDate>Thu, 01 Jun 2023 17:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_030_0/index.html</guid><description>ov v0.30.0をリリースしました Terminal PAGER releases ov v0.30.0
メモリ管理の変更 v0.15.0までのメモリ管理を変更して、ファイルのすべてをメモリにロードするのを止め、必要なChunkをメモリにロードするように変更しました。
ov v0.15.0までは、行数を数えるのにファイルをすべて読み込んでいましたが、この方法では、ファイルサイズが大きくなるとメモリを大量に消費してしまいます。 そこで、最初の起動時に最初のChunk分（1万行）はメモリにロードしますが、それ以降は行数を数えてreadの位置をChunk毎に記録しておくだけにしました。 Chunkの移動が発生した場合は、そのChunkをメモリにロードします。そしてメモリ制限を超えた場合は、メモリにロードされているChunkを解放します。 通常ファイルではseekを使っているので、Chunkの移動時にディスクアクセスが発生します。
seekできないファイルでは、Chunkを解放してしまうと再ロードできないため、デフォルトではすべてのChunkをメモリにロードします。 メモリ制限をした場合は、メモリ制限を超えないまでChunkをロードし、readを一時停止します。そしてChunkを移動したときに、現在のChunkより前のChunkを解放して、停止していたreadを再開します。
これにより、メモリを大量に消費することなく、大きなファイルを扱うことができるようになりました。 メモリの制限は--memory-limitと--memory-limit-fileオプションで指定できます。
followの改善 新しく--follow-nameオプションを追加しました。今まではファイルディスクリプタを使っていたので、ファイル名が変わるとfollowができなくなっていました。 --follow-nameオプションを指定すると、ファイル名が変わってもfollowができるようになりました。
また、改行で終わらないファイルのfollowができない問題を修正しました。改行で終わっていないファイルに追加された場合は、新しい行ではなくすでに表示されている行の後ろに追加されるようになりました。 これまでは、改行で終わっていないファイルに追加された場合は、新しい行として表示されていたため、再度開き直すと表示が違っていました。
column-widthを追加 --column-widthオプションを追加しました。--column-widthオプションを指定すると、指定した幅で表示します。 guesswidthを使って、ヘッダーの文字幅を推測しています。 これによりps出力等をパイプで受けてそれぞれの列をわかりやすく表示できるようになりました。
過去のバージョン v0.30.0 すべてをメモリにロードしないように変更 v0.15.0 パフォーマンス、メモリ効率改善 v0.14.2 キーボード、マウスの改善 v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.</description></item><item><title>ov v0.15.0</title><link>https://noborus.github.io/ja/blog/ov_015_0/index.html</link><pubDate>Mon, 06 Mar 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_015_0/index.html</guid><description>ov v0.15.0をリリースしました Terminal PAGER releases ov v0.15.0
メモリ管理の方法を見直して、Chunk単位（現在のところ1万行）で管理することにより、大きなファイルの読み込み速度が改善しました。またメモリの使用量も少なくなっています。
ovはこれまでのところ、ファイルの内容をすべてメモリにロードしていましたが、今回はすべてインメモリで動作する最後（バグフィックス版は出るかもしれませんが）のバージョンになります。
行管理がChunk単位にすることで、Chunk単位でメモリへのロードとアンロードが可能になるため、通常のファイルではすべてメモリに載っている必要がなくなります。
ただ、アンロード、再ロード、パイプの場合の戦略の違い等々、変更が多岐に渡るため、次のバージョンの変更が大きくなります。
過去のバージョン v0.15.0 パフォーマンス、メモリ効率改善 v0.14.2 キーボード、マウスの改善 v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.</description></item><item><title>ov v0.14.2</title><link>https://noborus.github.io/ja/blog/ov_014_2/index.html</link><pubDate>Wed, 08 Feb 2023 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_014_2/index.html</guid><description>ov v0.14.2をリリースしました Terminal PAGER releases ov v0.14.2
hyperlinkの改善 ls --hyperlink に対応しました。ls --hyperlinkはちょっと文法が異なっていたため、追加で対応する必要がありました。
ls --hyperlink|ov キーボード、マウスの改善 キーボードでctrl+cコピー、ctrl+vペーストに対応しました。コピーはマウスで選択する必要があるためそれほど使用しませんが、ペーストはキーボードで出来た方が便利でした。
shift+wheelで横スクロールに対応しました。列モードでは、列の選択がマウスのwheelで可能になります。
また、キーボードでも shift+HOME で一番左に移動、shift+Endで一番右に移動できるようにしました。
過去のバージョン v0.14.2 キーボード、マウスの改善 v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.</description></item><item><title>ov v0.14.1</title><link>https://noborus.github.io/ja/blog/ov_014_1/index.html</link><pubDate>Fri, 27 Jan 2023 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_014_1/index.html</guid><description>ov v0.14.1をリリースしました Terminal PAGER releases ov v0.14.1
Column Delimiterに正規表現も指定可能になりました 一番多く使われると思うのが、コマンドの出力で縦に揃えるためにスペース調整している場合に対応するためで、正規表現で複数の連続するスペースを指定する場合です。 --column-delimiter &amp;quot;/\s+/&amp;quot;のように指定できます。
ps aux | ov -H1 --column-delimiter &amp;#34;/\s+/&amp;#34; --column-rainbow --column-mode OSC-8 hyperlinkに対応しました Hyperlinks in terminal emulatorsにあるHyperLinkに対応しました。
エスケープシーケンスでリンクにするもので、対応しているターミナルエミュレーターで動作します。
print &amp;#39;\e]8;;http://example.com\e\\This is a link\e]8;;\e\\&amp;#39;|ov とovで表示中でもリンクが機能します。
過去のバージョン v0.14.1 column-delimiterに正規表現サポートを追加 v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.</description></item><item><title>ov v0.14.0</title><link>https://noborus.github.io/ja/blog/ov_014_0/index.html</link><pubDate>Thu, 12 Jan 2023 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_014_0/index.html</guid><description>ov v0.14.0をリリースしました Terminal PAGER releases ov v0.14.0
XDG_CONFIG_HOME に対応しました 今までcobra/vipperを普通に使っていたので、設定の場所は~/.ov.yamlでしたが、XDG_CONFIG_HOMEに対応したので、$XDG_CONFIG_HOME/ov/config.yamlの方が優先されるようになりました。XDG_CONFIG_HOMEが設定していなくても~/.config/ov/config.yamlを見るようになります。
ov &amp;ndash;config で指定したパス $XDG_CONFIG_HOME/ov/config.yaml ~/.config/ov/config.yaml ~/.ov.yaml の順で参照します。
Hacker Newsに投稿 Hacker Newsに投稿したのでGitHUb Starが１日で200→500になりました。その後も順調に増えています。
過去のバージョン v0.14.0 XDG_CONFIG_HOMEに対応 v0.13.0 view-modeの修正 v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.</description></item><item><title>ov v0.12.0</title><link>https://noborus.github.io/ja/blog/ov_012_0/index.html</link><pubDate>Sun, 11 Dec 2022 11:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_012_0/index.html</guid><description>ov v0.12.0をリリースしました Terminal PAGER releases ov v0.12.0
multicolor機能を追加 multicolor機能を追加しました。これは複数の語に対して、それぞれ色（スタイル）を指定できるものです。 コードハイライト等の機能を持ったものは自動で色分けして色付けしますが、自分で色を付けたい文字列を指定します。
デフォルトで[.]キーで文字列を入力できます。
また、この機能を使うためには、元のハイライト表示が邪魔になる場合があるので、元の装飾を無効にする--plainオプションも追加しています。起動後もデフォルトで[ctrl+e]で元の装飾を無効／有効を切り替えられます。
jump-target機能を追加 jump-target機能を追加しました。lessの--jump-targetに相当します。通常検索すると1番上の行に該当行を表示するように移動しますが、この行をjump-targetで指定した行に変更します。1であれば、2番目の行に表示するように移動します。
lessでは.5のようにドットで始まると割合指定が可能（これは50%として画面の真ん中の行を指定）ですが、これにも対応しています。さらに50%のように後ろに%を付ける指定も可能です。
マイナス指定は画面の下から数えた行数指定になります。 デフォルトで[j]キーで文字列を入力できます。
過去のバージョン v0.12.0 multicolor, jump-targetの追加 v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.</description></item><item><title>ov v0.11.1</title><link>https://noborus.github.io/ja/blog/ov_011_1/index.html</link><pubDate>Sat, 28 May 2022 07:32:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_011_1/index.html</guid><description>ov v0.11.1をリリースしました Terminal PAGER releases ov v0.11.1
設定名の修正 セクションの区切り文字を入力するモードに切り替える機能で、全体をsection_delimiterに変更してからリリースしたところ、設定の項目がsection_modeのままのところがあったのを修正しました。
また、ov.yamlとov-less.yamlにタブが含まれていてインデントが合っておらず、設定が効かなくなっていました。 さらに設定ファイルの読み込みエラーが捕捉されておらず、単にこれらのファイルを使用すると設定が反映されない状態になっていました。
設定がエラーとなった場合はエラーで終了するように変更して、また雛形のyamlファイルのテストも追加しました。
過去のバージョン v0.11.1 設定名の微修正 v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.</description></item><item><title>ov v0.11.0</title><link>https://noborus.github.io/ja/blog/ov_011_0/index.html</link><pubDate>Sat, 21 May 2022 08:39:02 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_011_0/index.html</guid><description>ov v0.11.0をリリースしました Terminal PAGER releases ov v0.11.0
セクションの概念を追加 対象の文書を--section-delimiterで区切り文字を指定することにより、セクションとして扱えるようになりました。
--section-delimiterの区切り文字は正規表現で指定できます。改行は含まれませんので、^$は空行を指定したことになります。 その場合空行毎に違うセクションになります。
ページャーは通常、内容に関係なく画面サイズにより次のページの表示を決めていますが、セクションを利用することにより意味のある単位で移動できます。
デフォルトでは、次のセクションに移動するのは[スペース]キー、前のセクションに移動するのは[^]キーです。最後のセクションに移動は[9]キーです。
空行を指定した場合は、セクション移動時に最初の行が空行になってしまいます。これを調整するために--section-startも追加しました。--section-start 1を指定することにより、--section-delimiterの次の行から表示できます。
起動オプションだけでなく、起動後も--section-delimiterは[alt+d]、--section-startは[alt+s]で指定できます。
follow-sectionを追加 --follow-sectionオプションを追加しました。section-delimiterで指定した区切り文字単位で、内容が更新されたときに最後のセクションを表示します。 follow-sectionを利用することにより、PostgreSQL version 15で追加される psqlのwatchのページャー（PSQL_WATCH_PAGER）として使用できるようになります。
PSQL_WATCH_PAGER &amp;#39;ov --follow-section --section-delimiter &amp;#34;^$&amp;#34;&amp;#39; Watchは追記するように変更 --watchは指定した時間毎にファイルを再読込していましたが、前の内容を消さずに再読込をした内容を追記するように変更しました。 このときEOFに到達するとEOFを&amp;rsquo;\f&amp;rsquo;に置き換えて追記します。
さらにWatchモードは自動で&amp;rsquo;\f&amp;rsquo;をsection-delimiterとして、最終セクションを表示するようになりました。
つまり、--watchで最後に実行された内容が表示され続けるのは変わりませんが、Watchモードを止めて上にスクロールすると履歴が見られます。
Watchモードはファイルの定期再読込に加えてsection-delimiterとfollow-sectionを自動で設定したモードです。
過去のバージョン v0.11.0 sectionの概念を追加 v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.</description></item><item><title>ov v0.10.0</title><link>https://noborus.github.io/ja/blog/ov_010_0/index.html</link><pubDate>Thu, 17 Feb 2022 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_010_0/index.html</guid><description>ov v0.10.0をリリースしました Terminal PAGER releases ov v0.10.0
reload/watchの追加 ファイルを再読込みするreloadを追加しました。ファイルを再オープンして読み込み直します。(起動後のF5 or ctrl+alt+l)
標準入力等のパイプ経由の場合は、それまで読み込んだ入力をリセットして、そこから読み込みを開始します。
watchは指定したｎ秒毎にreloadを繰り返します。watchの指定はオプション--watch nまたは起動後のF4 or ctrl+alt+wで指定して開始します。
例えば/proc/meminfo等の特殊ファイルに対しても使用できます。
終了時の出力を改善 ov終了時に表示している画面を再現するように出力できます（画面をクリアせずに終了の要望がきますが、その代替としての機能です）が、lessの場合はその時点の画面ではなく、それまで表示した画面を残して終了できます。
lessとまったく同じ機能はできませんが、さかのぼって出力させておきたい場合があるときのために出力範囲をできるようにしました。
オプションの--exit-write-beforeと--exit-write-afterで指定できます。--exit-write-beforeを多めに指定しておけば、画面をスクロールした後そこまでの行まで先頭から出力できるようになります。
また逆に--exit-write-afterを3行等少なく指定すれば、現在表示している画面の上から3行目までのように少なく出力できます。
これは起動した後終了するときにctrl+qで終了しようとするとその前に範囲指定できます。
WriteAndQuit Before:After: 1000:0 のようにすると1000行遡って（1000行に満たなければ先頭）出力します(Afterの0は画面下限を意味します)。
WriteAndQuit Before:After: :3 とした場合は、現在の画面を3行のみ出力します。
描画速度の改善 環境によって表示が遅い場合があるようなので、描画速度を改善しました。
ovはunisegを使用して1文字を判定しているので、Unicodeの結合文字に対応していない他のソフトに比べて遅い場合があります。それでも大抵の環境では気づくことはない速度で描画できていると思います。
過去のバージョン v0.10.0 reload,watchを追加 v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.</description></item><item><title>ov v0.9.6</title><link>https://noborus.github.io/ja/blog/ov_096/index.html</link><pubDate>Thu, 06 Jan 2022 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_096/index.html</guid><description>ov v0.9.6をリリースしました リダイレクト出力がうまくいかない場合があったので修正しました。
値がない列があると列モードのハイライト選択がそれ以降選択できない問題があったので修正しました。
過去のバージョン v0.9.6 リダイレクト出力、列モードの修正 v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.1.1 パッケージ自動更新の調整 v0.1.0 ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5 現在の基本機能を備えた最初のバージョン 参考 ovの紹介</description></item><item><title>ov v0.9.5</title><link>https://noborus.github.io/ja/blog/ov_095/index.html</link><pubDate>Tue, 28 Dec 2021 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_095/index.html</guid><description>ov v0.9.5をリリースしました Terminal PAGER releases ov v0.9.5
サスペンド／レジュームのサポートを追加 そのままでは、あまり使わなくなってきたと思っていますが、サスペンド／レジュームを出来るようにしました。 ov表示中に一旦Shellを起動してコマンドが実行できます。Shellを終了するとovに戻ります。シグナルのサスペンドも（サポートしている環境では）サスペンドします。
リダイレクト出力をサポート これまで echo &amp;quot;hoge&amp;quot; | ov &amp;gt; out.txt としてもovの表示はしても出力はしませんでしたが、リダイレクトするようにしました。 また、標準出力をパイプで受け取った場合に、標準エラー出力によって画面が崩れることがあったのをなるべく抑止するように改善しました。
その他内部的にリファクタリングにより多くの修正をしています。
過去のバージョン v0.9.5 サスペンド／レジュームのサポート v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。 v0.9.3 スキップ行オプションの追加 v0.9.2 主要モジュール更新版 v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。 v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。 v0.8.9 (pre)follow-mode,follow-all-modeの追加 v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.</description></item><item><title>ov v0.9.4</title><link>https://noborus.github.io/ja/blog/ov_094/index.html</link><pubDate>Tue, 02 Nov 2021 12:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_094/index.html</guid><description>ov v0.9.4をリリースしました Terminal PAGER releases ov v0.9.4
検索の改善 検索にインクリメンタルサーチを追加しました。issue#83に上がっていたインクリメンタルサーチを実装しました。 一文字入力するごとに検索をして最短でみつかった語の位置に移動します。 検索は毎回goroutineを使用しているため、入力を妨げないようになっています（小さなファイルだと気がつかないですが、大きなファイルで固まる実装が多いので、その差を実感していただけると思います）。
検索は元々、正規表現の入力も可能だったのですが、入力時に特殊文字を\でエスケープする等のわかりづらさがあったので、今回正規表現検索を使用するかを分けました。 インクリメンタルサーチでも正規表現は使用できます。
元々、大文字、小文字を区別するスイッチはあったので、検索時は、これらの組み合わせによって動作が変わるため複雑になっています。
機能 表示 (Default)切り替えキー コマンドオプション インクリメンタルサーチ (I) alt+i &amp;ndash;incremental 正規表現 (R) alt+r &amp;ndash;regexp-search 大文字小文字の区別 (Aa) alt+c -i, &amp;ndash;case-sensitive オプションの他、設定によってデフォルトを変更できます。ov.yamlのコメントを外して設定してください。
マークの改善 こちらもissue#86に上がっていたマークの削除とマークの可視化を実装しました。
これまで、現在の見ている行にマークを付けて移動して戻れるようにしていたのですが、削除機能は付けていませんでした。個別削除と全削除をできるようにしています。
マークすると先頭の背景色を変更して可視化しています。この部分はスタイルカスタマイズでStyleMarkLineにより、背景色、前景色、太字、アンダーライン等カスタマイズ可能です。また、MarkStyleWidthにより先頭から何文字スタイルを適用するか設定可能です。一行全部を変更したい場合は -1を指定してください。
スキップ行の指定 v0.9.3のオプションとして、先頭から指定した行を不可視にするオプションを追加しました。これは--headerと組み合わせて使用することを想定しています。 --headerを指定すると先頭から指定した行を固定表示できますが、余分な行があると表示領域が狭くなります。
例えばASCIIのボックス表示では、最上位行が区切り線の行になります。1行だけならまだ良いですが、横に長いデータの場合、折返し表示モードでは区切り線が何行にも渡って表示される場合があります。
1 +----+--------+ 2 | id | name | 3 +----+--------+ 4 | 1 | Orange | 5 | 2 | Melon | 6 | 3 | Apple | 7 +----+--------+ この場合 1行スキップして、ヘッダーを1行に指定すると2行目のみヘッダーとして扱われ、4行目以降がボディとしてスクロール対象になります。 おまけ インクリメンタルサーチと正規表現の組み合わせで以下のようなことができるようになりました:-) 過去のバージョン v0.</description></item><item><title>ov v0.9.0</title><link>https://noborus.github.io/ja/blog/ov_090/index.html</link><pubDate>Fri, 09 Apr 2021 16:14:51 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_090/index.html</guid><description>ov v0.9.0をリリースしました。 Terminal PAGER releases ov v0.9.0
v0.8.9をプレリリースバージョンとしてリリースしていましたが、正式にfollowモードを追加したバージョンとして v0.9.0をリリースしました。
followモード、follow-allモード followモードはtail -fのようにファイルが追記されたら自動で読み取って表示します。lessではless +Fで実現されています。 ログの監視に使われることが多いです。
ov --follow-mode /var/log/syslog followモードで複数のファイルを指定することも出来ますが、ovでは複数のファイルを別々のドキュメントとして管理して、 &amp;lsquo;]&amp;lsquo;と&amp;rsquo;[&amp;lsquo;で切り替えるようになっています。表示しているファイル以外が更新されていても裏側で読み取られているので気づくことが出来ません。
そこで、動作はfollowモードに似ていますが、最後に更新があったファイルに切り替えるfollow-allモードも追加しました。
ov --follow-all /var/log/syslog /var/log/auth.log のようにすると最後に更新されたファイルに自動で切り替わります。
followモードとfollow-allモードは起動後でもctrl+fやctrl+aによりモード切り替えが可能です。
execモード execモードはovの--exec に渡されたコマンドを実行して、stdout/stderrを表示します。 コマンドを実行した結果をパイプによりページャーで表示させるのが一般的ですが、stdin(標準入力)は一つしか無いので、stdout/stderrどちらかを表示か両方を一つにリダイレクトして（混ぜて）表示する必要があります。
例えばmakeコマンドでは、そこから更に複数のコマンドが呼ばれるためstdoutとstderr両方に多く出力されるため見づらい場合があります。
そのような場合にexecモードで実行すると簡単にエラーと通常出力を分けて見ることができます。その際にfollow-allモードも一緒に指定するとエラー時に気づきやすくなります。
ov --follow-all --exec -- make -j2 execオプションの後に(--)を付けるとそれ以降はovのオプションとは解釈されません（この例ではmakeのオプションと解釈されます）。
スタイルカスタマイズの追加 検索のハイライトとカラムモードのハイライトをカスタマイズ出来るようにしました。 ~/.ov.yamlに以下のように指定できます。
StyleSearchHighlight: Foreground: &amp;#34;gold&amp;#34; Reverse: true いくつかのモードを束ねて切り替えるview-modeの選択の追加 ページャーとして汎用的に使えるようになってきたのでファイル形式によっていくつものモードを変更したい場合が出てきます。あらかじめ ~/.ov.yamlに以下のようなModeを登録しておくと起動後にpを押してpsqlやMySQLと打つことでこれらのモードを束ねて切り替えることを出来るようにしました。
Mode: psql: Header: 2 AlternateRows: true ColumnMode: true LineNumMode: false WrapMode: true ColumnDelimiter: &amp;#34;|&amp;#34; MySQL: Header: 3 AlternateRows: true ColumnMode: true LineNumMode: false WrapMode: true ColumnDelimiter: &amp;#34;|&amp;#34; 過去のバージョン v0.</description></item><item><title>ov v0.8.1</title><link>https://noborus.github.io/ja/blog/ov_081/index.html</link><pubDate>Fri, 12 Feb 2021 18:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_081/index.html</guid><description>ov v0.8.1をリリースしました。 Terminal PAGER releases ov v0.8.1
文字の単位をCode point から Grapheme clusterに変更しました。
GoではruneがCode point単位で文字として数えます。Unicodeでは結合文字等があり、1Code pointが１文字ではない場合があります。1文字ではなくても元の文字の後に置けば良いので、文字数が変わる以外は通常それほど意識しなくても良い場合がほとんどです。
ただし端末に表示する場合のような文字幅が固定長の世界では、次の文字が0,1,2幅先なのかを決める必要があります。これまでCode pointに合わせて表示していたため🇯🇵のような文字は、端末では「JP」（フォントによりますが点線でそれぞれ囲まれた文字）のように表示されていました。そのため２文字で表示されることがありましたが、これからは1文字幅として扱うようにしました。
現在だとechoのように端末に任せて表示すると２文字幅で、ovで表示すると「J」のように表示され、文字が欠けてしまっているように見えます。これは端末側が対応して🇯🇵が表示出来るようになっても文字幅がズレずにそのまま表示されるようになるための対応です。端末側が対応するまではechoとの結果がズレてしまいますが、どちらが正しい仕様かを考えた結果先行して実装することにしてしまいました。 ただ、いまだに絵文字の結合に対応して表示できる端末が見つからないのが問題点です&amp;hellip;
過去のバージョン v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。 v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.1.1 パッケージ自動更新の調整 v0.1.0 ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5 現在の基本機能を備えた最初のバージョン 参考 ovの紹介</description></item><item><title>ov v0.8.0</title><link>https://noborus.github.io/ja/blog/ov_080/index.html</link><pubDate>Thu, 07 Jan 2021 14:57:42 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_080/index.html</guid><description>ov v0.8.0をリリースしました。 Terminal PAGER releases ov v0.8.0
このバージョンからtcellをv2にアップグレードしました。 スタイルらへんの非互換があるためv2になっていますが、そこまで大きくは変わっていません。
Windowsターミナルでキーバインドに大文字を指定しているキーが効かない問題を修正しました。 他の端末では「Shift+a」は「A」になるのですが、Windowsターミナルでは「Shift+A」でイベントが発生するので、大文字のときには「Shift」が押されていてもイベントを取得するようにしました。
ドキュメントを追加・閉じるイベントを追加しました。追加は通常使用できませんが、閉じるは「Ctrl+k」で閉じるようになりました。
configとオプションを指定していた場合にオプションが優先されない問題があったのを修正しました。
oviewer パッケージ を使用できるように内部的にも修正をしています。
過去のバージョン v0.8.0 tcell v2にアップグレードしました。 v0.7.1 交互に行スタイル効果適用の行がズレていたので修正 v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.1.1 パッケージ自動更新の調整 v0.1.0 ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5 現在の基本機能を備えた最初のバージョン 参考 ovの紹介</description></item><item><title>ov v0.7.0</title><link>https://noborus.github.io/ja/blog/ov_070/index.html</link><pubDate>Wed, 09 Dec 2020 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_070/index.html</guid><description>ov v0.7.0をリリースしました。 Terminal PAGER releases ov v0.7.0
PAGER=ov としても問題なく使えるバージョンになっていると思います。
スタイルカスタマイズを変更しました。 元々は、ヘッダーの色、行の交互表示の背景色、重ね打ちの色、重ね内下線の色を設定ファイルにより指定出来るようにしていましたが、これらの項目全体のスタイルを指定できるようにしました。
それぞれ、StyleHeader、StyleAlternate、StyleOverStrike、 StyleOverLineという項目名について、以下のスタイルを指定できます。
Foreground、Background には色名。 Bold, Blink, Dim, Italic, Underline には true / false(Boolean)。 以下のように指定できます。
StyleHeader: Background: &amp;#34;gray&amp;#34; Foreground: &amp;#34;red&amp;#34; Bold: true Italic: true Underline: true ov.yaml をコピーして変更していくと良いと思います。
また、lessのキーバインドに近づけた ov-less.yaml をアップしておきました。 lessに慣れている方はこちらを使用すると移行がしやすいと思います。
ページアップ、ページダウンの移動改善 1行を折り返さない表示の場合は、表示領域の高さ＝行数なので、+-するだけで問題なかったですが、 折り返す場合は、表示領域の幅により表示できる行数が変わり、スクロール時にはさらに行の途中から表示する必要があったりするので、 これまでページアップ、ページダウンは正確に1ページではありませんでした。
今回はその計算の実装をやり直しました。そのため、1行が非常に長く画面いっぱいになる場合でも、ページ単位の移動で、その途中の表示からちゃんと表示されるようになりました。 また1行が非常に長い場合にパフォーマンスが落ちるのを少し改善しました。元々の実装の仕方により、1行が長すぎる行の効率はあまり良くありません。
過去のバージョン v0.7.0 スタイルカスタマイズの改善 v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.</description></item><item><title>ov v0.6.2</title><link>https://noborus.github.io/ja/blog/ov_062/index.html</link><pubDate>Mon, 19 Oct 2020 21:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_062/index.html</guid><description>ov v0.6.2をリリースしました。 releases ov v0.6.2
v0.6.0でマウスサポートを追加しました。 元のマウスの動きは、ov側では制御せずにターミナル側のマウス処理にまかせていました。しかしそれでは、選択してコピーする時に改行コードが含まれないでコピーされるため、複数行のコピーに問題がありました。
マウス制御を実装することで、複数行のコピーがちゃんと複数行としてコピーされるようになります。ただ、goでクリップボードを制御するのは、難しくLinuxでは外部コマンドを使用するライブラリを使用しています。
v0.6.1はv0.6.0の細かなバグの修正バージョンです。 v0.6.2で検索のキャンセルができるようになりました。 大きなファイルで検索をかけると時間がかかる場合があります。そのときにキャンセル（デフォルトでCtrl+c)を押すと、検索がキャンセルされすぐに制御が戻ります。
また、検索速度自体を速くしました。検索文字列が正規表現のメタ文字を使用していない場合は、正規表現検索ではない検索をします。正規表現よりも高速に検索できるため、通常の文字列を入れて検索するときは、かなり高速になっています。
過去のバージョン v0.6.2 検索の高速化とキャンセル処理の追加 v0.6.1 細かな修正バージョン v0.6.0 マウスサポート v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.1.1 パッケージ自動更新の調整 v0.1.0 ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5 現在の基本機能を備えた最初のバージョン 参考 ovの紹介</description></item><item><title>ov v0.5.0</title><link>https://noborus.github.io/ja/blog/ov_050/index.html</link><pubDate>Mon, 31 Aug 2020 15:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_050/index.html</guid><description>ov v0.5.0をリリースしました。 releases ov v0.5.0
こちらには書いていませんでしたが、0.2.0リリース以降に以下のリリースをしていました。
v0.3.0 v0.3.1 v0.4.0 v0.5.0 これまでの変更で内部的な修正を多くおこない v0.5.0では複数のファイルを別々のドキュメントとして開くように変更しました。
これまで ov *.txt は cat *.txtと同じようにファイルを繋げて表示していましたが、それぞれ独立して開いてドキュメントの切り替えで移動するようになっています。
1つのviewに対して複数のドキュメントを切り替えて使えるように内部的な修正をしたため、helpの表示、debug logの表示が可能になり、v0.5.0では、複数ファイルの開き方を変更するまでになりました。
また、安定バージョンとは言えませんが、ライブラリとしても使用可能になっています。
ライブラリの使用の仕方としては、サンプル がありますが、以下のようにOpenしてRun()で使用します。ページャーのライブラリなので、Run()の後は終了キーを押すまで返ってきません。goroutineで動かして、動いているページャーに対して動作を変更することが可能ですが、まだ仕様が落ち着いてないので、無茶をすると動かなくなる場合があります。
package main import ( &amp;#34;github.com/noborus/ov/oviewer&amp;#34; ) func main() { ov, err := oviewer.Open(&amp;#34;main.go&amp;#34;) if err != nil { panic(err) } if err := ov.Run(); err != nil { panic(err) } } 過去のバージョン v0.5.0 複数のドキュメントを開く方法を変更 v0.4.0 ヘルプ画面を追加 v0.3.1 位置をマークする機能を追加 v0.3.0 入力の改善 v0.2.1 色をカスタマイズ可能にする v0.2.0 検索の改善 v0.1.3 行番号モードを追加 v0.1.2 Homebrewパッケージの追加 v0.</description></item><item><title>ov v0.2.0</title><link>https://noborus.github.io/ja/blog/ov_020/index.html</link><pubDate>Mon, 25 May 2020 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_020/index.html</guid><description>ov v0.2.0をリリースしました。 releases ov v0.2.0
検索を正規表現対応にしました 検索を正規表現対応にしました。
検索入力を改善しました。カーソルを移動でき、削除、挿入できるようにしました。
バックスペースと重ね打ちに対応しました ^Hによるバックスペースに対応しました。
a^Ha のように文字にバックスペースしてからもう一度同じ文字を打つ重ね打ち、とアンダーラインにバックスペースしてから文字を打つ重ね打ちに対応しました。
これによりMANPAGERとして使用できるようになりました。
まとめ これまでpsqlやmysqlで使用される機能を多く追加してきましたが、 通常のPAGERとして使用される必要な機能を実装しました。
自分で使用する分にはlessの代わりにovを使用しても問題なく使用できています。 ただlessは高機能でオプションが多くあるので、人によっては全然足りないと感じることでしょう。
過去のバージョン v0.2.0　検索の改善 v0.1.3　行番号モードを追加 v0.1.2　Homebrewパッケージの追加 v0.1.1　パッケージ自動更新の調整 v0.1.0　ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5　現在の基本機能を備えた最初のバージョン 参考 ovの紹介</description></item><item><title>ov v0.1.3</title><link>https://noborus.github.io/ja/blog/ov_013/index.html</link><pubDate>Mon, 11 May 2020 10:00:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/ov_013/index.html</guid><description>ov v0.1.3をリリースしました releases ov v0.1.3
行番号モードを追加しました -nオプションをつけての起動又はGキー（トグル）により行番号モードになります。
交互の背景色の仕様を少し変更しました 交互の背景色を付けるモードでは、画面の端から端まで色を付けるように変更しました。 これにより空行でも背景色が表示されます。
ステータスの行数を自動更新するようにしました ステータス右側の (0/177) の（177）が行数ですが、行数が多いと起動時に全行を読み取れていないので、「&amp;hellip;」と読み取り中の表示がついていました。何らかの操作をした時に、その時点の読み取られた行数を更新していましたが、タイマーでも更新するように変更しました。
過去のバージョン v0.1.2　Homebrewパッケージの追加 v0.1.1　パッケージ自動更新の調整 v0.1.0　ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加 v0.0.5　現在の基本機能を備えた最初のバージョン 参考 ov - Oviewerの紹介</description></item><item><title>ov</title><link>https://noborus.github.io/ja/blog/oviewer/index.html</link><pubDate>Tue, 21 Apr 2020 14:50:00 +0900</pubDate><guid>https://noborus.github.io/ja/blog/oviewer/index.html</guid><description>私が作成中のovの紹介です。
最初Oviewerというレポジトリ名でしたが、コマンド名に合わせるようにovに変更しました。
インストール ov のリリースからバイナリもダウンロードできますが、今はまだgo getで最新をダウンロードして使うことをオススメします。
※ 2020/5/11追記。現在は各種パッケージも用意していますので、インストールしやすい方法利用してください。
go get -u github.com/noborus/ov cd ov make install 特徴 lessやmoreのようなTerminal pagerです。
圧縮（gzip, bzip2, zstd, lz4, xz）されているファイルをそのまま表示可能 より良いUnicodeのサポート。ターミナルで表示できる（フォントがあれば）結合文字も表示可能 より良いワイド幅（全角文字）の対応 ヘッダーの行数を指定して固定可能 行の折り返し／折り返さないを表示後に切替可能 1行毎に背景色を付けることが可能 psqlやmysqlからの表示を考慮 終了時に現在の画面の内容を書き出すことが可能 環境変数PAGERに設定して使用しても問題なく使えることを目指しています。
現在はUTF-8のテキストを対象にしています。
また、manのpagerとしては、問題があるので、MANPAGERは別途指定する必要があります。
※ 2020/5/25 追記 v0.2.0からMANPAGERとしても使用できるようになりました。
実装の特徴 tcellを使用していて、比較的多くの端末に対応しています。 メモリに溜め込む実装なので、メモリは多く使用します。更新されるログファイルの監視的な用途には向きません。
使用方法 コマンド名は ov です。
基本的にはファイル名を指定して起動します。
ov filename 又はパイプを使用して標準入力からの入力を受け付けます。
cat filename|ov オプションは以下です。オプションの多くは、起動後にキーより切り替え可能です。
$ ov --help ov is a feature rich pager(such as more/less). It supports various compressed files(gzip, bzip2, zstd, lz4, and xz).</description></item></channel></rss>